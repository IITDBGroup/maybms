<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>MayBMS: User Manual</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html --> 
<meta name="src" content="manual.tex"> 
<meta name="date" content="2009-03-10 00:59:00"> 
<link rel="stylesheet" type="text/css" href="manual.css"> 
</head><body 
>
   <div class="maketitle">
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          

<h2 class="titleHead">MayBMS: A Probabilistic Database System<br /><br />
User Manual<br /><br />
Copyright (c) 2005-2009<br />
The MayBMS Development Group<br /><br />
Christoph Koch*, Dan Olteanu**, Lyublena Antova*, and Jiewen Huang*,**<br /><br />
*
  Department of Computer Science, Cornell University, Ithaca, NY<br />
**
  Oxford University Computing Laboratory, Oxford, UK</h2>
 <div class="author" ></div>
<br />
<div class="date" ></div>
                                                                          

                                                                          
   </div>
                                                                          

                                                                          
   <h2 class="likechapterHead"><a 
 id="x1-1000"></a>Contents</h2> <div class="tableofcontents">
   <span class="chapterToc" >1 <a 
href="#x1-20001" id="QQ2-1-2">Introduction</a></span>
<br />   &#x00A0;<span class="sectionToc" >1.1 <a 
href="#x1-30001.1" id="QQ2-1-3">What is MayBMS?</a></span>
<br />   &#x00A0;<span class="sectionToc" >1.2 <a 
href="#x1-40001.2" id="QQ2-1-4">Applications</a></span>
<br />   &#x00A0;<span class="sectionToc" >1.3 <a 
href="#x1-50001.3" id="QQ2-1-5">Acknowledgments</a></span>
<br />   <span class="chapterToc" >2 <a 
href="#x1-60002" id="QQ2-1-6">First Steps</a></span>
<br />   &#x00A0;<span class="sectionToc" >2.1 <a 
href="#x1-70002.1" id="QQ2-1-7">Installing MayBMS</a></span>
<br />   &#x00A0;<span class="sectionToc" >2.2 <a 
href="#x1-100002.2" id="QQ2-1-10">Running MayBMS</a></span>
<br />   &#x00A0;<span class="sectionToc" >2.3 <a 
href="#x1-110002.3" id="QQ2-1-11">Short Instructions</a></span>
<br />   <span class="chapterToc" >3 <a 
href="#x1-130003" id="QQ2-1-13">Probabilistic Databases</a></span>
<br />   &#x00A0;<span class="sectionToc" >3.1 <a 
href="#x1-140003.1" id="QQ2-1-14">Informal Definition</a></span>
<br />   &#x00A0;<span class="sectionToc" >3.2 <a 
href="#x1-150003.2" id="QQ2-1-15">Formal Definition</a></span>
<br />   &#x00A0;<span class="sectionToc" >3.3 <a 
href="#x1-160003.3" id="QQ2-1-16">An Example</a></span>
<br />   <span class="chapterToc" >4 <a 
href="#x1-170004" id="QQ2-1-17">Tutorial</a></span>
<br />   &#x00A0;<span class="sectionToc" >4.1 <a 
href="#x1-180004.1" id="QQ2-1-18">A Really Simple Example</a></span>
<br />   &#x00A0;<span class="sectionToc" >4.2 <a 
href="#x1-190004.2" id="QQ2-1-19">Example: Triangles in Random Graphs</a></span>
<br />   &#x00A0;<span class="sectionToc" >4.3 <a 
href="#x1-200004.3" id="QQ2-1-20">Example: Skills Management</a></span>
<br />   &#x00A0;<span class="sectionToc" >4.4 <a 
href="#x1-210004.4" id="QQ2-1-21">Data Cleaning</a></span>
<br />   <span class="chapterToc" >5 <a 
href="#x1-220005" id="QQ2-1-22">Formal Foundations</a></span>
<br />   &#x00A0;<span class="sectionToc" >5.1 <a 
href="#x1-230005.1" id="QQ2-1-23">Probabilistic Databases: Notation</a></span>
<br />   &#x00A0;<span class="sectionToc" >5.2 <a 
href="#x1-240005.2" id="QQ2-1-24">Query Language Desiderata</a></span>
<br />   &#x00A0;<span class="sectionToc" >5.3 <a 
href="#x1-250005.3" id="QQ2-1-25">The Algebra</a></span>
<br />   &#x00A0;<span class="sectionToc" >5.4 <a 
href="#x1-270005.4" id="QQ2-1-28">Representing Probabilistic Data</a></span>
<br />   &#x00A0;<span class="sectionToc" >5.5 <a 
href="#x1-310005.5" id="QQ2-1-32">Conceptual Evaluation and Rewritings</a></span>
<br />   &#x00A0;<span class="sectionToc" >5.6 <a 
href="#x1-340005.6" id="QQ2-1-35">Asymptotic Efficiency</a></span>
<br />   <span class="chapterToc" >6 <a 
href="#x1-380006" id="QQ2-1-40">The MayBMS Query and Update Language</a></span>
<br />   &#x00A0;<span class="sectionToc" >6.1 <a 
href="#x1-390006.1" id="QQ2-1-41">Language Overview</a></span>
                                                                          

                                                                          
<br />   &#x00A0;<span class="sectionToc" >6.2 <a 
href="#x1-450006.2" id="QQ2-1-47">Language Reference</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >6.2.1 <a 
href="#x1-460006.2.1" id="QQ2-1-48">repair-key</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >6.2.2 <a 
href="#x1-470006.2.2" id="QQ2-1-49">pick-tuples</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >6.2.3 <a 
href="#x1-480006.2.3" id="QQ2-1-50">possible</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >6.2.4 <a 
href="#x1-490006.2.4" id="QQ2-1-51">Confidence computation and approximate aggregates</a></span>
<br />   <span class="chapterToc" >7 <a 
href="#x1-550007" id="QQ2-1-57">MayBMS Internals</a></span>
<br />   <span class="chapterToc" >8 <a 
href="#x1-610008" id="QQ2-1-64">The MayBMS Codebase</a></span>
<br />   <span class="chapterToc" >9 <a 
href="#x1-620009" id="QQ2-1-67">Experiments</a></span>
<br />   &#x00A0;<span class="sectionToc" >9.1 <a 
href="#x1-630009.1" id="QQ2-1-68">Random Graphs</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >9.1.1 <a 
href="#x1-640009.1.1" id="QQ2-1-69">Experiments with Varying Levels of Precision</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >9.1.2 <a 
href="#x1-650009.1.2" id="QQ2-1-71">Experiments with Different Edge Probabilities</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >9.1.3 <a 
href="#x1-660009.1.3" id="QQ2-1-73">Experiments with General Random Graphs</a></span>
<br />   &#x00A0;<span class="sectionToc" >9.2 <a 
href="#x1-670009.2" id="QQ2-1-75">Probabilistic TPC-H</a></span>
<br />   <span class="appendixToc" >A <a 
href="#x1-68000A" id="QQ2-1-77">Queries in Random Graph Experiments</a></span>
<br />   <span class="appendixToc" >B <a 
href="#x1-69000B" id="QQ2-1-78">Queries in General Random Graph Experiments</a></span>
<br />   <span class="appendixToc" >C <a 
href="#x1-70000C" id="QQ2-1-79">Probabilistic TPC-H Queries</a></span>
   </div>
                                                                          

                                                                          
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;1</span><br /><a 
 id="x1-20001"></a>Introduction</h2>
   <h3 class="sectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-30001.1"></a>What is MayBMS?</h3>
<!--l. 82--><p class="noindent" >The <span 
class="cmti-12">MayBMS </span>system (note: MayBMS is read as &#8220;maybe-MS&#8221;, like DBMS) is a
complete probabilistic database management system that leverages robust
relational database technology: MayBMS is an extension of the Postgres server
backend. MayBMS is open source and the source code is available under the BSD
license at
<div class="center" 
>
<!--l. 90--><p class="noindent" >
<!--l. 91--><p class="noindent" >http://maybms.sourceforge.net</div>
<!--l. 95--><p class="indent" >   The MayBMS system has been under development since 2005. While the
development has been carried out in an academic environment, care has
been taken to build a robust, scalable system that can be reliably used in
real applications. The academic homepage of the MayBMS project is
at
<div class="center" 
>
<!--l. 102--><p class="noindent" >
<!--l. 103--><p class="noindent" >http://www.cs.cornell.edu/database/maybms/</div>
<!--l. 108--><p class="indent" >   MayBMS stands alone as a complete probabilistic database management
system that supports a powerful, compositional query language for which
nevertheless worst-case efficiency and result quality guarantees can be made. We
are aware of several research prototype probabilistic database management
systems that are built as front-end applications of Postgres, but of no other fully
integrated and available system. The MayBMS backend is accessible through
several APIs, with efficient internal operators for computing and managing
probabilistic data.
<!--l. 113--><p class="indent" >   In summary, MayBMS has the following features:
                                                                          

                                                                          
      <ul class="itemize1">
      <li class="itemize">Full support of all features of PostgreSQL 8.3.3, including unrestricted
      query functionality, query optimization, APIs, updates, concurrency
      control and recovery, etc.
      </li>
      <li class="itemize">Essentially  no  performance  loss  on  PostgreSQL  8.3.3  functionality:
      After parsing a query or DML statement, a fast syntactic check is made
      to decide whether the statement uses the extended functionality of
      MayBMS. If it does not, the subsequently executed code is exactly that
      of PostgreSQL 8.3.3.
      </li>
      <li class="itemize">Support for efficiently creating and updating probabilistic databases,
      i.e., uncertain databases in which degrees of belief can be associated
      with uncertain data.
      </li>
      <li class="itemize">A powerful query and update language for processing uncertain data
      that  gracefully  extends  SQL  with  a  small  number  of  well-designed
      language constructs.
      </li>
      <li class="itemize">State-of-the-art   efficient   techniques   for   exact   and   approximate
      probabilistic inference.</li></ul>
<!--l. 144--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">1.2   </span> <a 
 id="x1-40001.2"></a>Applications</h3>
<!--l. 147--><p class="noindent" >Database systems for uncertain and probabilistic data promise to have many
applications. Query processing on uncertain data occurs in the contexts of data
warehousing, data integration, and of processing data extracted from
the Web. Data cleaning can be fruitfully approached as a problem of
reducing uncertainty in data and requires the management and processing of
large amounts of uncertain data. Decision support and diagnosis systems
                                                                          

                                                                          
employ hypothetical (what-if) queries. Scientific databases, which store
outcomes of scientific experiments, frequently contain uncertain data such as
incomplete observations or imprecise measurements. Sensor and RFID data is
inherently uncertain. Applications in the contexts of fighting crime or
terrorism, tracking moving objects, surveillance, and plagiarism detection
essentially rely on techniques for processing and managing large uncertain
datasets. Beyond that, many further potential applications of probabilistic
databases exist and will manifest themselves once such systems become
available.
<!--l. 164--><p class="indent" >   The MayBMS distribution comes with a number of examples that illustrate its
use in these application domains. Some of these examples are described in the
tutorial chapter of this manual.
<!--l. 169--><p class="indent" >   The experiments section at the end of this manual reports on some
performance experiments with MayBMS. Unfortunately, at the time of writing
this, no benchmark for probabilistic database systems exists, so these experiments
are necessarily somewhat ad-hoc.
<!--l. 176--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">1.3   </span> <a 
 id="x1-50001.3"></a>Acknowledgments</h3>
<!--l. 181--><p class="noindent" >Michaela Goetz, Thomas Jansen and Ali Baran Sari are alumni of the MayBMS
team. The MayBMS project was previously supported by German Science
Foundation (DFG) grant KO 3491/1-1 and by funding provided by the Center for
Bioinformatics (ZBI) at Saarland University, Saarbruecken, Germany. It is
currently supported by grant IIS-0812272 of the US National Science
Foundation.
                                                                          

                                                                          
<!--l. 7--><p class="indent" >
                                                                          

                                                                          
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;2</span><br /><a 
 id="x1-60002"></a>First Steps</h2>
   <h3 class="sectionHead"><span class="titlemark">2.1   </span> <a 
 id="x1-70002.1"></a>Installing MayBMS</h3>
<!--l. 13--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x1-80002.1"></a>Using the installers</h5>
<!--l. 15--><p class="noindent" >Installers for MayBMS are available for both Windows and Linux operating
systems and can be downloaded at
   <a 
href="https://sourceforge.net/projects/maybms/" class="url" ><span 
class="cmtt-12">https://sourceforge.net/projects/maybms/</span></a>
<!--l. 19--><p class="indent" >   After you have obtained a copy of the installer, start it and follow the
instructions.
<!--l. 21--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x1-90002.1"></a>Compiling from scratch</h5>
<!--l. 23--><p class="noindent" >If the prepackaged installers do not work for you you can download the
MayBMS&#8217;s source code and compile it. A copy is available for download
at
   <a 
href="https://sourceforge.net/projects/maybms/" class="url" ><span 
class="cmtt-12">https://sourceforge.net/projects/maybms/</span></a>
<!--l. 28--><p class="indent" >   Alternatively, you can obtain the latest snapshot from the repository by
issuing the following command:
                                                                          

                                                                          
   <div class="verbatim">
cvs&#x00A0;-z3&#x00A0;-d:pserver:anonymous@maybms.cvs.sourceforge.net:/cvsroot/maybms
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;co&#x00A0;-P&#x00A0;maybms
</div>
<!--l. 32--><p class="nopar" > (on a single line).
<!--l. 35--><p class="indent" >   This creates a directory maybms/ with a subdirectory postgresql-8.3.3/ that
contains the source code of the system.
<!--l. 38--><p class="indent" >   To compile and install MayBMS, just follow the instructions for installing
PostgreSQL 8.3.3. The latter is documented at

   <a 
href="http://www.postgresql.org/docs/8.3/interactive/installation.html" class="url" ><span 
class="cmtt-12">http://www.postgresql.org/docs/8.3/interactive/installation.html</span></a>.
<!--l. 59--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">2.2   </span> <a 
 id="x1-100002.2"></a>Running MayBMS</h3>
<!--l. 61--><p class="noindent" >After you have installed MayBMS (in either of the described ways), you can set
up a database and start using it. Creating and accessing databases is the same as
in PostgreSQL 8.3.3. Follow the links

   <a 
href="http://www.postgresql.org/docs/8.3/interactive/tutorial-createdb.html" class="url" ><span 
class="cmtt-12">http://www.postgresql.org/docs/8.3/interactive/tutorial-createdb.html</span></a>
<!--l. 71--><p class="noindent" >and

   <a 
href="http://www.postgresql.org/docs/8.3/interactive/tutorial-accessdb.html" class="url" ><span 
class="cmtt-12">http://www.postgresql.org/docs/8.3/interactive/tutorial-accessdb.html</span></a>.
<!--l. 78--><p class="indent" >   See next section for short instructions on how to run MayBMS.
<!--l. 80--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">2.3   </span> <a 
 id="x1-110002.3"></a>Short Instructions</h3>
<!--l. 83--><p class="noindent" >Alternatively, you can follow the following set of
instructions.<span class="footnote-mark"><a 
href="manual2.html#fn1x3"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-11001f1"></a> 
                                                                          

                                                                          
<!--l. 88--><p class="indent" >   On most UNIX machines, Postgres is by default installed in the directory
/usr/local/pgsql/ and run under user &#8220;postgres&#8221;. MayBMS uses the same
defaults. If you prefer to install MayBMS in your home directory and run it
with your user privileges, you do not need root privileges to install it.
Proceed as follows: Change the path ac_default_prefix in line 279 of the file
maybms/postgresql-8.3.3/configure to a path into your home directory (e.g.
/home/myname/pgsql/ if your home directory is /home/myname/).
<!--l. 99--><p class="indent" >   To compile, install, and start the Postgres server, execute the following
statements:
                                                                          

                                                                          
   <div class="verbatim">
cd&#x00A0;maybms/postgresql-8.3.3/
&#x00A0;<br />./configure
&#x00A0;<br />make
&#x00A0;<br />make&#x00A0;install
&#x00A0;<br />cd
&#x00A0;<br />pgsql/bin/initdb&#x00A0;-D&#x00A0;mydbname
&#x00A0;<br />pgsql/bin/pg_cql&#x00A0;start&#x00A0;-D&#x00A0;mydbname
</div>
<!--l. 109--><p class="nopar" >
<!--l. 111--><p class="indent" >   Note: In these minimal instructions, we did not create a special database using
createdb (so the default, template1, has to be used), and error messages are
written to the console.
<!--l. 115--><p class="indent" >   Now MayBMS is available for connections from applications.
<!--l. 117--><p class="indent" >   For example, the Postgres command line interface psql in which you can issue
MayBMS queries and data manipulation language statements is started
with
                                                                          

                                                                          
   <div class="verbatim">
psql&#x00A0;template1
</div>
<!--l. 122--><p class="nopar" > Now you can enter the examples from, e.g., the following tutorial. The psql
program is terminated using the command &#8220;<span 
class="cmsy-10x-x-120">\</span>q&#8221;. The database server is stopped
with
                                                                          

                                                                          
   <div class="verbatim">
pgsql/bin/pg_ctl&#x00A0;stop&#x00A0;-D&#x00A0;mydbname
</div>
<!--l. 128--><p class="nopar" >
   <h5 class="subsubsectionHead"><a 
 id="x1-120002.3"></a>Remark</h5>
<!--l. 134--><p class="noindent" >Since Postgres and MayBMS use the same process identifiers, MayBMS and
Postgres cannot run concurrently on the same machine. If you start Postgres when
MayBMS is already running (or vice versa), there will be an error message stating
that Postgres is already running. Since MayBMS always identifies itself
as Postgres, standard Postgres applications and middleware can run on
MayBMS.
                                                                          

                                                                          
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;3</span><br /><a 
 id="x1-130003"></a>Probabilistic Databases</h2>
<!--l. 145--><p class="noindent" >We first give an informal definition of probabilistic databases, followed by a formal
definition.
   <h3 class="sectionHead"><span class="titlemark">3.1   </span> <a 
 id="x1-140003.1"></a>Informal Definition</h3>
<!--l. 154--><p class="noindent" >Given a relational database schema (i.e., the structural information usually
specified by SQL CREATE TABLE statements). A probabilistic database is a
finite set of <span 
class="cmti-12">possible worlds</span>, where each possible world has a weight greater than 0
but no greater than 1 such that the sum of the weights of all the worlds is one.
Each possible world is a relational database over the given schema. That is, the
schema is common to all possible worlds.
<!--l. 163--><p class="indent" >   Possible worlds are a means of expressing uncertainty.
      <ul class="itemize1">
      <li class="itemize">In a frequentist interpretation, the probabilistic database represents the
      possible outcomes of a random experiment, the outcomes of which are
      relational databases (or can be conveniently represented as relational
      databases). The probability weight of a possible world is (the limit of)
      the relative frequency of that possible world occurring as outcome of
      the random experiment over a large number of trials.
      </li>
      <li class="itemize">In a Bayesian interpretation, one of the possible worlds is &#8220;true&#8221;, but
      we do not know which one, and the probabilities represent degrees of
      belief in the various possible worlds.</li></ul>
<!--l. 179--><p class="indent" >   Note that these interpretations of probabilistic databases are completely
standard in probability theory (and formalized via the notion of <span 
class="cmti-12">probability</span>
<span 
class="cmti-12">spaces</span>). The only aspect particular to probabilistic databases is the fact that
possible worlds are relational databases.
<!--l. 184--><p class="indent" >   Note that the idea of a probabilistic database as a set of possible worlds is only
the conceptual model. The physical representation of the set of possible worlds in
the MayBMS system is quite different (see Section&#x00A0;<a 
href="#x1-270005.4">5.4<!--tex4ht:ref: sect:representation --></a>) and allows for the efficient
and space-saving (compressed) representation of very large sets of possible
worlds.
                                                                          

                                                                          
<!--l. 192--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">3.2   </span> <a 
 id="x1-150003.2"></a>Formal Definition</h3>
<!--l. 195--><p class="noindent" >The following is a standard definition from probability theory and shall only be
recalled to demonstrate the close connection of probabilistic databases to classical
concepts in mathematics.
   <div class="newtheorem">
<!--l. 200--><p class="noindent" ><span class="head">
<span 
class="cmbx-12">Definition</span><span 
class="cmbx-12">&#x00A0;3.2.1</span> </span>A <span 
class="cmti-12">finite probability space </span>is a triple (&#x03A9;<span 
class="cmmi-12">,</span><span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-46.png" alt="F" class="10-120x-x-46" /></span><span 
class="cmmi-12">,</span> Pr) where
      <ul class="itemize1">
      <li class="itemize">&#x03A9; is a finite set called the <span 
class="cmti-12">sample space</span>,
      </li>
      <li class="itemize"><span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-46.png" alt="F" class="10-120x-x-46" /> </span>= 2<sup><span 
class="cmr-8">&#x03A9;</span></sup> is the set of subsets of &#x03A9; (these subsets are called <span 
class="cmti-12">events</span>; the
      one-element subsets <span 
class="cmsy-10x-x-120">{</span><span 
class="cmmi-12">&#x03C9;</span><span 
class="cmsy-10x-x-120">} </span>are called atomic events), and
      </li>
      <li class="itemize">Pr is a <span 
class="cmti-12">probability measure</span>, i.e., a function that maps each element
      <span 
class="cmmi-12">&#x03C9; </span><span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span>&#x03A9; (i.e., each atomic event) to a number between 0 and 1 such that
      <center class="math-display" >
      <img 
src="manual0x.png" alt="&#x2211;
    Pr[&#x03C9;] = 1

&#x03C9;&#x2208;&#x03A9;
      " class="math-display" ></center>
      <!--l. 217--><p class="nopar" > and that maps each (nonatomic) event <span 
class="cmmi-12">E </span><span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span>(<span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-46.png" alt="F" class="10-120x-x-46" />\ </span>&#x03A9;) to <span 
class="cmex-10x-x-120">&#x2211;</span>
  <sub><span 
class="cmmi-8">&#x03C9;</span><span 
class="cmsy-8"><img 
src="cmsy8-32.png" alt="&#x2208;" class="8x-x-32" /></span><span 
class="cmmi-8">E</span></sub><span 
class="cmmi-12">Pr</span>[<span 
class="cmmi-12">&#x03C9;</span>].
                                                                         <span 
class="lasy-10x-x-120">&#x25A1;</span></li></ul>
</div>
<!--l. 226--><p class="indent" >   Formally, a <span 
class="cmti-12">probabilistic database </span>over a relational database schema <span 
class="cmmi-12">sch </span>is a
finite probability space (&#x03A9;<span 
class="cmmi-12">,</span><span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-46.png" alt="F" class="10-120x-x-46" /> </span>= 2<sup><span 
class="cmr-8">&#x03A9;</span></sup><span 
class="cmmi-12">,</span> Pr) with an associated function <span 
class="cmmi-12">I </span>(for
<span 
class="cmti-12">instance</span>) that maps each <span 
class="cmmi-12">&#x03C9; </span><span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span>&#x03A9; to a relational database over schema
<span 
class="cmmi-12">sch</span>.
                                                                          

                                                                          
<!--l. 233--><p class="indent" >   We call the elements <span 
class="cmmi-12">&#x03C9; </span>of &#x03A9; the <span 
class="cmti-12">possible worlds </span>of the probabilistic
database.
<!--l. 236--><p class="indent" >   We can identify events with Boolean queries <span 
class="cmmi-12">Q </span>that are true on a subset of &#x03A9;.
Of course, the probability of such an event is given by
   <center class="math-display" >
<img 
src="manual1x.png" alt="               &#x2211;
Pr [Q ] =                Pr[&#x03C9;].
         &#x03C9;&#x2208;&#x03A9; :Q(I(&#x03C9;))=true
" class="math-display" ></center>
<!--l. 240--><p class="nopar" >
<!--l. 242--><p class="indent" >   One particular type of event is membership of a given tuple <img 
src="manual2x.png" alt="&#x20D7;t"  class="vec" > in the result of a
(nonboolean) query, i.e., an event
   <center class="math-display" >
<img 
src="manual3x.png" alt="{&#x03C9;  &#x2208; &#x03A9;  : &#x20D7;t &#x2208; Q (I(&#x03C9;))}.
" class="math-display" ></center>
<!--l. 246--><p class="nopar" > The probability of this event is called the <span 
class="cmti-12">tuple confidence </span>for tuple <img 
src="manual4x.png" alt="&#x20D7;t"  class="vec" > .
<!--l. 251--><p class="indent" >   A <span 
class="cmti-12">random variable </span><span 
class="cmmi-12">X </span>is a function from &#x03A9; to a set <span 
class="cmmi-12">D </span>(the &#8220;values&#8221; of the
random variable). We can associate each expression <span 
class="cmmi-12">X </span>= <span 
class="cmmi-12">x</span>, where <span 
class="cmmi-12">x </span><span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span><span 
class="cmmi-12">D</span>, with an
event
   <center class="math-display" >
<img 
src="manual5x.png" alt="{&#x03C9; &#x2208; &#x03A9;  | X (&#x03C9;) = x}.
" class="math-display" ></center>
<!--l. 256--><p class="nopar" > Again, this is the usual notion from probability theory.
<!--l. 260--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">3.3   </span> <a 
 id="x1-160003.3"></a>An Example</h3>
<!--l. 263--><p class="noindent" >Consider a finite probability space with
   <center class="math-display" >
<img 
src="manual6x.png" alt="&#x03A9; = {&#x03C9;rain,wet,&#x03C9;¬rain,wet,&#x03C9;rain,¬wet,&#x03C9; ¬rain,¬wet}
" class="math-display" ></center>
<!--l. 271--><p class="nopar" > and Pr[<span 
class="cmmi-12">&#x03C9;</span><sub><span 
class="cmmi-8">rain,wet</span></sub>] = 0<span 
class="cmmi-12">.</span>35, Pr[<span 
class="cmmi-12">&#x03C9;</span><sub><span 
class="cmmi-8">rain,</span><span 
class="cmsy-8">¬</span><span 
class="cmmi-8">wet</span></sub>] = 0<span 
class="cmmi-12">.</span>05, Pr[<span 
class="cmmi-12">&#x03C9;</span><sub><span 
class="cmsy-8">¬</span><span 
class="cmmi-8">rain,wet</span></sub>] = 0<span 
class="cmmi-12">.</span>1, and
Pr[<span 
class="cmmi-12">&#x03C9;</span><sub><span 
class="cmsy-8">¬</span><span 
class="cmmi-8">rain,</span><span 
class="cmsy-8">¬</span><span 
class="cmmi-8">wet</span></sub>] = 0<span 
class="cmmi-12">.</span>5.
<!--l. 278--><p class="indent" >   Let <span 
class="cmmi-12">Wet </span>be the event <span 
class="cmsy-10x-x-120">{</span><span 
class="cmmi-12">&#x03C9;</span><sub><span 
class="cmmi-8">rain,wet</span></sub><span 
class="cmmi-12">,&#x03C9;</span><sub><span 
class="cmsy-8">¬</span><span 
class="cmmi-8">rain,wet</span></sub><span 
class="cmsy-10x-x-120">}</span>. Then Pr[<span 
class="cmmi-12">Wet</span>] = 0<span 
class="cmmi-12">.</span>35 + 0<span 
class="cmmi-12">.</span>1 = 0<span 
class="cmmi-12">.</span>45.
We define Boolean random variables Wet and Rain as follows:
   <center class="math-display" >
<img 
src="manual7x.png" alt="W et = {&#x03C9;rain,wet &#x21A6;&#x2192; true, &#x03C9;¬rain,wet &#x21A6;&#x2192; true,&#x03C9;rain,¬wet &#x21A6;&#x2192; f alse,&#x03C9;¬rain,¬wet &#x21A6;&#x2192; false};
" class="math-display" ></center>
<!--l. 289--><p class="nopar" >
   <center class="math-display" >
<img 
src="manual8x.png" alt="Rain  = {&#x03C9;rain,wet &#x21A6;&#x2192; true,&#x03C9; ¬rain,wet &#x21A6;&#x2192;  false,&#x03C9;rain,¬wet &#x21A6;&#x2192; true, &#x03C9;¬rain,¬wet &#x21A6;&#x2192; false}.
" class="math-display" ></center>
<!--l. 296--><p class="nopar" > Then, Pr[<span 
class="cmmi-12">Wet </span>= <span 
class="cmmi-12">true</span>] is again 0<span 
class="cmmi-12">.</span>45.
<!--l. 299--><p class="indent" >   The first example of the following tutorial chapter captures this example in the
framework of the MayBMS query and update language.
                                                                          

                                                                          
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;4</span><br /><a 
 id="x1-170004"></a>Tutorial</h2>
<!--l. 306--><p class="noindent" >This tutorial introduces the main features of MayBMS in an informal way. The
full examples can be run using the psql command line interface.
   <h3 class="sectionHead"><span class="titlemark">4.1   </span> <a 
 id="x1-180004.1"></a>A Really Simple Example</h3>
<!--l. 314--><p class="noindent" >We start by creating a simple table using SQL commands. The table encodes
that we see rain and wet ground with probability 0.4, no rain but wet
ground with probability 0.1, and no rain and dry ground with probability
0.5.
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;R&#x00A0;(Dummy&#x00A0;varchar,&#x00A0;Weather&#x00A0;varchar,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Ground&#x00A0;varchar,&#x00A0;P&#x00A0;float);
&#x00A0;<br />insert&#x00A0;into&#x00A0;R&#x00A0;values&#x00A0;(&#8217;dummy&#8217;,&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#8217;rain&#8217;,&#x00A0;&#8217;wet&#8217;,&#x00A0;0.35);
&#x00A0;<br />insert&#x00A0;into&#x00A0;R&#x00A0;values&#x00A0;(&#8217;dummy&#8217;,&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#8217;rain&#8217;,&#x00A0;&#8217;dry&#8217;,&#x00A0;0.05);
&#x00A0;<br />insert&#x00A0;into&#x00A0;R&#x00A0;values&#x00A0;(&#8217;dummy&#8217;,&#x00A0;&#8217;no&#x00A0;rain&#8217;,&#x00A0;&#8217;wet&#8217;,&#x00A0;0.1);
&#x00A0;<br />insert&#x00A0;into&#x00A0;R&#x00A0;values&#x00A0;(&#8217;dummy&#8217;,&#x00A0;&#8217;no&#x00A0;rain&#8217;,&#x00A0;&#8217;dry&#8217;,&#x00A0;0.5);
&#x00A0;<br />
&#x00A0;<br />select&#x00A0;*&#x00A0;from&#x00A0;R;
&#x00A0;<br />&#x00A0;dummy&#x00A0;|&#x00A0;weather&#x00A0;|&#x00A0;ground&#x00A0;|&#x00A0;&#x00A0;p
&#x00A0;<br />-------+---------+--------+------
&#x00A0;<br />&#x00A0;dummy&#x00A0;|&#x00A0;rain&#x00A0;&#x00A0;&#x00A0;&#x00A0;|&#x00A0;wet&#x00A0;&#x00A0;&#x00A0;&#x00A0;|&#x00A0;0.35
&#x00A0;<br />&#x00A0;dummy&#x00A0;|&#x00A0;rain&#x00A0;&#x00A0;&#x00A0;&#x00A0;|&#x00A0;dry&#x00A0;&#x00A0;&#x00A0;&#x00A0;|&#x00A0;0.05
&#x00A0;<br />&#x00A0;dummy&#x00A0;|&#x00A0;no&#x00A0;rain&#x00A0;|&#x00A0;wet&#x00A0;&#x00A0;&#x00A0;&#x00A0;|&#x00A0;0.1
&#x00A0;<br />&#x00A0;dummy&#x00A0;|&#x00A0;no&#x00A0;rain&#x00A0;|&#x00A0;dry&#x00A0;&#x00A0;&#x00A0;&#x00A0;|&#x00A0;0.5
&#x00A0;<br />(4&#x00A0;rows)
</div>
<!--l. 335--><p class="nopar" >
<!--l. 337--><p class="indent" >   Table R is a completely standard relational database table, created using
standard SQL statement. One of the columns, P, stores probabilities, but to
the system these are only numbers without any particular meaning so
far.
<!--l. 342--><p class="indent" >   The following statement creates a probabilistic database table S:
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;S&#x00A0;as
&#x00A0;<br />repair&#x00A0;key&#x00A0;Dummy&#x00A0;in&#x00A0;R&#x00A0;weight&#x00A0;by&#x00A0;P;
</div>
<!--l. 347--><p class="nopar" >
<!--l. 349--><p class="indent" >   The repair-key statement is one of the extensions of the MayBMS query
language over standard SQL, and it associates a special meaning to the values
taken from the &#8220;weight by&#8221; column.
<!--l. 353--><p class="indent" >   The statement creates a probability space with a sample space consisting of
three possible databases &#8211; each one consisting just of one tuple from <span 
class="cmmi-12">R </span>&#8211; with an
associated probability measure given by the P column.
<!--l. 357--><p class="indent" >   There are at least two natural interpretations of this example, one using
random variables and one using a possible worlds semantics.
      <ul class="itemize1">
      <li class="itemize">We can think of S as a table specifying the joint probability distribution
      of two discrete random variables Weather (with values &#8220;rain&#8221; and &#8220;no
      rain&#8221;) and Ground (with values &#8220;wet&#8221; and &#8220;dry&#8221;).
      </li>
      <li class="itemize">Alternatively, there are three possible worlds. Each of these worlds is a
      relation S with a single tuple from R. The probability of such a world
      is the value given for the tuple in column P of R.</li></ul>
<!--l. 372--><p class="indent" >   We can compute the probabilities Pr[Ground=&#8217;wet&#8217;] and Pr[Weather=&#8217;rain&#8217;
and Ground=&#8217;wet&#8217;] as follows using the MayBMS conf() aggregate (which stands
for &#8220;confidence&#8221;).
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;Wet&#x00A0;as
&#x00A0;<br />select&#x00A0;conf()&#x00A0;as&#x00A0;P&#x00A0;from&#x00A0;S&#x00A0;where&#x00A0;Ground&#x00A0;=&#x00A0;&#8217;wet&#8217;;
&#x00A0;<br />
&#x00A0;<br />select&#x00A0;*&#x00A0;from&#x00A0;Wet;
&#x00A0;<br />&#x00A0;&#x00A0;p
&#x00A0;<br />------
&#x00A0;<br />&#x00A0;0.45
&#x00A0;<br />(1&#x00A0;row)
&#x00A0;<br />
&#x00A0;<br />create&#x00A0;table&#x00A0;Rain_and_Wet&#x00A0;as
&#x00A0;<br />select&#x00A0;conf()&#x00A0;as&#x00A0;P&#x00A0;from&#x00A0;S
&#x00A0;<br />where&#x00A0;Weather&#x00A0;=&#x00A0;&#8217;rain&#8217;&#x00A0;and&#x00A0;Ground&#x00A0;=&#x00A0;&#8217;wet&#8217;;
&#x00A0;<br />
&#x00A0;<br />select&#x00A0;*&#x00A0;from&#x00A0;Rain_and_Wet;
&#x00A0;<br />&#x00A0;&#x00A0;p
&#x00A0;<br />------
&#x00A0;<br />&#x00A0;0.35
&#x00A0;<br />(1&#x00A0;row)
</div>
<!--l. 395--><p class="nopar" >
<!--l. 397--><p class="indent" >   The conditional probability Pr[Weather=&#8217;rain&#8217; <span 
class="cmsy-10x-x-120">| </span>Ground=&#8217;wet&#8217;] can be
computed as the ratio
   <center class="math-display" >
<img 
src="manual9x.png" alt="Pr[Weather=  &#8217;rain&#8217; and Ground=  &#8217;wet&#8217;] / Pr[Ground= &#8217;wet&#8217;].
" class="math-display" ></center>
<!--l. 401--><p class="nopar" >
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;R1.P/R2.P&#x00A0;as&#x00A0;Rain_if_Wet&#x00A0;from&#x00A0;Rain_and_Wet&#x00A0;R1,&#x00A0;Wet&#x00A0;R2;
&#x00A0;<br />&#x00A0;rain_if_wet
&#x00A0;<br />-------------
&#x00A0;<br />&#x00A0;0.777777778
&#x00A0;<br />(1&#x00A0;row)
</div>
<!--l. 409--><p class="nopar" >
<!--l. 411--><p class="indent" >   Since conf() is an aggregate, we can compute the marginal probability table for
random variable Ground as
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;Ground,&#x00A0;conf()&#x00A0;from&#x00A0;S&#x00A0;group&#x00A0;by&#x00A0;Ground;
&#x00A0;<br />&#x00A0;ground&#x00A0;|&#x00A0;conf
&#x00A0;<br />--------+------
&#x00A0;<br />&#x00A0;dry&#x00A0;&#x00A0;&#x00A0;&#x00A0;|&#x00A0;&#x00A0;0.55
&#x00A0;<br />&#x00A0;wet&#x00A0;&#x00A0;&#x00A0;&#x00A0;|&#x00A0;&#x00A0;0.45
&#x00A0;<br />(2&#x00A0;rows)
</div>
<!--l. 420--><p class="nopar" >
<!--l. 423--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">4.2   </span> <a 
 id="x1-190004.2"></a>Example: Triangles in Random Graphs</h3>
<!--l. 426--><p class="noindent" >In this tutorial, we compute the probability that a triangle occurs in a random
graph with <span 
class="cmmi-12">k </span>named (and thus distinguishable) nodes. That is, we ask for the
probability that an undirected graph, chosen uniformly at random among the
graphs of <span 
class="cmmi-12">k </span>nodes, contains at least one triangle. This is equivalent to
computing the count <span 
class="cmmi-12">n </span>of graphs that contain a triangle among the 2<sup><span 
class="cmmi-8">k</span><span 
class="cmsy-8">&#x22C5;</span><span 
class="cmr-8">(</span><span 
class="cmmi-8">k</span><span 
class="cmsy-8">-</span><span 
class="cmr-8">1)</span><span 
class="cmmi-8">&#x2215;</span><span 
class="cmr-8">2</span></sup>
undirected graphs of <span 
class="cmmi-12">k </span>distinguished nodes. Indeed, an undirected graph of
<span 
class="cmmi-12">k </span>nodes has at most <span 
class="cmmi-12">k </span><span 
class="cmsy-10x-x-120">&#x22C5; </span>(<span 
class="cmmi-12">k </span><span 
class="cmsy-10x-x-120">- </span>1)<span 
class="cmmi-12">&#x2215;</span>2 edges, and we obtain all the graphs
over the given <span 
class="cmmi-12">k </span>nodes by considering all subsets of this maximal set of
edges.
<!--l. 440--><p class="indent" >   We start by creating a unary &#8220;node&#8221; relation, say with five nodes. We do this
with the standard SQL &#8220;create table&#8221; and &#8220;insert&#8221; commands, which behave as
usual in a relational database system.
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;node&#x00A0;(n&#x00A0;integer);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;node&#x00A0;values&#x00A0;(1);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;node&#x00A0;values&#x00A0;(2);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;node&#x00A0;values&#x00A0;(3);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;node&#x00A0;values&#x00A0;(4);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;node&#x00A0;values&#x00A0;(5);
</div>
<!--l. 451--><p class="nopar" >
<!--l. 453--><p class="indent" >   Next we create the total order over the nodes, i.e., a binary relation with
exactly one edge between any two nodes. This is again a standard SQL &#8220;create
table&#8221; statement where we compute the tuples to be inserted with a standard
SQL query over the &#8220;node&#8221; relation.
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;total_order&#x00A0;as
&#x00A0;<br />(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;select&#x00A0;n1.n&#x00A0;as&#x00A0;u,&#x00A0;n2.n&#x00A0;as&#x00A0;v
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;from&#x00A0;node&#x00A0;n1,&#x00A0;node&#x00A0;n2
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;where&#x00A0;n1.n&#x00A0;&#x003C;&#x00A0;n2.n
&#x00A0;<br />);
</div>
<!--l. 465--><p class="nopar" >
<!--l. 467--><p class="indent" >   We create a table to represent that each edge is either in the graph (bit=1) or
missing (bit=0).
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;inout&#x00A0;(bit&#x00A0;integer);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;inout&#x00A0;values&#x00A0;(1);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;inout&#x00A0;values&#x00A0;(0);
</div>
<!--l. 474--><p class="nopar" >
<!--l. 476--><p class="indent" >   The following operation introduces uncertainty into the database and creates a
probabilistic database with 2<sup><span 
class="cmr-8">5</span><span 
class="cmsy-8">&#x22C5;</span><span 
class="cmr-8">4</span><span 
class="cmmi-8">&#x2215;</span><span 
class="cmr-8">2</span></sup> = 1024 possible worlds, one for each possible
edge relation over the five nodes (=subset of the total order). We do this
by a query operation &#8220;repair key&#8221; that for each edge of the total order
nondeterministically chooses whether the edge is in the graph (bit=1) or
not. (That is, since we do not indicate at what probability either of the
two alternatives for bit is to be chosen, the system makes the decision
<span 
class="cmti-12">uniformly </span>at random, choosing bit=1 with probability 0.5.) The resulting
probabilistic database represents all the alternative edge relations as possible
worlds.
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;to_subset&#x00A0;as
&#x00A0;<br />(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;repair&#x00A0;key&#x00A0;u,v&#x00A0;in&#x00A0;(select&#x00A0;*&#x00A0;from&#x00A0;total_order,&#x00A0;inout)
&#x00A0;<br />);
</div>
<!--l. 493--><p class="nopar" >
<!--l. 495--><p class="indent" >   The &#8220;repair key&#8221; operation is the most difficult to understand and
at the same time the most interesting addition to SQL that MayBMS
provides. Conceptually, &#8220;repair key&#8221; takes a set of attributes <img 
src="manual10x.png" alt="&#x20D7;K"  class="vec" > and a
relation <span 
class="cmmi-12">R </span>(in this case the relational product of total_order and inout) as
arguments and nondeterministically chooses a maximal repair of key <img 
src="manual11x.png" alt="K&#x20D7;"  class="vec" >
in <span 
class="cmmi-12">R</span>, that is, it removes a minimal set of tuples from <span 
class="cmmi-12">R </span>such that <img 
src="manual12x.png" alt="K&#x20D7;"  class="vec" >
ceases to violate a key constraint on columns <span 
class="cmmi-12">u,v</span>. In this case, there
are exactly two tuples for each pair (<span 
class="cmmi-12">u,v</span>), namely (<span 
class="cmmi-12">u,v, </span>1) and (<span 
class="cmmi-12">u,v, </span>0),
and repair key chooses exactly one of them. The consequence is that,
overall, the operation nondeterministically chooses a subset of the set
of all edges. It chooses from these subsets uniformly. The &#8220;repair key&#8221;
operation accepts an additional argument that allows us to assign nonuniform
probabilities to the possible choices, but in this case we do want uniform
probabilities.
<!--l. 511--><p class="indent" >   We have now created a probabilistic database. Conceptually, queries and
updates are evaluated in all possible worlds in parallel. Viewed differently, there is
only one to_subset relation (but we do not know which one), and we continue to
run queries and updates on this uncertain relation.
<!--l. 515--><p class="indent" >   To actually create the edge relation, we select those tuples that have bit=1
and compute their symmetric closure (to really represent an undirected
graph).
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;edge0&#x00A0;&#x00A0;&#x00A0;&#x00A0;as&#x00A0;(select&#x00A0;u,v&#x00A0;from&#x00A0;to_subset&#x00A0;where&#x00A0;bit=1);
&#x00A0;<br />
&#x00A0;<br />create&#x00A0;table&#x00A0;edge&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;as&#x00A0;(select&#x00A0;*&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;from&#x00A0;edge0);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;edge&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(select&#x00A0;v&#x00A0;as&#x00A0;u,&#x00A0;u&#x00A0;as&#x00A0;v&#x00A0;from&#x00A0;edge0);
</div>
<!--l. 524--><p class="nopar" >
<!--l. 526--><p class="indent" >   Now we can compute the probability that the chosen graph has a triangle
as
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;conf()&#x00A0;as&#x00A0;triangle_prob
&#x00A0;<br />from&#x00A0;&#x00A0;&#x00A0;edge&#x00A0;e1,&#x00A0;edge&#x00A0;e2,&#x00A0;edge&#x00A0;e3
&#x00A0;<br />where&#x00A0;&#x00A0;e1.v&#x00A0;=&#x00A0;e2.u&#x00A0;and&#x00A0;e2.v&#x00A0;=&#x00A0;e3.u&#x00A0;and&#x00A0;e3.v=e1.u
&#x00A0;<br />and&#x00A0;&#x00A0;&#x00A0;&#x00A0;e1.u&#x00A0;&#x003C;&#x003E;&#x00A0;e2.u&#x00A0;and&#x00A0;e1.u&#x00A0;&#x003C;&#x003E;&#x00A0;e3.u&#x00A0;and&#x00A0;e2.u&#x00A0;&#x003C;&#x003E;&#x00A0;e3.u;
</div>
<!--l. 534--><p class="nopar" > where the conf aggregate computes the probability (&#8220;confidence&#8221;) that the query
given by the from-where statement returns a nonempty result. This results
in
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;triangle_prob
&#x00A0;<br />---------------
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;0.623355
&#x00A0;<br />(1&#x00A0;row)
</div>
<!--l. 544--><p class="nopar" >
<!--l. 546--><p class="indent" >   This is the correct probability: out of the 1024 possible graphs of five nodes,
636 have a triangle, and 636<span 
class="cmmi-12">&#x2215;</span>1024 <span 
class="cmsy-10x-x-120">&#x2248; </span><span 
class="cmmi-12">.</span>623355. Indeed, the query
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;*
&#x00A0;<br />from&#x00A0;&#x00A0;&#x00A0;edge&#x00A0;e1,&#x00A0;edge&#x00A0;e2,&#x00A0;edge&#x00A0;e3
&#x00A0;<br />where&#x00A0;&#x00A0;e1.v&#x00A0;=&#x00A0;e2.u&#x00A0;and&#x00A0;e2.v&#x00A0;=&#x00A0;e3.u&#x00A0;and&#x00A0;e3.v=e1.u
&#x00A0;<br />and&#x00A0;&#x00A0;&#x00A0;&#x00A0;e1.u&#x00A0;&#x003C;&#x003E;&#x00A0;e2.u&#x00A0;and&#x00A0;e1.u&#x00A0;&#x003C;&#x003E;&#x00A0;e3.u&#x00A0;and&#x00A0;e2.u&#x00A0;&#x003C;&#x003E;&#x00A0;e3.u;
</div>
<!--l. 555--><p class="nopar" > computes at least one tuple in exactly those possible worlds (=on those
graphs) that have a triangle. The conf() aggregate applied to this query
conceptually computes the sum of the probability weights of the worlds
in which the query has a nonempty result. (The actual implementation
does not naively iterate over possible worlds, because this would be very
inefficient.)
<!--l. 565--><p class="indent" >   A more efficient implementation of the same query starts from the &#8220;edge0&#8221;
relation:
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;conf()&#x00A0;as&#x00A0;triangle_prob
&#x00A0;<br />from&#x00A0;&#x00A0;&#x00A0;edge0&#x00A0;e1,&#x00A0;edge0&#x00A0;e2,&#x00A0;edge0&#x00A0;e3
&#x00A0;<br />where&#x00A0;&#x00A0;e1.v&#x00A0;=&#x00A0;e2.u&#x00A0;and&#x00A0;e2.v&#x00A0;=&#x00A0;e3.v&#x00A0;and&#x00A0;e1.u&#x00A0;=&#x00A0;e3.u
&#x00A0;<br />and&#x00A0;&#x00A0;&#x00A0;&#x00A0;e1.u&#x00A0;&#x003C;&#x00A0;e2.u&#x00A0;and&#x00A0;e2.u&#x00A0;&#x003C;&#x00A0;e3.v;
</div>
<!--l. 573--><p class="nopar" >
<!--l. 575--><p class="indent" >   Finally, an even more efficient implementation uses the aconf(<span 
class="cmmi-12">&#x03F5;,&#x03B4;</span>) aggregate to
compute an (<span 
class="cmmi-12">&#x03F5;,&#x03B4;</span>)-approximation of the probability, i.e., the probability that the
computed value <img 
src="manual13x.png" alt="p&#x02C6;"  class="circ" > returned by aconf deviates from the correct probability <span 
class="cmmi-12">p </span>by
more than <span 
class="cmmi-12">&#x03F5; </span><span 
class="cmsy-10x-x-120">&#x22C5; </span><span 
class="cmmi-12">p </span>is less than <span 
class="cmmi-12">&#x03B4;</span>.
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;aconf(.05,.05)&#x00A0;as&#x00A0;triangle_prob
&#x00A0;<br />from&#x00A0;&#x00A0;&#x00A0;edge0&#x00A0;e1,&#x00A0;edge0&#x00A0;e2,&#x00A0;edge0&#x00A0;e3
&#x00A0;<br />where&#x00A0;&#x00A0;e1.v&#x00A0;=&#x00A0;e2.u&#x00A0;and&#x00A0;e2.v&#x00A0;=&#x00A0;e3.v&#x00A0;and&#x00A0;e1.u&#x00A0;=&#x00A0;e3.u
&#x00A0;<br />and&#x00A0;&#x00A0;&#x00A0;&#x00A0;e1.u&#x00A0;&#x003C;&#x00A0;e2.u&#x00A0;and&#x00A0;e2.u&#x00A0;&#x003C;&#x00A0;e3.v;
</div>
<!--l. 587--><p class="nopar" >
<!--l. 589--><p class="indent" >   This result may be somewhat off, but the probability that the error is greater
than 5% is less than 5%.
<!--l. 593--><p class="indent" >   Note that in the example we have seen only two extensions of SQL, &#8220;repair
key&#8221; and &#8220;[a]conf&#8221;. The good news is that this is essentially all there is.
SQL extended by just these two features allows for very powerful queries,
including the computation of conditional probability tables, maximum
likelihood estimates, maximum-a-posteriori, Bayesian learning, and much
more.
<!--l. 601--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">4.3   </span> <a 
 id="x1-200004.3"></a>Example: Skills Management</h3>
<!--l. 604--><p class="noindent" >The following example demonstrates that probabilistic databases can be useful
even if the input data is not uncertain and the desired result is a classical
relational table. We define a hypothetical query in the context of skills
management. Assume we are given a classical relational database with two tables,
one, CE, stores possible takeover targets &#8211; companies that we might decide to buy
with the employees that work in these companies. The second table, ES, stores
each employee&#8217;s skills.
<!--l. 612--><p class="indent" >   Here is an example database. We can build this database in MayBMS with the
standard SQL &#8220;create table&#8221; and &#8220;insert&#8221; statements.
   <center class="par-math-display" >
<img 
src="manual14x.png" alt="                          |
     |                ES  EID   Skill
-CE--|CID-----EID--- -----|-------------
     |Google  Bob         Bob   Web
     |                    Joe   Web
     |Google  Joe         Dan   Java
     |Yahoo   Dan         |
     |Yahoo   Bill        Dan   Web
     |                    Bill  Search
     |Yahoo   Fred        Fred  Java
" class="par-math-display" ></center>
<!--l. 636--><p class="nopar" >
<!--l. 639--><p class="indent" >   Now suppose that we want to buy exactly one of those companies, and we
expect exactly one employee to leave as a result of the takeover. Which skills can
we gain for certain?
<!--l. 643--><p class="indent" >   We express this query in two steps. First we randomly choose a company to
buy and an employee who leaves, and compute the remaining employees in
the chosen company. We obtain this uncertain table using the following
query:
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;RemainingEmployees&#x00A0;as
&#x00A0;<br />select&#x00A0;CE.cid,&#x00A0;CE.eid
&#x00A0;<br />from&#x00A0;&#x00A0;&#x00A0;CE,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(repair&#x00A0;key&#x00A0;dummy
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;in&#x00A0;(select&#x00A0;1&#x00A0;as&#x00A0;dummy,&#x00A0;*&#x00A0;from&#x00A0;CE))&#x00A0;Choice
&#x00A0;<br />where&#x00A0;&#x00A0;CE.cid&#x00A0;=&#x00A0;&#x00A0;Choice.cid
&#x00A0;<br />and&#x00A0;&#x00A0;&#x00A0;&#x00A0;CE.eid&#x00A0;&#x003C;&#x003E;&#x00A0;Choice.eid;
</div>
<!--l. 656--><p class="nopar" >
<!--l. 658--><p class="indent" >   Note that the probabilistic database thus created contains five possible worlds
(since there are five tuples in CE), with a uniform probability distribution.
Not all these worlds have the same number of tuples: If we chose Google
and Bob, the world contains one tuple, Google and Joe. If we choose
Yahoo and Dan, the world contains two tuples, (Yahoo, Bill) and (Yahoo,
Fred).
<!--l. 664--><p class="indent" >   Now we compute which skills we gain for certain:
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;SkillGained&#x00A0;as
&#x00A0;<br />select&#x00A0;Q1.cid,&#x00A0;Q1.skill,&#x00A0;p1,&#x00A0;p2,&#x00A0;p1/p2&#x00A0;as&#x00A0;p
&#x00A0;<br />from&#x00A0;(select&#x00A0;&#x00A0;&#x00A0;R.cid,&#x00A0;ES.skill,&#x00A0;conf()&#x00A0;as&#x00A0;p1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;from&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;RemainingEmployees&#x00A0;R,&#x00A0;ES
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;where&#x00A0;&#x00A0;&#x00A0;&#x00A0;R.eid&#x00A0;=&#x00A0;ES.eid
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;group&#x00A0;by&#x00A0;R.cid,&#x00A0;ES.skill)&#x00A0;Q1,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(select&#x00A0;cid,&#x00A0;conf()&#x00A0;as&#x00A0;p2
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;from&#x00A0;RemainingEmployees
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;group&#x00A0;by&#x00A0;cid)&#x00A0;Q2
&#x00A0;<br />where&#x00A0;Q1.cid&#x00A0;=&#x00A0;Q2.cid;
&#x00A0;<br />
&#x00A0;<br />select&#x00A0;cid,&#x00A0;skill&#x00A0;from&#x00A0;SkillGained&#x00A0;where&#x00A0;p=1;
</div>
<!--l. 678--><p class="nopar" >
<!--l. 680--><p class="indent" >   The result is the table
<div class="center" 
>
<!--l. 681--><p class="noindent" >
<div class="tabular"> <table id="TBL-2" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1"><col 
id="TBL-2-2"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-1"  
class="td11"> CID    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-2"  
class="td11"> Skill  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-1"  
class="td11"> Google  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-2"  
class="td11"> Web  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-1"  
class="td11"> Yahoo  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-2"  
class="td11"> Java  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-1"  
class="td11">        </td>
</tr></table></div></div>
<!--l. 689--><p class="noindent" >indicating that if we buy Google, we gain the skill &#8220;Web&#8221; for certain, and if we buy
Yahoo, we gain the skill &#8220;Java&#8221; for certain.
<!--l. 692--><p class="indent" >   It is worth looking at the auxiliary table SkillGained:
<div class="center" 
>
<!--l. 693--><p class="noindent" >
                                                                          

                                                                          
<div class="tabular"> <table id="TBL-3" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-3-1g"><col 
id="TBL-3-1"></colgroup><colgroup id="TBL-3-2g"><col 
id="TBL-3-2"><col 
id="TBL-3-3"><col 
id="TBL-3-4"><col 
id="TBL-3-5"><col 
id="TBL-3-6"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-3-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-1"  
class="td11"> SkillGained  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-2"  
class="td10"> CID    &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-3"  
class="td00">Skill   &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-4"  
class="td00">p1 &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-5"  
class="td00">p2 &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-6"  
class="td01">p    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-1"  
class="td11">            </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-2"  
class="td10"> Google&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-3"  
class="td00">Web   &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-4"  
class="td00">2/5&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-5"  
class="td00">2/5&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-6"  
class="td01">1     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-1"  
class="td11">            </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-2"  
class="td10"> Yahoo &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-3"  
class="td00">Java   &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-4"  
class="td00">3/5&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-5"  
class="td00">3/5&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-6"  
class="td01">1     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-1"  
class="td11">            </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-2"  
class="td10"> Yahoo &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-3"  
class="td00">Web   &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-4"  
class="td00">2/5&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-5"  
class="td00">3/5&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-6"  
class="td01">2/3  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-1"  
class="td11">            </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-2"  
class="td10"> Yahoo &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-3"  
class="td00">Search&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-4"  
class="td00">2/5&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-5"  
class="td00">3/5&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-6"  
class="td01">2/3  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-6-1"  
class="td11">            </td>
</tr></table></div></div>
<!--l. 704--><p class="indent" >   This table consists of the tuples (<span 
class="cmmi-12">x,y,p</span>1<span 
class="cmmi-12">,p</span>2<span 
class="cmmi-12">,p</span>) such that
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmmi-12">x </span>is a company,
      </li>
      <li class="itemize"><span 
class="cmmi-12">y </span>is a skill,
      </li>
      <li class="itemize"><span 
class="cmmi-12">p</span>1 is the probability that the chosen company is <span 
class="cmmi-12">x </span>and the skill <span 
class="cmmi-12">y </span>is
      gained (e.g., for <span 
class="cmmi-12">x</span>=Yahoo and <span 
class="cmmi-12">y</span>=Web, this is true in two of the five
      possible worlds),
      </li>
      <li class="itemize"><span 
class="cmmi-12">p</span>2 is the probability that <span 
class="cmmi-12">x </span>is the chosen company (e.g., for <span 
class="cmmi-12">x</span>=Yahoo,
      this is true in three of the five possible worlds), and
      </li>
      <li class="itemize"><span 
class="cmmi-12">p </span>= <span 
class="cmmi-12">p</span>1<span 
class="cmmi-12">&#x2215;p</span>2 is the probability that skill <span 
class="cmmi-12">y </span>is gained if company <span 
class="cmmi-12">x </span>is bought
      (e.g., for <span 
class="cmmi-12">x</span>=Yahoo and <span 
class="cmmi-12">y</span>=Web, the probability is 2/3: of the three
      possible worlds in which Yahoo was bought, only two worlds guarantee
      that the skill Web is gained).</li></ul>
<!--l. 728--><p class="indent" >   Thus, indeed, if we select those tuples of SkillGained for which <span 
class="cmmi-12">p </span>= 1, we
obtain the desired pairs of companies and skills &#8211; those skills that we obtain for
certain if we buy a company.
                                                                          

                                                                          
<!--l. 733--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">4.4   </span> <a 
 id="x1-210004.4"></a>Data Cleaning</h3>
<!--l. 736--><p class="noindent" >The following example is in the domain of data cleaning. Consider a census in
which a number of individuals complete forms, that are subsequently digitized
using an OCR system that will in some cases indicate a number of alternative
readings, together with probabilities. For simplicity, let us assume that the forms
only ask for a social security number (SSN).
<!--l. 743--><p class="indent" >   For example, if two individuals complete their forms and the OCR system
recognizes the SSN of the first to be either 185 (with probability .4) or
785 and the SSN of the second to be either 185 (with probability .7) or
186, we store this information in a probabilistic database constructed as
follows:
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;Census_SSN_0&#x00A0;(tid&#x00A0;integer,&#x00A0;ssn&#x00A0;integer,&#x00A0;p&#x00A0;float);
&#x00A0;<br />
&#x00A0;<br />insert&#x00A0;into&#x00A0;Census_SSN_0&#x00A0;values&#x00A0;(1,&#x00A0;185,&#x00A0;.4);
&#x00A0;<br />insert&#x00A0;into&#x00A0;Census_SSN_0&#x00A0;values&#x00A0;(1,&#x00A0;785,&#x00A0;.6);
&#x00A0;<br />insert&#x00A0;into&#x00A0;Census_SSN_0&#x00A0;values&#x00A0;(2,&#x00A0;185,&#x00A0;.7);
&#x00A0;<br />insert&#x00A0;into&#x00A0;Census_SSN_0&#x00A0;values&#x00A0;(2,&#x00A0;186,&#x00A0;.3);
&#x00A0;<br />
&#x00A0;<br />create&#x00A0;table&#x00A0;Census_SSN&#x00A0;as
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;repair&#x00A0;key&#x00A0;tid&#x00A0;in&#x00A0;Census_SSN_0&#x00A0;weight&#x00A0;by&#x00A0;p;
</div>
<!--l. 759--><p class="nopar" >
<!--l. 761--><p class="indent" >   We can view the alternatives and their probability weights by the following
query:
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;&#x00A0;&#x00A0;tid,&#x00A0;ssn,&#x00A0;conf()&#x00A0;as&#x00A0;prior
&#x00A0;<br />from&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Census_SSN
&#x00A0;<br />group&#x00A0;by&#x00A0;tid,&#x00A0;ssn;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;tid&#x00A0;|&#x00A0;ssn&#x00A0;|&#x00A0;prior
&#x00A0;<br />-----+-----+-------
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;1&#x00A0;|&#x00A0;185&#x00A0;|&#x00A0;&#x00A0;&#x00A0;0.4
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;1&#x00A0;|&#x00A0;785&#x00A0;|&#x00A0;&#x00A0;&#x00A0;0.6
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;2&#x00A0;|&#x00A0;185&#x00A0;|&#x00A0;&#x00A0;&#x00A0;0.7
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;2&#x00A0;|&#x00A0;186&#x00A0;|&#x00A0;&#x00A0;&#x00A0;0.3
</div>
<!--l. 774--><p class="nopar" >
<!--l. 776--><p class="indent" >   We can determine the probability that at least one individual has any
particular SSN (assuming that the OCR system did not miss the correct SSN as
an alternative) using the following query:
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;&#x00A0;&#x00A0;ssn,&#x00A0;conf()&#x00A0;as&#x00A0;ssn_prior
&#x00A0;<br />from&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Census_SSN
&#x00A0;<br />group&#x00A0;by&#x00A0;ssn;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;ssn&#x00A0;|&#x00A0;ssn_prior
&#x00A0;<br />-----+-----------
&#x00A0;<br />&#x00A0;185&#x00A0;|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;0.82
&#x00A0;<br />&#x00A0;186&#x00A0;|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;0.3
&#x00A0;<br />&#x00A0;785&#x00A0;|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;0.6
</div>
<!--l. 789--><p class="nopar" > Indeed, the probability that at least one individual has SSN 185 is
1 <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">.</span>6 <span 
class="cmsy-10x-x-120">&#x22C5; </span><span 
class="cmmi-12">.</span>3 = <span 
class="cmmi-12">.</span>82.
<!--l. 793--><p class="indent" >   We now perform data cleaning using a single integrity constraint, namely that
no two individuals can have the same ssn. Conceptually, we want to exclude
worlds that violate the functional dependency
   <center class="math-display" >
<img 
src="manual15x.png" alt="ssn &#x2192;  tid,
" class="math-display" ></center>
<!--l. 798--><p class="nopar" > i.e., the constraint that ssn must be a key for the relation.
<!--l. 801--><p class="indent" >   We start by computing an auxiliary relation that computes, in each possible
worlds, the ssn values that violate the integrity constraint.
                                                                          

                                                                          
   <div class="verbatim">
/*&#x00A0;violations&#x00A0;of&#x00A0;fd&#x00A0;ssn-&#x003E;tid&#x00A0;*/
&#x00A0;<br />create&#x00A0;table&#x00A0;FD_Violations&#x00A0;as
&#x00A0;<br />select&#x00A0;S1.ssn
&#x00A0;<br />from&#x00A0;&#x00A0;&#x00A0;Census_SSN&#x00A0;S1,&#x00A0;Census_SSN&#x00A0;S2
&#x00A0;<br />where&#x00A0;&#x00A0;S1.tid&#x00A0;&#x003C;&#x00A0;S2.tid&#x00A0;and&#x00A0;S1.ssn&#x00A0;=&#x00A0;S2.ssn;
</div>
<!--l. 810--><p class="nopar" > Note that two tuples violate the constraint if they have the same ssn but different
tid. We express this in the above query using a slightly changed condition: (S1.tid
<span 
class="cmmi-12">&#x003C; </span>S2.tid and S1.ssn = S2.ssn) instead of (S1.tid <span 
class="cmmi-12">&#x003C;&#x003E; </span>S2.tid and S1.ssn = S2.ssn).
However, both conditions select the same set of distinct ssn values that violate the
integrity constraint.
<!--l. 818--><p class="indent" >   This query computes the uncertain table that holds 185 in the world in which
both forms have ssn value 185. In all other worlds it is empty.
<!--l. 821--><p class="indent" >   Next we compute the conditional probability table
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;TidSSNPosterior&#x00A0;as
&#x00A0;<br />select&#x00A0;Q1.tid,&#x00A0;Q1.ssn,&#x00A0;p1,&#x00A0;p2,&#x00A0;p3,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cast((p1-p2)/(1-p3)&#x00A0;as&#x00A0;real)&#x00A0;as&#x00A0;posterior
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;select&#x00A0;tid,&#x00A0;ssn,&#x00A0;conf()&#x00A0;as&#x00A0;p1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;from&#x00A0;&#x00A0;&#x00A0;Census_SSN
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;group&#x00A0;by&#x00A0;tid,&#x00A0;ssn
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;)&#x00A0;Q1,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;select&#x00A0;ssn,&#x00A0;conf()&#x00A0;as&#x00A0;p2
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;from&#x00A0;&#x00A0;&#x00A0;FD_Violations
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;group&#x00A0;by&#x00A0;ssn
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;union
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(select&#x00A0;ssn,&#x00A0;0&#x00A0;as&#x00A0;p2&#x00A0;from&#x00A0;Census_SSN_0)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;except
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(select&#x00A0;possible&#x00A0;ssn,&#x00A0;0&#x00A0;as&#x00A0;p2&#x00A0;from&#x00A0;FD_Violations)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;)&#x00A0;Q2,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;select&#x00A0;conf()&#x00A0;as&#x00A0;p3
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;from&#x00A0;&#x00A0;&#x00A0;FD_Violations
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;)&#x00A0;Q3
&#x00A0;<br />where&#x00A0;Q1.ssn&#x00A0;=&#x00A0;Q2.ssn;
&#x00A0;<br />
&#x00A0;<br />select&#x00A0;*&#x00A0;from&#x00A0;TidSSNPosterior;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;tid&#x00A0;|&#x00A0;ssn&#x00A0;|&#x00A0;p1&#x00A0;&#x00A0;|&#x00A0;&#x00A0;p2&#x00A0;&#x00A0;|&#x00A0;&#x00A0;p3&#x00A0;&#x00A0;|&#x00A0;posterior
                                                                          

                                                                          
&#x00A0;<br />-----+-----+-----+------+------+-----------
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;1&#x00A0;|&#x00A0;185&#x00A0;|&#x00A0;0.4&#x00A0;|&#x00A0;0.28&#x00A0;|&#x00A0;0.28&#x00A0;|&#x00A0;&#x00A0;0.166667
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;1&#x00A0;|&#x00A0;785&#x00A0;|&#x00A0;0.6&#x00A0;|&#x00A0;&#x00A0;&#x00A0;&#x00A0;0&#x00A0;|&#x00A0;0.28&#x00A0;|&#x00A0;&#x00A0;0.833333
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;2&#x00A0;|&#x00A0;185&#x00A0;|&#x00A0;0.7&#x00A0;|&#x00A0;0.28&#x00A0;|&#x00A0;0.28&#x00A0;|&#x00A0;&#x00A0;0.583333
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;2&#x00A0;|&#x00A0;186&#x00A0;|&#x00A0;0.3&#x00A0;|&#x00A0;&#x00A0;&#x00A0;&#x00A0;0&#x00A0;|&#x00A0;0.28&#x00A0;|&#x00A0;&#x00A0;0.416667
</div>
<!--l. 859--><p class="nopar" >
<!--l. 861--><p class="indent" >   This table stores, for each pair of form tid and ssn, the posterior probability
that the individual who completed the form tid has the social security number ssn
given that no two individuals can have the same ssn.
<!--l. 865--><p class="indent" >   We can compute, for each form, the maximum-a-posteriori ssn (the
most likely ssn given the evidence specified by the integrity constraint)
as
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;tid,&#x00A0;argmax(ssn,&#x00A0;posterior)&#x00A0;as&#x00A0;map
&#x00A0;<br />from&#x00A0;&#x00A0;&#x00A0;TidSSNPosterior
&#x00A0;<br />group&#x00A0;by&#x00A0;tid
&#x00A0;<br />order&#x00A0;by&#x00A0;tid;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;tid&#x00A0;|&#x00A0;map
&#x00A0;<br />-----+-----
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;1&#x00A0;|&#x00A0;785
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;2&#x00A0;|&#x00A0;185
</div>
<!--l. 877--><p class="nopar" >
<!--l. 879--><p class="indent" >   In a sense, these map values are the locally best values that we could decide
upon for each uncertain answer in our census database. Note, however, that, if we
always choose the map value, we may sometimes create a database that again
violates the integrity constraints used for data cleaning. This would have been the
case if we had indicated probability .9 for both 185 alternatives in the input
database.
<!--l. 889--><p class="indent" >   A further example that computes conditional probabilities and MAP values in
a different context can be found in Chapter&#x00A0;<a 
href="#x1-390006.1">6.1<!--tex4ht:ref: sect:ql --></a> (Example&#x00A0;<a 
href="#x1-420011">6.1.1<!--tex4ht:ref: ex:coins_sql --></a>).
                                                                          

                                                                          
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;5</span><br /><a 
 id="x1-220005"></a>Formal Foundations</h2>
<!--l. 8--><p class="noindent" >This chapter describes the formal foundations of MayBMS, including the
principles used for representing and storing probabilistic data, the design of the
query language, and efficient algorithms for query processing.
<!--l. 12--><p class="indent" >   It is safe for a reader who has gained sufficient intuitive understanding of
the workings of MayBMS from the tutorial to skip this chapter on first
reading and to directly proceed to the query language reference chapter that
follows.
   <h3 class="sectionHead"><span class="titlemark">5.1   </span> <a 
 id="x1-230005.1"></a>Probabilistic Databases: Notation</h3>
<!--l. 32--><p class="noindent" >Given a schema with relation names <span 
class="cmmi-12">R</span><sub><span 
class="cmr-8">1</span></sub><span 
class="cmmi-12">,</span><span 
class="cmmi-12">&#x2026;</span><span 
class="cmmi-12">,R</span><sub><span 
class="cmmi-8">k</span></sub>. We use <span 
class="cmmi-12">sch</span>(<span 
class="cmmi-12">R</span><sub><span 
class="cmmi-8">l</span></sub>) to denote the
attributes of relation schema <span 
class="cmmi-12">R</span><sub><span 
class="cmmi-8">l</span></sub>. Formally, a <span 
class="cmti-12">probabilistic database </span>is a <span 
class="cmti-12">finite </span>set of
structures
   <center class="math-display" >
<img 
src="manual16x.png" alt="W  =  {&#x27E8;R11,...,R1k,p[1]&#x27E9;,...,&#x27E8;Rn1,...,Rnk ,p[n]&#x27E9;}
" class="math-display" ></center>
<!--l. 38--><p class="nopar" > of relations <span 
class="cmmi-12">R</span><sub><span 
class="cmr-8">1</span></sub><sup><span 
class="cmmi-8">i</span></sup><span 
class="cmmi-12">,</span><span 
class="cmmi-12">&#x2026;</span><span 
class="cmmi-12">,R</span><sub>
<span 
class="cmmi-8">k</span></sub><sup><span 
class="cmmi-8">i</span></sup> and numbers 0 <span 
class="cmmi-12">&#x003C; p</span><sup><span 
class="cmr-8">[</span><span 
class="cmmi-8">i</span><span 
class="cmr-8">]</span></sup> <span 
class="cmsy-10x-x-120">&#x2264; </span>1 such that
   <center class="math-display" >
<img 
src="manual17x.png" alt="&#x2211;     [i]
     p  =  1.
1&#x2264;i&#x2264;n
" class="math-display" ></center>
<!--l. 42--><p class="nopar" > We call an element <span 
class="cmsy-10x-x-120">&#x27E8;</span><span 
class="cmmi-12">R</span><sub><span 
class="cmr-8">1</span></sub><sup><span 
class="cmmi-8">i</span></sup><span 
class="cmmi-12">,</span><span 
class="cmmi-12">&#x2026;</span><span 
class="cmmi-12">,R</span><sub>
<span 
class="cmmi-8">k</span></sub><sup><span 
class="cmmi-8">i</span></sup><span 
class="cmmi-12">,p</span><sup><span 
class="cmr-8">[</span><span 
class="cmmi-8">i</span><span 
class="cmr-8">]</span></sup><span 
class="cmsy-10x-x-120">&#x27E9;<img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span><span 
class="cmmi-12">W </span>a <span 
class="cmti-12">possible world</span>, and <span 
class="cmmi-12">p</span><sup><span 
class="cmr-8">[</span><span 
class="cmmi-8">i</span><span 
class="cmr-8">]</span></sup> its probability.
We use superscripts for indexing possible worlds. To avoid confusion with
exponentiation, we sometimes use bracketed superscripts <span 
class="cmsy-10x-x-120">&#x22C5;</span><sup><span 
class="cmr-8">[</span><span 
class="cmmi-8">i</span><span 
class="cmr-8">]</span></sup>. We call a relation <span 
class="cmmi-12">R</span>
<span 
class="cmti-12">complete </span>or <span 
class="cmti-12">certain </span>if its instantiations are the same in all possible worlds of <span 
class="cmmi-12">W</span>,
i.e., if <span 
class="cmmi-12">R</span><sup><span 
class="cmr-8">1</span></sup> = <img 
src="manual18x.png" alt="&#x22C5;&#x22C5;&#x22C5;"  class="@cdots" > = <span 
class="cmmi-12">R</span><sup><span 
class="cmmi-8">n</span></sup>.
<!--l. 53--><p class="indent" >   Tuple <span 
class="cmti-12">confidence </span>refers to the probability of the event <img 
src="manual19x.png" alt="&#x20D7;t"  class="vec" > <span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span><span 
class="cmmi-12">R</span>, where <span 
class="cmmi-12">R </span>is one of
the relation names of the schema, with
   <center class="math-display" >
<img 
src="manual20x.png" alt="  &#x20D7;            &#x2211;      [i]
Pr[t &#x2208; R ] =         p  .
            1&#x2264;i&#x2264;n:&#x20D7;t&#x2208;Ri
" class="math-display" ></center>
<!--l. 56--><p class="nopar" >
<!--l. 66--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">5.2   </span> <a 
 id="x1-240005.2"></a>Query Language Desiderata</h3>
<!--l. 71--><p class="noindent" >At the time of writing this, there is no accepted standard query language for
probabilistic databases. In fact, we do not even agree today what use cases and
functionality such systems should support. It seems to be proper to start the
query language discussion with the definition of design <span 
class="cmti-12">desiderata</span>. The following
are those used in the design of MayBMS.
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-24002x1">Efficient query evaluation.
      </li>
      <li 
  class="enumerate" id="x1-24004x2">The right degree of expressive power. The language should be powerful
      enough to support important queries. On the other hand, it should not
      be too strong, because expressiveness generally comes at a price: high
      evaluation complexity and infeasibility of query optimization.
      </li>
      <li 
  class="enumerate" id="x1-24006x3">Genericity. The semantics of a query language should be independent
      from details of how the data is represented. Queries should behave in
      the same way no matter how the probabilistic data is stored. This is
      a basic requirement that is even part of the traditional definition of
      what constitutes a query (cf.&#x00A0;e.g.&#x00A0;<span class="cite">[<a 
href="#XAHV95">1</a>]</span>), but it is nontrivial to achieve
      for probabilistic databases <span class="cite">[<a 
href="#XAKO07ISQL">4</a>]</span>.
      </li>
      <li 
  class="enumerate" id="x1-24008x4">The ability to transform data. Queries on probabilistic databases are
      often interpreted quite narrowly in the literature. It is the authors&#8217;
      view that queries in general should be compositional mappings between
                                                                          

                                                                          
      databases, in this case probabilistic databases. This is a property taken
      for granted in relational databases. It allows for the definition of clean
      database update languages.
      </li>
      <li 
  class="enumerate" id="x1-24010x5">The ability to introduce additional uncertainty. This may appear to
      be  a  controversial  goal,  since  uncertainty  is  commonly  considered
      undesirable, and probabilistic databases are there to deal with it by
      providing useful functionality <span 
class="cmti-12">despite </span>uncertainty. However, it can be
      argued that an uncertainty-introduction operation is important for at
      least three reasons: (1) for compositionality, and to allow construction
      of an uncertain database from scratch (as part of the update language);
      (2)  to  support  what-if  queries;  and  (3)  to  extend  the  hypothesis
      space modeled by the probabilistic database. The latter is needed to
      accommodate the results of experiments or new evidence, and to define
      queries that map from prior to posterior probabilistic databases. This
      is a nontrivial issue, and will be discussed in more detail later.</li></ol>
<!--l. 104--><p class="indent" >   The next section introduces a query algebra and argues that it satisfies each of
these desiderata.
<!--l. 114--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">5.3   </span> <a 
 id="x1-250005.3"></a>The Algebra</h3>
<!--l. 119--><p class="noindent" >This section covers the core query algebra of MayBMS: <span 
class="cmti-12">probabilistic world-set</span>
<span 
class="cmti-12">algebra </span>(probabilistic WSA) <span class="cite">[<a 
href="#XAKO07ISQL">4</a>,&#x00A0;<a 
href="#XKoch2008">13</a>,&#x00A0;<a 
href="#XKoch2008-SO">12</a>]</span>. Informally, probabilistic world-set algebra
consists of the operations of relational algebra, an operation for computing tuple
confidence conf, and the repair-key operation for <span 
class="cmti-12">introducing </span>uncertainty. The
operations of relational algebra are evaluated individually, in &#8220;parallel&#8221;, in each
possible world. The operation conf(<span 
class="cmmi-12">R</span>) computes, for each tuple that occurs in
relation <span 
class="cmmi-12">R </span>in at least one world, the sum of the probabilities of the worlds in
which the tuple occurs. The result is a certain relation, or viewed differently, a
relation that is the same in all possible worlds. Finally, repair-key<sub><img 
src="manual21x.png" alt="A&#x20D7;"  class="vec" ><span 
class="cmr-8">@</span><span 
class="cmmi-8">P</span> </sub>(<span 
class="cmmi-12">R</span>), where
<img 
src="manual22x.png" alt=" &#x20D7;
A"  class="vec" ><span 
class="cmmi-12">,P </span>are attributes of <span 
class="cmmi-12">R</span>, conceptually nondeterministically chooses a maximal
repair of key <img 
src="manual23x.png" alt="A&#x20D7;"  class="vec" >. This operation turns a possible world <span 
class="cmmi-12">R</span><sup><span 
class="cmmi-8">i</span></sup> into the set of
                                                                          

                                                                          
worlds consisting of all possible <span 
class="cmti-12">maximal repairs </span>of key <img 
src="manual24x.png" alt="A&#x20D7;"  class="vec" >. A repair of
key <img 
src="manual25x.png" alt=" &#x20D7;
A"  class="vec" > in relation <span 
class="cmmi-12">R</span><sup><span 
class="cmmi-8">i</span></sup> is a subset of <span 
class="cmmi-12">R</span><sup><span 
class="cmmi-8">i</span></sup> for which <img 
src="manual26x.png" alt="&#x20D7;
A"  class="vec" > is a key. It uses the
numerically-valued column <span 
class="cmmi-12">P </span>for weighting the newly created alternative
repairs.
<!--l. 140--><p class="indent" >   Formally, probabilistic world-set algebra consists of the following operations:
      <ul class="itemize1">
      <li class="itemize">The operations of relational algebra (selection <span 
class="cmmi-12">&#x03C3;</span>, projection <span 
class="cmmi-12">&#x03C0;</span>, product
      <span 
class="cmsy-10x-x-120">&#x00D7;</span>, union <span 
class="cmsy-10x-x-120">&#x222A;</span>, difference <span 
class="cmsy-10x-x-120">-</span>, and attribute renaming <span 
class="cmmi-12">&#x03C1;</span>), which are applied
      in each possible world independently.
      <!--l. 148--><p class="noindent" >The semantics of operations &#x0398; on probabilistic database <span 
class="cmmi-12">W </span>is
      <center class="math-display" >
      <img 
src="manual27x.png" alt="[[&#x0398; (Rl)]](W ) := {&#x27E8;R1, ...,Rk, &#x0398;(Rl ),p &#x27E9; | &#x27E8;R1, ...,Rk, p&#x27E9; &#x2208; W }
      " class="math-display" ></center>
      <!--l. 154--><p class="nopar" > for unary operations (1 <span 
class="cmsy-10x-x-120">&#x2264; </span><span 
class="cmmi-12">l </span><span 
class="cmsy-10x-x-120">&#x2264; </span><span 
class="cmmi-12">k</span>). For binary operations, the semantics
      is
      <center class="math-display" >
      <img 
src="manual28x.png" alt="[[&#x0398;(Rl, Rm )]](W  ) := {&#x27E8;R1, ...,Rk,&#x0398; (Rl,Rm ),p&#x27E9; | &#x27E8;R1, ...,Rk,p &#x27E9; &#x2208; W }.
      " class="math-display" ></center>
      <!--l. 160--><p class="nopar" >
      <!--l. 162--><p class="noindent" >Selection  conditions  are  Boolean  combinations  of  atomic  conditions
      (i.e., negation is permitted even in the positive fragment of the algebra).
      Arithmetic  expressions  may  occur  in  atomic  conditions  and  in  the
      arguments of <span 
class="cmmi-12">&#x03C0; </span>and <span 
class="cmmi-12">&#x03C1;</span>. For example, <span 
class="cmmi-12">&#x03C1;</span><sub><span 
class="cmmi-8">A</span><span 
class="cmr-8">+</span><span 
class="cmmi-8">B</span><span 
class="cmsy-8">&#x2192;</span><span 
class="cmmi-8">C</span></sub>(<span 
class="cmmi-12">R</span>) in each world adds
      up the <span 
class="cmmi-12">A </span>and <span 
class="cmmi-12">B </span>values of each tuple of <span 
class="cmmi-12">R </span>and keeps them in a new <span 
class="cmmi-12">C</span>
      attribute.
      </li>
      <li class="itemize">An operation for computing tuple confidence,
                                                                          

                                                                          
      <center class="math-display" >
      <img 
src="manual29x.png" alt="[[conf(Rl )]](W  ) := {&#x27E8;R1, ...,Rk, S,p&#x27E9; | &#x27E8;R1,...,Rk, p&#x27E9; &#x2208; W }
      " class="math-display" ></center>
      <!--l. 177--><p class="nopar" > where, w.l.o.g., <span 
class="cmmi-12">P </span><span 
class="cmsy-10x-x-120">&#x2044;<img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span><span 
class="cmmi-12">sch</span>(<span 
class="cmmi-12">R</span><sub><span 
class="cmmi-8">l</span></sub>), and
      <center class="math-display" >
      <img 
src="manual30x.png" alt="                            &#x22C3;    i
S =  {&#x27E8;&#x20D7;t,P  : Pr [&#x20D7;t &#x2208; Rl]&#x27E9; |&#x20D7;t &#x2208;  R l},
                             i
      " class="math-display" ></center>
      <!--l. 182--><p class="nopar" > with schema <span 
class="cmmi-12">sch</span>(<span 
class="cmmi-12">S</span>)  =  <span 
class="cmmi-12">sch</span>(<span 
class="cmmi-12">R</span><sub><span 
class="cmmi-8">l</span></sub>) <span 
class="cmsy-10x-x-120">&#x222A;{</span><span 
class="cmmi-12">P</span><span 
class="cmsy-10x-x-120">}</span>. The result of conf(<span 
class="cmmi-12">R</span><sub><span 
class="cmmi-8">l</span></sub>), the
      relation <span 
class="cmmi-12">S</span>, is the same in all possible worlds, i.e., it is a certain relation.
      <!--l. 190--><p class="noindent" >By our definition of probabilistic databases, each possible world has
      nonzero probability. As a consequence, conf does not return tuples with
      probability 0.
      <!--l. 193--><p class="noindent" >For example, on probabilistic database
      <div class="center" 
>
<!--l. 194--><p class="noindent" >
<div class="tabular"> <table id="TBL-4" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-4-1g"><col 
id="TBL-4-1"><col 
id="TBL-4-2"><col 
id="TBL-4-3"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-4-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-1"  
class="td10"> <!--tex4ht:inline--><div class="tabular"> <table id="TBL-5" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-5-1g"><col 
id="TBL-5-1"></colgroup><colgroup id="TBL-5-2g"><col 
id="TBL-5-2"><col 
id="TBL-5-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-5-1-1"  
class="td00">&#x00A0;<span 
class="cmmi-12">R</span><sup><span 
class="cmr-8">1</span></sup>&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-1-2"  
class="td00">A&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-1-3"  
class="td00">B&#x00A0;</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-1"  
class="td00">&#x00A0;     &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-2"  
class="td00">a&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-3"  
class="td00">b&#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-5-3-1"  
class="td00">&#x00A0;     &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-3-2"  
class="td00">b&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-3-3"  
class="td00">c&#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-5-4-1"  
class="td00">&#x00A0;     &#x00A0;&#x00A0;</td>
</tr></table>                                                                                                    </div> <span 
class="cmmi-12">p</span><sup><span 
class="cmr-8">[1]</span></sup> = <span 
class="cmmi-12">.</span>3&#x00A0;&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-2"  
class="td00"><!--tex4ht:inline--><div class="tabular"> <table id="TBL-6" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-6-1g"><col 
id="TBL-6-1"></colgroup><colgroup id="TBL-6-2g"><col 
id="TBL-6-2"><col 
id="TBL-6-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-1-1"  
class="td00">&#x00A0;<span 
class="cmmi-12">R</span><sup><span 
class="cmr-8">2</span></sup>&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-1-2"  
class="td00">A&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-1-3"  
class="td00">B&#x00A0;</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-1"  
class="td00">&#x00A0;     &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-2"  
class="td00">a&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-3"  
class="td00">b&#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-1"  
class="td00">&#x00A0;     &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-2"  
class="td00">c&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-3"  
class="td00">d&#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-4-1"  
class="td00">&#x00A0;     &#x00A0;&#x00A0;</td>
</tr></table>                                                                                                    </div> <span 
class="cmmi-12">p</span><sup><span 
class="cmr-8">[2]</span></sup> = <span 
class="cmmi-12">.</span>2&#x00A0;&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-3"  
class="td01"><!--tex4ht:inline--><div class="tabular"> <table id="TBL-7" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-7-1g"><col 
id="TBL-7-1"></colgroup><colgroup id="TBL-7-2g"><col 
id="TBL-7-2"><col 
id="TBL-7-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-1-1"  
class="td00">&#x00A0;<span 
class="cmmi-12">R</span><sup><span 
class="cmr-8">3</span></sup>&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-1-2"  
class="td00">A&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-1-3"  
class="td00">B&#x00A0;</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-2-1"  
class="td00">&#x00A0;     &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-2-2"  
class="td00">a&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-2-3"  
class="td00">c&#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-1"  
class="td00">&#x00A0;     &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-2"  
class="td00">c&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-3"  
class="td00">d&#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-4-1"  
class="td00">&#x00A0;     &#x00A0;&#x00A0;</td>
</tr></table>                                                                                                    </div> <span 
class="cmmi-12">p</span><sup><span 
class="cmr-8">[3]</span></sup> = <span 
class="cmmi-12">.</span>5  </td>
</tr></table>
</div></div>
      <!--l. 225--><p class="noindent" >conf(<span 
class="cmmi-12">R</span>) computes, for each possible tuple, the sum of the weights of the
      possible worlds in which it occurs, here
      <div class="center" 
>
                                                                          

                                                                          
<!--l. 228--><p class="noindent" >
<div class="tabular"> <table id="TBL-8" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-8-1g"><col 
id="TBL-8-1"></colgroup><colgroup id="TBL-8-2g"><col 
id="TBL-8-2"><col 
id="TBL-8-3"><col 
id="TBL-8-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-8-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-8-1-1"  
class="td11"> conf(<span 
class="cmmi-12">R</span>)  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-1-2"  
class="td10"> <span 
class="cmmi-12">A</span>&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-1-3"  
class="td00"><span 
class="cmmi-12">B</span>&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-1-4"  
class="td01">P  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-8-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-8-2-1"  
class="td11">         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-2-2"  
class="td10"> a&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-2-3"  
class="td00">b&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-2-4"  
class="td01">.5  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-8-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-8-3-1"  
class="td11">         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-3-2"  
class="td10"> a&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-3-3"  
class="td00"> c &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-3-4"  
class="td01">.5  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-8-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-8-4-1"  
class="td11">         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-4-2"  
class="td10"> b&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-4-3"  
class="td00"> c &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-4-4"  
class="td01">.3  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-8-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-8-5-1"  
class="td11">         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-5-2"  
class="td10"> c&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-5-3"  
class="td00">d&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-5-4"  
class="td01">.7  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-8-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-8-6-1"  
class="td11">         </td>
</tr></table></div></div>
      </li>
      <li class="itemize">An uncertainty-introducing operation, <span 
class="cmti-12">repair-key</span>, which can be
      thought of as sampling a maximum repair of a key for a relation.
      Repairing a key of a complete relation <span 
class="cmmi-12">R </span>means to compute, as
      possible worlds, all subset-maximal relations obtainable from <span 
class="cmmi-12">R</span>
      by removing tuples such that a key constraint is satisfied. We will
      use this as a method for constructing probabilistic databases, with
      probabilities derived from relative weights attached to the tuples of
      <span 
class="cmmi-12">R</span>.
      <!--l. 253--><p class="noindent" >We say that relation <span 
class="cmmi-12">R</span><span 
class="cmsy-10x-x-120">&#x2032; </span>is a <span 
class="cmti-12">maximal repair </span>of a functional dependency (fd,
      cf.&#x00A0;<span class="cite">[<a 
href="#XAHV95">1</a>]</span>) for relation <span 
class="cmmi-12">R </span>if <span 
class="cmmi-12">R</span><span 
class="cmsy-10x-x-120">&#x2032; </span>is a maximal subset of <span 
class="cmmi-12">R </span>which satisfies that
      functional dependency, i.e., a subset <span 
class="cmmi-12">R</span><span 
class="cmsy-10x-x-120">&#x2032;&#x2286; </span><span 
class="cmmi-12">R </span>that satisfies the fd such
      that there is no relation <span 
class="cmmi-12">R</span><span 
class="cmsy-10x-x-120">&#x2032;&#x2032;</span> with <span 
class="cmmi-12">R</span><span 
class="cmsy-10x-x-120">&#x2032;&#x2282; </span><span 
class="cmmi-12">R</span><span 
class="cmsy-10x-x-120">&#x2032;&#x2032;</span><span 
class="cmsy-10x-x-120">&#x2286; </span><span 
class="cmmi-12">R </span>that satisfies the
      fd.
      <!--l. 257--><p class="noindent" >Let <img 
src="manual31x.png" alt="&#x20D7;A"  class="vec" ><span 
class="cmmi-12">,B </span><span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span><span 
class="cmmi-12">sch</span>(<span 
class="cmmi-12">R</span><sub><span 
class="cmmi-8">l</span></sub>). For each possible world <span 
class="cmsy-10x-x-120">&#x27E8;</span><span 
class="cmmi-12">R</span><sub><span 
class="cmr-8">1</span></sub><span 
class="cmmi-12">,</span><span 
class="cmmi-12">&#x2026;</span><span 
class="cmmi-12">,R</span><sub><span 
class="cmmi-8">k</span></sub><span 
class="cmmi-12">,p</span><span 
class="cmsy-10x-x-120">&#x27E9;<img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span><span 
class="cmmi-12">W</span>, let column
      <span 
class="cmmi-12">B </span>of <span 
class="cmmi-12">R </span>contain only numerical values greater than 0 and let <span 
class="cmmi-12">R</span><sub><span 
class="cmmi-8">l</span></sub> satisfy the fd
      (<span 
class="cmmi-12">sch</span>(<span 
class="cmmi-12">R</span><sub><span 
class="cmmi-8">l</span></sub>) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">B</span>) <span 
class="cmsy-10x-x-120">&#x2192; </span><span 
class="cmmi-12">sch</span>(<span 
class="cmmi-12">R</span><sub><span 
class="cmmi-8">l</span></sub>). Then, <table 
class="multline-star"><tr><td><img 
src="manual32x.png" alt="[[repair-key&#x20D7;A@B (Rl)]](W ) :=
          {
           &#x27E8;R1, ...,Rk,&#x03C0;sch(Rl)-B (&#x02C6;Rl), &#x02C6;p&#x27E9; | &#x27E8;R1,...,Rk, p&#x27E9; &#x2208; W,
                &#x02C6;                          &#x20D7;
               Rl is a maximal repair of fd A &#x2192; sch (Rl ),
                                                 &#x220F;         &#x20D7;t.B       }
                                          &#x02C6;p = p &#x22C5;    &#x2211;----------------
                                                 &#x20D7;t&#x2208;R&#x02C6;   &#x20D7;s&#x2208;Rl:&#x20D7;s.A&#x20D7;= &#x20D7;t.&#x20D7;A &#x20D7;s.B
                                                    l
      " ></td></tr></table>
      <!--l. 278--><p class="noindent" >Such a repair operation, apart from its usefulness for the purpose implicit in
      its name, is a powerful way of constructing probabilistic databases from
      complete relations.
      <div class="newtheorem">
      <!--l. 283--><p class="noindent" ><span class="head">
      <span 
class="cmbx-12">Example</span><span 
class="cmbx-12">&#x00A0;5.3.1</span> </span><a 
 id="x1-250011"></a> Consider the example of tossing a biased coin twice. We
      start with a certain database
      <div class="center" 
>
<!--l. 286--><p class="noindent" >
<div class="tabular"> <table id="TBL-9" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-9-1g"><col 
id="TBL-9-1"></colgroup><colgroup id="TBL-9-2g"><col 
id="TBL-9-2"><col 
id="TBL-9-3"><col 
id="TBL-9-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-9-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-9-1-1"  
class="td11"> R  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-1-2"  
class="td10"> Toss&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-1-3"  
class="td00">Face&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-1-4"  
class="td01">FProb  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-9-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-9-2-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-2-2"  
class="td10">  1  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-2-3"  
class="td00"> H  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-2-4"  
class="td01">  .4     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-9-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-9-3-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-3-2"  
class="td10">  1  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-3-3"  
class="td00"> T  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-3-4"  
class="td01">  .6     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-9-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-9-4-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-4-2"  
class="td10">  2  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-4-3"  
class="td00"> H  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-4-4"  
class="td01">  .4     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-9-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-9-5-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-5-2"  
class="td10">  2  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-5-3"  
class="td00"> T  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-5-4"  
class="td01">  .6     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-9-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-9-6-1"  
class="td11">    </td>
</tr></table>
</div> <span 
class="cmmi-12">p </span>= 1</div>
      <!--l. 298--><p class="noindent" >that represents the possible outcomes of tossing the coin twice. We turn
      this into a probabilistic database that represents this information
                                                                          

                                                                          
      using alternative possible worlds for the four outcomes using the
      query <span 
class="cmmi-12">S </span>:= repair-key<sub><span 
class="cmr-8">Toss</span><span 
class="cmr-8">@</span><span 
class="cmr-8">FProb</span></sub>(<span 
class="cmmi-12">R</span>)<span 
class="cmmi-12">. </span>The resulting possible worlds
      are
      <div class="center" 
>
<!--l. 304--><p class="noindent" >
<div class="tabular"> <table id="TBL-10" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-10-1g"><col 
id="TBL-10-1"></colgroup><colgroup id="TBL-10-2g"><col 
id="TBL-10-2"><col 
id="TBL-10-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-1-1"  
class="td11"> <span 
class="cmmi-12">S</span><sup><span 
class="cmr-8">1</span></sup>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-1-2"  
class="td10"> Toss&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-1-3"  
class="td01">Face  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-2-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-2-2"  
class="td10">  1  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-2-3"  
class="td01"> H   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-3-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-3-2"  
class="td10">  2  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-3-3"  
class="td01"> H   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-4-1"  
class="td11">     </td>
</tr></table>
</div> <!--tex4ht:inline--><div class="tabular"> <table id="TBL-11" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-11-1g"><col 
id="TBL-11-1"></colgroup><colgroup id="TBL-11-2g"><col 
id="TBL-11-2"><col 
id="TBL-11-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-11-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-11-1-1"  
class="td11"> <span 
class="cmmi-12">S</span><sup><span 
class="cmr-8">2</span></sup>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-11-1-2"  
class="td10"> Toss&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-11-1-3"  
class="td01">Face  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-11-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-11-2-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-11-2-2"  
class="td10">  1  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-11-2-3"  
class="td01"> H   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-11-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-11-3-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-11-3-2"  
class="td10">  2  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-11-3-3"  
class="td01"> T   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-11-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-11-4-1"  
class="td11">     </td>
</tr></table></div><br />
<div class="tabular"> <table id="TBL-12" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-12-1g"><col 
id="TBL-12-1"></colgroup><colgroup id="TBL-12-2g"><col 
id="TBL-12-2"><col 
id="TBL-12-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-12-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-12-1-1"  
class="td11"> <span 
class="cmmi-12">S</span><sup><span 
class="cmr-8">3</span></sup>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-1-2"  
class="td10"> Toss&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-1-3"  
class="td01">Face  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-12-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-12-2-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-2-2"  
class="td10">  1  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-2-3"  
class="td01"> T   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-12-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-12-3-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-3-2"  
class="td10">  2  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-3-3"  
class="td01"> H   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-12-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-12-4-1"  
class="td11">     </td>
</tr></table>
</div> <!--tex4ht:inline--><div class="tabular"> <table id="TBL-13" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-13-1g"><col 
id="TBL-13-1"></colgroup><colgroup id="TBL-13-2g"><col 
id="TBL-13-2"><col 
id="TBL-13-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-13-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-13-1-1"  
class="td11"> <span 
class="cmmi-12">S</span><sup><span 
class="cmr-8">4</span></sup>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-1-2"  
class="td10"> Toss&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-1-3"  
class="td01">Face  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-13-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-13-2-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-2-2"  
class="td10">  1  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-2-3"  
class="td01"> T   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-13-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-13-3-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-3-2"  
class="td10">  2  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-3-3"  
class="td01"> T   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-13-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-13-4-1"  
class="td11">     </td>
</tr></table></div></div>
      <!--l. 338--><p class="noindent" >with probabilities <span 
class="cmmi-12">p</span><sup><span 
class="cmr-8">[1]</span></sup> = <span 
class="cmmi-12">p </span><span 
class="cmsy-10x-x-120">&#x22C5;</span><img 
src="manual33x.png" alt=".4.4+.6-"  class="frac" align="middle"> <span 
class="cmsy-10x-x-120">&#x22C5;</span><img 
src="manual34x.png" alt=".4.4+.6"  class="frac" align="middle"> = <span 
class="cmmi-12">.</span>16, <span 
class="cmmi-12">p</span><sup><span 
class="cmr-8">[2]</span></sup> = <span 
class="cmmi-12">p</span><sup><span 
class="cmr-8">[3]</span></sup> = <span 
class="cmmi-12">.</span>24, and <span 
class="cmmi-12">p</span><sup><span 
class="cmr-8">[4]</span></sup> = <span 
class="cmmi-12">.</span>36.
                                                                         <span 
class="lasy-10x-x-120">&#x25A1;</span>
      </div>
      </li></ul>
<!--l. 345--><p class="indent" >   The fragment of probabilistic WSA which excludes the difference operation is
called <span 
class="cmti-12">positive </span>probabilistic WSA.
<!--l. 349--><p class="indent" >   Computing possible and certain tuples is redundant with conf: <div class="eqnarray">
                                                                          

                                                                          
   <center class="math-display" >
<img 
src="manual35x.png" alt="poss(R )  :=   &#x03C0;sch(R)(conf(R ))

 cert(R )  :=   &#x03C0;sch(R)(&#x03C3;P =1(conf(R)))
" class="math-display" ></center>
</div>
   <div class="newtheorem">
<!--l. 360--><p class="noindent" ><span class="head">
<span 
class="cmbx-12">Example</span><span 
class="cmbx-12">&#x00A0;5.3.2</span> </span><a 
 id="x1-250032"></a>  A  bag  of  coins  contains  two  fair  coins  and  one
double-headed coin. We take one coin out of the bag but do not look at its
two faces to determine its type (fair or double-headed) for certain. Instead
we toss the coin twice to collect evidence about its type.
<!--l. 365--><p class="indent" >   <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
><a 
 id="x1-250041"></a>
<div class="center" 
>
<!--l. 366--><p class="noindent" >
<div class="tabular"> <table id="TBL-14" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-14-1g"><col 
id="TBL-14-1"></colgroup><colgroup id="TBL-14-2g"><col 
id="TBL-14-2"><col 
id="TBL-14-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-14-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-14-1-1"  
class="td01">&#x00A0;Coins  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-1-2"  
class="td10">  Type  &#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-1-3"  
class="td00">Count&#x00A0;</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-14-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-14-2-1"  
class="td01">&#x00A0;          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-2-2"  
class="td10">   fair   &#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-2-3"  
class="td00">  2   &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-14-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-14-3-1"  
class="td01">&#x00A0;          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-3-2"  
class="td10"> 2headed&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-3-3"  
class="td00">  1   &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-14-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-14-4-1"  
class="td01">&#x00A0;          </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-14-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-14-5-1"  
class="td01">&#x00A0;          </td>
</tr></table>
</div>   <!--tex4ht:inline--><div class="tabular"> <table id="TBL-15" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-15-1g"><col 
id="TBL-15-1"></colgroup><colgroup id="TBL-15-2g"><col 
id="TBL-15-2"><col 
id="TBL-15-3"><col 
id="TBL-15-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-15-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-15-1-1"  
class="td01">&#x00A0;Faces  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-1-2"  
class="td11">  Type   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-1-3"  
class="td11"> Face  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-1-4"  
class="td10"> FProb&#x00A0;</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-15-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-15-2-1"  
class="td01">&#x00A0;          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-2-2"  
class="td11">   fair     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-2-3"  
class="td11">  H   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-2-4"  
class="td10">   .5   &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-15-3-1"  
class="td01">&#x00A0;          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-3-2"  
class="td11">   fair     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-3-3"  
class="td11">  T   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-3-4"  
class="td10">   .5   &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-15-4-1"  
class="td01">&#x00A0;          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-4-2"  
class="td11"> 2headed  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-4-3"  
class="td11">  H   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-4-4"  
class="td10">   1   &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-15-5-1"  
class="td01">&#x00A0;          </td></tr></table>
                                                                          

                                                                          
</div>   <!--tex4ht:inline--><div class="tabular"> <table id="TBL-16" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-16-1g"><col 
id="TBL-16-1"></colgroup><colgroup id="TBL-16-2g"><col 
id="TBL-16-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-16-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-16-1-1"  
class="td01">&#x00A0;Tosses  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-16-1-2"  
class="td10"> Toss&#x00A0;</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-16-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-16-2-1"  
class="td01">&#x00A0;           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-16-2-2"  
class="td10">  1  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-16-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-16-3-1"  
class="td01">&#x00A0;           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-16-3-2"  
class="td10">  2  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-16-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-16-4-1"  
class="td01">&#x00A0;           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-16-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-16-5-1"  
class="td01">&#x00A0;           </td></tr></table>
</div>
<div class="tabular"> <table id="TBL-17" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-17-1g"><col 
id="TBL-17-1"></colgroup><colgroup id="TBL-17-2g"><col 
id="TBL-17-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-17-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-17-1-1"  
class="td11"> <span 
class="cmmi-12">R</span><sup><span 
class="cmmi-8">f</span></sup>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-17-1-2"  
class="td11"> Type  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-17-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-17-2-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-17-2-2"  
class="td11">  fair   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-17-3-1"  
class="td11">     </td>
</tr></table>
</div>   <!--tex4ht:inline--><div class="tabular"> <table id="TBL-18" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-18-1g"><col 
id="TBL-18-1"></colgroup><colgroup id="TBL-18-2g"><col 
id="TBL-18-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-18-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-18-1-1"  
class="td11"> <span 
class="cmmi-12">R</span><sup><span 
class="cmmi-8">dh</span></sup>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-1-2"  
class="td11">  Type   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-18-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-18-2-1"  
class="td11">      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-2-2"  
class="td11"> 2headed  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-18-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-18-3-1"  
class="td11">      </td></tr></table>
</div>
<div class="tabular"> <table id="TBL-19" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-19-1g"><col 
id="TBL-19-1"><col 
id="TBL-19-2"><col 
id="TBL-19-3"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-19-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-19-1-1"  
class="td11"> <!--tex4ht:inline--><div class="tabular"> <table id="TBL-20" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-20-1g"><col 
id="TBL-20-1"></colgroup><colgroup id="TBL-20-2g"><col 
id="TBL-20-2"><col 
id="TBL-20-3"><col 
id="TBL-20-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-20-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-20-1-1"  
class="td00">&#x00A0;<span 
class="cmmi-12">S</span><sup><span 
class="cmmi-8">f.HH</span></sup>&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-1-2"  
class="td00">Type&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-1-3"  
class="td00">Toss&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-1-4"  
class="td00">Face&#x00A0;</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-20-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-20-2-1"  
class="td00">&#x00A0;         &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-2-2"  
class="td00"> fair &#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-2-3"  
class="td00"> 1  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-2-4"  
class="td00"> H  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-20-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-1"  
class="td00">&#x00A0;         &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-2"  
class="td00"> fair &#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-3"  
class="td00"> 2  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-4"  
class="td00"> H  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-20-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-20-4-1"  
class="td00">&#x00A0;         &#x00A0;&#x00A0;</td></tr></table>                                                                                   </div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-1-2"  
class="td11"> <!--tex4ht:inline--><div class="tabular"> <table id="TBL-21" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-21-1g"><col 
id="TBL-21-1"></colgroup><colgroup id="TBL-21-2g"><col 
id="TBL-21-2"><col 
id="TBL-21-3"><col 
id="TBL-21-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-21-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-21-1-1"  
class="td00">&#x00A0;<span 
class="cmmi-12">S</span><sup><span 
class="cmmi-8">f.HT</span> </sup>&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-1-2"  
class="td00">Type&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-1-3"  
class="td00">Toss&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-1-4"  
class="td00">Face&#x00A0;</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-21-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-21-2-1"  
class="td00">&#x00A0;        &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-2-2"  
class="td00"> fair &#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-2-3"  
class="td00"> 1  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-2-4"  
class="td00"> H  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-21-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-1"  
class="td00">&#x00A0;        &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-2"  
class="td00"> fair &#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-3"  
class="td00"> 2  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-4"  
class="td00"> T  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-21-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-21-4-1"  
class="td00">&#x00A0;        &#x00A0;&#x00A0;</td></tr></table>                                                                                   </div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-1-3"  
class="td11"> <!--tex4ht:inline--><div class="tabular"> <table id="TBL-22" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-22-1g"><col 
id="TBL-22-1"></colgroup><colgroup id="TBL-22-2g"><col 
id="TBL-22-2"><col 
id="TBL-22-3"><col 
id="TBL-22-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-22-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-22-1-1"  
class="td00">&#x00A0;<span 
class="cmmi-12">S</span><sup><span 
class="cmmi-8">dh</span></sup>&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-1-2"  
class="td00"> Type  &#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-1-3"  
class="td00">Toss&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-1-4"  
class="td00">Face&#x00A0;</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-22-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-22-2-1"  
class="td00">&#x00A0;      &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-2-2"  
class="td00">2headed&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-2-3"  
class="td00"> 1  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-2-4"  
class="td00"> H  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-22-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-1"  
class="td00">&#x00A0;      &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-2"  
class="td00">2headed&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-3"  
class="td00"> 2  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-4"  
class="td00"> H  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-22-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-22-4-1"  
class="td00">&#x00A0;      &#x00A0;&#x00A0;</td></tr></table>                                                                                      </div>  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-19-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-19-2-1"  
class="td11">                            <span 
class="cmmi-12">p</span><sup><span 
class="cmmi-8">f.HH</span></sup> = 1<span 
class="cmmi-12">&#x2215;</span>6                                            </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-2-2"  
class="td11">                            <span 
class="cmmi-12">p</span><sup><span 
class="cmmi-8">f.HT</span> </sup> = 1<span 
class="cmmi-12">&#x2215;</span>6                                            </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-2-3"  
class="td11">                             <span 
class="cmmi-12">p</span><sup><span 
class="cmmi-8">dh</span></sup> = 1<span 
class="cmmi-12">&#x2215;</span>3                                             </td>
</tr><tr 
class="vspace" style="font-size:5.16667pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-19-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-19-3-1"  
class="td11"> <!--tex4ht:inline--><div class="tabular"> <table id="TBL-23" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-23-1g"><col 
id="TBL-23-1"></colgroup><colgroup id="TBL-23-2g"><col 
id="TBL-23-2"><col 
id="TBL-23-3"><col 
id="TBL-23-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-23-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-23-1-1"  
class="td00">&#x00A0;<span 
class="cmmi-12">S</span><sup><span 
class="cmmi-8">f.TH</span></sup>&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-1-2"  
class="td00">Type&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-1-3"  
class="td00">Toss&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-1-4"  
class="td00">Face&#x00A0;</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-23-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-23-2-1"  
class="td00">&#x00A0;        &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-2-2"  
class="td00"> fair &#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-2-3"  
class="td00"> 1  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-2-4"  
class="td00"> T  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-23-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-23-3-1"  
class="td00">&#x00A0;        &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-3-2"  
class="td00"> fair &#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-3-3"  
class="td00"> 2  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-3-4"  
class="td00"> H  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-23-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-23-4-1"  
class="td00">&#x00A0;        &#x00A0;&#x00A0;</td></tr></table>                                                                                    </div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-3-2"  
class="td11"> <!--tex4ht:inline--><div class="tabular"> <table id="TBL-24" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-24-1g"><col 
id="TBL-24-1"></colgroup><colgroup id="TBL-24-2g"><col 
id="TBL-24-2"><col 
id="TBL-24-3"><col 
id="TBL-24-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-24-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-24-1-1"  
class="td00">&#x00A0;<span 
class="cmmi-12">S</span><sup><span 
class="cmmi-8">f.TT</span> </sup>&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-1-2"  
class="td00">Type&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-1-3"  
class="td00">Toss&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-1-4"  
class="td00">Face&#x00A0;</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-24-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-24-2-1"  
class="td00">&#x00A0;        &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-2-2"  
class="td00"> fair &#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-2-3"  
class="td00"> 1  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-2-4"  
class="td00"> T  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-24-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-24-3-1"  
class="td00">&#x00A0;        &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-3-2"  
class="td00"> fair &#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-3-3"  
class="td00"> 2  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-3-4"  
class="td00"> T  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-24-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-24-4-1"  
class="td00">&#x00A0;        &#x00A0;&#x00A0;</td></tr></table>                                                                                    </div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-3-3"  
class="td11">                                                                 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-19-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-19-4-1"  
class="td11">                            <span 
class="cmmi-12">p</span><sup><span 
class="cmmi-8">f.TH</span></sup> = 1<span 
class="cmmi-12">&#x2215;</span>6                                            </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-4-2"  
class="td11">                            <span 
class="cmmi-12">p</span><sup><span 
class="cmmi-8">f.TT</span> </sup> = 1<span 
class="cmmi-12">&#x2215;</span>6                                            </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-4-3"  
class="td11">                                                                 </td>
</tr></table>
</div>
<div class="tabular"> <table id="TBL-25" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-25-1g"><col 
id="TBL-25-1"></colgroup><colgroup id="TBL-25-2g"><col 
id="TBL-25-2"><col 
id="TBL-25-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-25-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-25-1-1"  
class="td00">&#x00A0;Ev&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-1-2"  
class="td00">Toss&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-1-3"  
class="td00">Face&#x00A0;</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-25-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-25-2-1"  
class="td00">&#x00A0;     &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-2-2"  
class="td00"> 1  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-2-3"  
class="td00"> H  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-25-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-25-3-1"  
class="td00">&#x00A0;     &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-3-2"  
class="td00"> 2  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-3-3"  
class="td00"> H  &#x00A0;</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-25-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-25-4-1"  
class="td00">&#x00A0;     &#x00A0;&#x00A0;</td>
</tr></table>
</div>   <!--tex4ht:inline--><div class="tabular"> <table id="TBL-26" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-26-1g"><col 
id="TBL-26-1"></colgroup><colgroup id="TBL-26-2g"><col 
id="TBL-26-2"><col 
id="TBL-26-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-26-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-26-1-1"  
class="td10"> <span 
class="cmmi-12">Q</span>&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-1-2"  
class="td00"> Type  &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-1-3"  
class="td01">       P            </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-26-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-26-2-1"  
class="td10">   &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-2-2"  
class="td00">  fair   &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-2-3"  
class="td01">(1<span 
class="cmmi-12">&#x2215;</span>6)<span 
class="cmmi-12">&#x2215;</span>(1<span 
class="cmmi-12">&#x2215;</span>2) = 1<span 
class="cmmi-12">&#x2215;</span>3  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-26-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-26-3-1"  
class="td10">   &#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-3-2"  
class="td00">2headed&#x00A0;&#x00A0;</td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-3-3"  
class="td01">(1<span 
class="cmmi-12">&#x2215;</span>3)<span 
class="cmmi-12">&#x2215;</span>(1<span 
class="cmmi-12">&#x2215;</span>2) = 2<span 
class="cmmi-12">&#x2215;</span>3  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-26-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-26-4-1"  
class="td10">   &#x00A0;&#x00A0;</td></tr></table>
</div></div>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;5.1: </td><td  
class="content">Tables of Example&#x00A0;<a 
href="#x1-250032">5.3.2<!--tex4ht:ref: ex:twotosses --></a>.</td></tr></table><!--tex4ht:label?: x1-250041 -->
<!--l. 575--><p class="indent" >   </td></tr></table></div><hr class="endfigure">
                                                                          

                                                                          
<!--l. 578--><p class="indent" >   We start out with a complete database (i.e., a relational database, or a
probabilistic database with one possible world of probability 1) consisting of three
relations, Coins, Faces, and Tosses (see Figure&#x00A0;<a 
href="#x1-250041">5.1<!--tex4ht:ref: fig:twotosses_tables --></a> for all tables used in this
example). We first pick a coin from the bag and model that the coin
be either fair or double-headed. In probabilistic WSA this is expressed
as
   <center class="math-display" >
<img 
src="manual36x.png" alt="R  :=  repair-key       (Coins).
               &#x2205;@Count
" class="math-display" ></center>
<!--l. 586--><p class="nopar" >
<!--l. 588--><p class="indent" >   This results in a probabilistic database of two possible worlds,
   <center class="math-display" >
<img 
src="manual37x.png" alt="{ &#x27E8;Coins, Faces,Rf ,pf = 2&#x2215;3&#x27E9;,&#x27E8;Coins, Faces,Rdh, pdh = 1&#x2215;3&#x27E9;}.
" class="math-display" ></center>
<!--l. 592--><p class="nopar" >
<!--l. 594--><p class="indent" >   The possible outcomes of tossing the coin twice can be modeled as
   <center class="math-display" >
<img 
src="manual38x.png" alt="S := repair-keyToss@FProb(R &#x22B3;&#x22B2; Faces &#x00D7; Tosses).
" class="math-display" ></center>
<!--l. 598--><p class="nopar" > This turns the two possible worlds into five, since there are four possible
outcomes of tossing the fair coin twice, and only one for the double-headed
coin.
<!--l. 601--><p class="indent" >   Let <span 
class="cmmi-12">T </span>:= <span 
class="cmmi-12">&#x03C0;</span><sub><span 
class="cmr-8">Toss</span><span 
class="cmmi-8">,</span><span 
class="cmr-8">Face</span></sub>(<span 
class="cmmi-12">S</span>). The posterior probability that a coin of type <span 
class="cmmi-12">x </span>was
picked, given the <span 
class="cmti-12">evidence </span><span 
class="cmmi-12">Ev </span>(see Figure&#x00A0;<a 
href="#x1-250041">5.1<!--tex4ht:ref: fig:twotosses_tables --></a>) that both tosses result in H,
is
   <center class="math-display" >
<img 
src="manual39x.png" alt="                      Pr[x &#x2208; R &#x2227; T =  Ev ]
Pr[x &#x2208; R | T = Ev ] = --------------------.
                          Pr[T =  Ev ]
" class="math-display" ></center>
<!--l. 607--><p class="nopar" > Let <span 
class="cmmi-12">A </span>be a relational algebra expression for the Boolean query <span 
class="cmmi-12">T </span>= <span 
class="cmmi-12">Ev</span>. Then we
can compute a table of pairs <span 
class="cmsy-10x-x-120">&#x27E8;</span><span 
class="cmmi-12">x,</span> Pr[<span 
class="cmmi-12">x </span><span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span><span 
class="cmmi-12">R</span><span 
class="cmsy-10x-x-120">&#x2223;</span><span 
class="cmmi-12">T </span>= <span 
class="cmmi-12">Ev</span>]<span 
class="cmsy-10x-x-120">&#x27E9; </span>as
   <center class="math-display" >
<img 
src="manual40x.png" alt="Q := &#x03C0;            (&#x03C1;     (conf(R &#x00D7; A )) &#x00D7; &#x03C1;    (conf(A ))).
       Type,P1&#x2215;P2&#x2192;P   P&#x2192;P1                   P&#x2192;P2
" class="math-display" ></center>
<!--l. 613--><p class="nopar" >
<!--l. 615--><p class="indent" >   The prior probability that the chosen coin was fair was 2/3; after taking
the evidence from two coin tosses into account, the posterior probability
Pr[the coin is fair <span 
class="cmsy-10x-x-120">| </span>both tosses result in H] is only 1/3. Given the evidence
from the coin tosses, the coin is now more likely to be double-headed.
                                                                         <span 
class="lasy-10x-x-120">&#x25A1;</span>
   </div>
   <div class="newtheorem">
<!--l. 623--><p class="noindent" ><span class="head">
<span 
class="cmbx-12">Example</span><span 
class="cmbx-12">&#x00A0;5.3.3</span> </span><a 
 id="x1-250053"></a>  We  redefine  the  query  of  Example&#x00A0;<a 
href="#x1-250032">5.3.2<!--tex4ht:ref: ex:twotosses --></a>  such  that
repair-key is only applied to certain relations. Starting from the database
obtained by computing <span 
class="cmmi-12">R</span>, with its two possible worlds, we perform the query
<span 
class="cmmi-12">S</span><sub><span 
class="cmr-8">0</span></sub> := repair-key<sub><span 
class="cmr-8">Type</span><span 
class="cmmi-8">,</span><span 
class="cmr-8">Toss@FProb</span></sub>(Faces<span 
class="cmsy-10x-x-120">&#x00D7;</span>Tosses) to model the possible outcomes
of  tossing  the  chosen  coin  twice.  The  probabilistic  database  representing
these  repairs  consists  of  eight  possible  worlds,  with  the  two  possible  <span 
class="cmmi-12">R</span>
relations of Example&#x00A0;<a 
href="#x1-250032">5.3.2<!--tex4ht:ref: ex:twotosses --></a> and, independently, four possible <span 
class="cmmi-12">S</span><sub><span 
class="cmr-8">0</span></sub> relations. Let
<span 
class="cmmi-12">S </span>:= <span 
class="cmmi-12">R</span><img 
src="manual41x.png" alt="&#x22B3;&#x22B2;"  class="bowtie" ><span 
class="cmmi-12">S</span><sub><span 
class="cmr-8">0</span></sub>. While we now have eight possible worlds rather than five, the
four worlds in which the double-headed coin was picked all agree on <span 
class="cmmi-12">S </span>with
the one world in which the double-headed coin was picked in Example&#x00A0;<a 
href="#x1-250032">5.3.2<!--tex4ht:ref: ex:twotosses --></a>,
and the sum of their probabilities is the same as the probability of that
world. It follows that the new definition of <span 
class="cmmi-12">S </span>is equivalent to the one of
Example&#x00A0;<a 
href="#x1-250032">5.3.2<!--tex4ht:ref: ex:twotosses --></a> and the rest of the query is the same.                            <span 
class="lasy-10x-x-120">&#x25A1;</span>
                                                                          

                                                                          
   </div>
<!--l. 706--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-260005.3"></a><span 
class="cmbx-12">Discussion</span></span>
   The repair-key operation admits an interesting class of queries: Like
in Example&#x00A0;<a 
href="#x1-250032">5.3.2<!--tex4ht:ref: ex:twotosses --></a>, we can start with a probabilistic database of prior
probabilities, add further evidence (in Example&#x00A0;<a 
href="#x1-250032">5.3.2<!--tex4ht:ref: ex:twotosses --></a>, the result of the coin
tosses) and then compute interesting posterior probabilities. The adding of
further evidence may require extending the hypothesis space first. For
this, the repair-key operation is essential. Even though our goal is not to
update the database, we have to be able to introduce uncertainty just to be
able to model new evidence &#8211; say, experimental data. Many natural and
important probabilistic database queries cannot be expressed without
the repair-key operation. The coin tossing example was admittedly a
toy example (though hopefully easy to understand). Real applications
such as diagnosis or processing scientific data involve technically similar
questions.
<!--l. 715--><p class="indent" >   Regarding our desiderata, it is quite straightforward to see that probabilistic
WSA is generic (3): see also the proof for the non-probabilistic language in <span class="cite">[<a 
href="#XAKO07ISQL">4</a>]</span>. It
is clearly a data transformation query language (4) that supports powerful queries
for defining databases. The repair-key operation is our construct for uncertainty
introduction (5). The evaluation efficiency (1) of probabilistic WSA is
studied in Section&#x00A0;<a 
href="#x1-310005.5">5.5<!--tex4ht:ref: sect:theory --></a>. Expressiveness (2) is best demonstrated by the
ability of a language to satisfy many relevant use cases. While there are no
agreed upon expressiveness benchmarks for probabilistic databases yet, this
manual provides numerous examples that are closely related to natural use
cases.
<!--l. 723--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">5.4   </span> <a 
 id="x1-270005.4"></a>Representing Probabilistic Data</h3>
<!--l. 727--><p class="noindent" >This section discusses the method used for representing and storing probabilistic
data and correlations in MayBMS. We start by motivating the problem of finding
a practical representation system.
                                                                          

                                                                          
   <div class="newtheorem">
<!--l. 732--><p class="noindent" ><span class="head">
<span 
class="cmbx-12">Example</span><span 
class="cmbx-12">&#x00A0;5.4.1</span> </span><a 
 id="x1-270011"></a> Consider a census scenario, in which a large number of
individuals manually fill in forms. The data in these forms subsequently has
to be put into a database, but no matter whether this is done automatically
using OCR or by hand, some uncertainty may remain about the correct
values for some of the answers. Below are two simple filled in forms. Each one
contains the social security number, name, and marital status of one person.
<div class="center" 
>
<!--l. 738--><p class="noindent" >
<!--l. 739--><p class="noindent" ><img 
src="manual42x.png" alt="PIC" class="graphics" width="170.71652pt" height="139.29005pt" ><!--tex4ht:graphics  
name="manual42x.png" src="census.eps"  
--></div>
<!--l. 742--><p class="indent" >   The first person, Smith, seems to have checked marital status &#8220;single&#8221; after
first mistakenly checking &#8220;married&#8221;, but it could also be the opposite. The second
person, Brown, did not answer the marital status question. The social security
numbers also have several possible readings. Smith&#8217;s could be 185 or 785
(depending on whether Smith originally is from the US or from Europe) and
Brown&#8217;s may either be 185 or 186.
<!--l. 749--><p class="indent" >   In an SQL database, uncertainty can be managed using null values, using a
table
<div class="center" 
>
<!--l. 750--><p class="noindent" >
                                                                          

                                                                          
<div class="tabular"> <table id="TBL-27" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-27-1g"><col 
id="TBL-27-1"></colgroup><colgroup id="TBL-27-2g"><col 
id="TBL-27-2"><col 
id="TBL-27-3"><col 
id="TBL-27-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-27-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-27-1-1"  
class="td11"> (TID)  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-1-2"  
class="td11"> SSN  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-1-3"  
class="td11">   N     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-1-4"  
class="td11">  M   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-27-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-27-2-1"  
class="td11">   <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-2-2"  
class="td11"> null  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-2-3"  
class="td11"> Smith  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-2-4"  
class="td11"> null  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-27-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-27-3-1"  
class="td11">   <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-3-2"  
class="td11"> null  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-3-3"  
class="td11"> Brown  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-3-4"  
class="td11"> null  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-27-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-27-4-1"  
class="td11">        </td>
</tr></table></div></div>
<!--l. 760--><p class="indent" >   Using nulls, information is lost about the values considered possible for the
various fields. Moreover, it is not possible to express correlations such as
that, while social security numbers may be uncertain, no two distinct
individuals can have the same. In this example, we can exclude the case
that both Smith and Brown have social security number 185. Finally,
we cannot store probabilities for the various alternative possible worlds.
                                                                         <span 
class="lasy-10x-x-120">&#x25A1;</span>
   </div>
<!--l. 766--><p class="indent" >   This leads to three natural desiderata for a representation system: (*)
Expressiveness, that is, the power to represent all (relevant) probabilistic
databases, (*) succinctness, that is, space-efficient storage of the uncertain data,
and (*) efficient real-world query processing.
<!--l. 771--><p class="indent" >   Often there are many rather (but not quite) independent local alternatives in
probabilistic data, which multiply up to a very large number of possible worlds.
For example, the US census consists of many dozens of questions for about 300
million individuals. Suppose forms are digitized using OCR and the resulting data
contains just two possible readings for 0.1% of the answers before cleaning. Then,
there are on the order of 2<sup><span 
class="cmr-8">10</span><span 
class="cmmi-8">,</span><span 
class="cmr-8">000</span><span 
class="cmmi-8">,</span><span 
class="cmr-8">000</span></sup>  possible worlds, and each one will
take close to one Terabyte of data to store. Clearly, we need a way of
representing this data that is much better than a naive enumeration of possible
worlds.
<!--l. 780--><p class="indent" >   Also, the repair-key operator of probabilistic world-set algebra in general
causes an exponential increase in the number of possible worlds.
<!--l. 782--><p class="indent" >   There is a trade-off between succinctness on one hand and efficient processing
on the other. Computing confidence conf(<span 
class="cmmi-12">Q</span>) of conjunctive queries <span 
class="cmmi-12">Q </span>on
tuple-independent databases is #P-hard &#8211; one such hard query <span class="cite">[<a 
href="#Xdalvi07efficient">6</a>]</span> (in datalog
notation <span class="cite">[<a 
href="#XAHV95">1</a>]</span>) is
   <center class="math-display" >
<img 
src="manual43x.png" alt="Q &#x2190;  R (x),S (x, y),T(y).
" class="math-display" ></center>
<!--l. 787--><p class="nopar" > At the same time, much more expressive queries can be evaluated efficiently on
nonsuccinct representations (enumerations of possible worlds) <span class="cite">[<a 
href="#XAKO07ISQL">4</a>]</span>. Query
evaluation in probabilistic databases is not hard because of the presence of
probabilities, but because of the succinct storage of alternative possible worlds!
We can still have the goal of doing well in practice.
<!--l. 792--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-280005.4"></a><span 
class="cmbx-12">Conditional tables</span></span>
   MayBMS uses a purely relational representation system for probabilistic
databases called <span 
class="cmti-12">U-relational databases</span>, which is based on probabilistic versions of
the classical <span 
class="cmti-12">conditional tables </span>(c-tables) of the database literature <span class="cite">[<a 
href="#XIL1984">9</a>]</span>. Conditional
tables are a relational representation system based on the notion of <span 
class="cmti-12">labeled</span>
<span 
class="cmti-12">null values </span>or <span 
class="cmti-12">variables</span>, that is, null values that have a name. The name
makes it possible to use the same variable <span 
class="cmmi-12">x </span>in several fields of a database,
indicating that the value of <span 
class="cmmi-12">x </span>is unknown but must be the same in all
those fields in which <span 
class="cmmi-12">x </span>occurs. Tables with variables are also known as
<span 
class="cmti-12">v-tables</span>.
<!--l. 799--><p class="indent" >   Formally, c-tables are v-tables extended by a column for holding a
local condition. That is, each tuple of a c-table has a Boolean condition
constructed using &#8220;and&#8221;, &#8220;or&#8221;, and &#8220;not&#8221; from atomic conditions of the
form <span 
class="cmmi-12">x </span>= <span 
class="cmmi-12">c </span>or <span 
class="cmmi-12">x </span>= <span 
class="cmmi-12">y</span>, where <span 
class="cmmi-12">c </span>are constants and <span 
class="cmmi-12">x </span>and <span 
class="cmmi-12">y </span>are <span 
class="cmti-12">variables</span>.
Possible worlds are determined by functions <span 
class="cmmi-12">&#x03B8; </span>that map each variable that
occurs in at least one of the tuples or local conditions in the c-tables
of the database to a constant. The database in that possible world is
obtained by (1) selecting those tuples whose local condition <span 
class="cmmi-12">&#x03D5; </span>satisfies the
variable assignment <span 
class="cmmi-12">&#x03B8;</span>, i.e., that becomes true if each variable <span 
class="cmmi-12">x </span>in <span 
class="cmmi-12">&#x03D5; </span>is
replaced by <span 
class="cmmi-12">&#x03B8;</span>(<span 
class="cmmi-12">x</span>), (2) replacing all variables <span 
class="cmmi-12">y </span>in the value fields of these
tuples by <span 
class="cmmi-12">&#x03B8;</span>(<span 
class="cmmi-12">y</span>), and (3) projecting away the local condition column. For
example, the following c-table represents the possible worlds for the census
forms:
                                                                          

                                                                          
<div class="center" 
>
<!--l. 803--><p class="noindent" >
<div class="tabular"> <table id="TBL-28" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-28-1g"><col 
id="TBL-28-1"></colgroup><colgroup id="TBL-28-2g"><col 
id="TBL-28-2"></colgroup><colgroup id="TBL-28-3g"><col 
id="TBL-28-3"></colgroup><colgroup id="TBL-28-4g"><col 
id="TBL-28-4"></colgroup><colgroup id="TBL-28-5g"><col 
id="TBL-28-5"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-28-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-28-1-1"  
class="td11"> R  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-1-2"  
class="td11"> SSN  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-1-3"  
class="td11">   N     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-1-4"  
class="td11"> M  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-1-5"  
class="td11"> cond  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-28-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-28-2-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-2-2"  
class="td11"> 185  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-2-3"  
class="td11"> Smith  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-2-4"  
class="td11"> y  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-2-5"  
class="td11"> <span 
class="cmmi-12">x </span>= 1  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-28-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-28-3-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-3-2"  
class="td11"> 785  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-3-3"  
class="td11"> Smith  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-3-4"  
class="td11"> y  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-3-5"  
class="td11"> <span 
class="cmmi-12">x </span>= 2  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-28-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-28-4-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-4-2"  
class="td11"> 785  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-4-3"  
class="td11"> Smith  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-4-4"  
class="td11"> y  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-4-5"  
class="td11"> <span 
class="cmmi-12">x </span>= 3  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-28-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-28-5-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-5-2"  
class="td11"> 186  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-5-3"  
class="td11"> Brown  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-5-4"  
class="td11"> z  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-5-5"  
class="td11"> <span 
class="cmmi-12">x </span>= 1  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-28-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-28-6-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-6-2"  
class="td11"> 185  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-6-3"  
class="td11"> Brown  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-6-4"  
class="td11"> z  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-6-5"  
class="td11"> <span 
class="cmmi-12">x </span>= 2  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-28-7-"><td  style="white-space:nowrap; text-align:center;" id="TBL-28-7-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-7-2"  
class="td11"> 186  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-7-3"  
class="td11"> Brown  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-7-4"  
class="td11"> z  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-7-5"  
class="td11"> <span 
class="cmmi-12">x </span>= 3  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-28-8-"><td  style="white-space:nowrap; text-align:center;" id="TBL-28-8-1"  
class="td11">    </td>
</tr></table></div></div>
<!--l. 816--><p class="indent" >   The variables <span 
class="cmmi-12">y </span>and <span 
class="cmmi-12">z </span>have domains <span 
class="cmsy-10x-x-120">{</span>1<span 
class="cmmi-12">, </span>2<span 
class="cmsy-10x-x-120">} </span>and <span 
class="cmsy-10x-x-120">{</span>1<span 
class="cmmi-12">, </span>2<span 
class="cmmi-12">, </span>3<span 
class="cmmi-12">, </span>4<span 
class="cmsy-10x-x-120">}</span>, respectively and
encode the marital statuses of the two persons, and variable <span 
class="cmmi-12">x </span>with domain
<span 
class="cmsy-10x-x-120">{</span>1<span 
class="cmmi-12">, </span>2<span 
class="cmmi-12">, </span>3<span 
class="cmsy-10x-x-120">} </span>is used to encode the uniqueness of the social security constraint. Indeed,
under any valuation <span 
class="cmmi-12">&#x03B8; </span>the tuples having social security status of 185 do not have
their local conditions satisfied at the same time.
<!--l. 819--><p class="indent" >   Conditional tables are sometimes defined to include a notion of <span 
class="cmti-12">global</span>
<span 
class="cmti-12">condition</span>, which we do not use: We want each probabilistic database to
have at least one possible world. We can encode the same information as
above using the following c-table with global condition &#x03A6; = (<span 
class="cmmi-12">u</span><span 
class="cmmi-12">&#x2260;</span><span 
class="cmmi-12">v</span>), where
<span 
class="cmmi-12">u </span>: <span 
class="cmmi-12">dom</span>(<span 
class="cmmi-12">u</span>) = <span 
class="cmsy-10x-x-120">{</span>185<span 
class="cmmi-12">, </span>785<span 
class="cmsy-10x-x-120">}</span><span 
class="cmmi-12">,v </span>: <span 
class="cmmi-12">dom</span>(<span 
class="cmmi-12">v</span>) = <span 
class="cmsy-10x-x-120">{</span>185<span 
class="cmmi-12">, </span>186<span 
class="cmsy-10x-x-120">} </span>are the variables holding the
social security numbers:
<div class="center" 
>
<!--l. 822--><p class="noindent" >
<div class="tabular"> <table id="TBL-29" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-29-1g"><col 
id="TBL-29-1"></colgroup><colgroup id="TBL-29-2g"><col 
id="TBL-29-2"></colgroup><colgroup id="TBL-29-3g"><col 
id="TBL-29-3"></colgroup><colgroup id="TBL-29-4g"><col 
id="TBL-29-4"></colgroup><colgroup id="TBL-29-5g"><col 
id="TBL-29-5"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-29-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-29-1-1"  
class="td11"> R  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-1-2"  
class="td11"> SSN  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-1-3"  
class="td11">   N     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-1-4"  
class="td11"> M  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-1-5"  
class="td11"> cond  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-29-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-29-2-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-2-2"  
class="td11">  u   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-2-3"  
class="td11"> Smith  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-2-4"  
class="td11"> y  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-2-5"  
class="td11"> true  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-29-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-29-3-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-3-2"  
class="td11">  v    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-3-3"  
class="td11"> Brown  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-3-4"  
class="td11"> z  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-3-5"  
class="td11"> true  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-29-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-29-4-1"  
class="td11">    </td>
</tr></table></div></div>
<!--l. 832--><p class="indent" >   Conditional tables are a so-called <span 
class="cmti-12">strong representation system</span>: They are
closed under the application of relational algebra queries. The set of worlds
                                                                          

                                                                          
obtained by evaluating a relational algebra query in each possible world
represented by a conditional table can again be straightforwardly represented by a
conditional table. Moreover, the local conditions are in a sense the most natural
and simple formalism possible to represent the result of queries on data with
labeled nulls.
<!--l. 840--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-290005.4"></a><span 
class="cmbx-12">U-Relational Databases</span></span>
   In our model, probabilistic databases are finite sets of possible worlds with
probability weights. It follows that each variable naturally has a finite domain, the
set of values it can take across all possible worlds. This has several consequences.
First, variables can be considered <span 
class="cmti-12">finite random variables</span>. Second, only allowing
for variables to occur in local conditions, but not in attribute fields of the tuples,
means no restriction of expressiveness. Moreover, we may assume without loss of
generality that each atomic condition is of the form <span 
class="cmmi-12">x </span>= <span 
class="cmmi-12">c </span>(i.e., we never have to
compare variables).
<!--l. 850--><p class="indent" >   If we start with a c-table in which each local condition is a conjunction of no
more than <span 
class="cmmi-12">k </span>atomic conditions, then a positive relational algebra query on this
uncertain database will result in a c-table in which each local condition is a
conjunction of no more than <span 
class="cmmi-12">k</span><span 
class="cmsy-10x-x-120">&#x2032; </span>atoms, where <span 
class="cmmi-12">k</span><span 
class="cmsy-10x-x-120">&#x2032; </span>only depends on <span 
class="cmmi-12">k </span>and the query,
but not on the data. If <span 
class="cmmi-12">k </span>is small, it is reasonable to actually hard-wire it in the
schema, and represent local conditions by <span 
class="cmmi-12">k </span>pairs of columns to store atoms of the
form <span 
class="cmmi-12">x </span>= <span 
class="cmmi-12">c</span>.
<!--l. 852--><p class="indent" >   These are the main ideas of our representation system, U-relations. Random
variables are assumed independent in the <span 
class="cmti-12">current </span>MayBMS system, but as we will
see, this means no restriction of generality. Nevertheless, it is one goal of future
work to support graphical models for representing more correlated joint
probability distributions below our U-relations. This would allow us to represent
<span 
class="cmti-12">learned </span>distributions in the form of e.g.&#x00A0;Bayesian networks directly in the system
(without the need to map them to local conditions) and run queries on top,
representing the inferred correlations using local conditions. The latter seem to be
better suited for representing the incremental correlations constructed by
queries.
<!--l. 857--><p class="indent" >   One further idea employed in U-relational databases is to use vertical
                                                                          

                                                                          
partitioning for representing <span 
class="cmti-12">attribute-level uncertainty</span>, i.e., to allow to decompose
tuples in case several fields of a tuple are independently uncertain.
   <div class="newtheorem">
<!--l. 860--><p class="noindent" ><span class="head">
<span 
class="cmbx-12">Example</span><span 
class="cmbx-12">&#x00A0;5.4.2</span> </span><a 
 id="x1-290012"></a> The following set of tables is a U-relational database
representation for the census data scenario of Example&#x00A0;<a 
href="#x1-270011">5.4.1<!--tex4ht:ref: ex:census --></a>, extended by suitable
probabilities for the various alternative values the fields can take (represented by
table <span 
class="cmmi-12">W</span>).
<div class="center" 
>
<!--l. 865--><p class="noindent" >
<div class="tabular"> <table id="TBL-30" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-30-1g"><col 
id="TBL-30-1"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-30-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-30-1-1"  
class="td11"> <!--tex4ht:inline--><div class="tabular"> <table id="TBL-31" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-31-1g"><col 
id="TBL-31-1"></colgroup><colgroup id="TBL-31-2g"><col 
id="TBL-31-2"><col 
id="TBL-31-3"></colgroup><colgroup id="TBL-31-4g"><col 
id="TBL-31-4"></colgroup><colgroup id="TBL-31-5g"><col 
id="TBL-31-5"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-31-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-31-1-1"  
class="td11"><span 
class="cmmi-12">U</span><sub><span 
class="cmmi-8">R</span><span 
class="cmr-8">[</span><span 
class="cmmi-8">SSN</span><span 
class="cmr-8">]</span></sub></td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-1-2"  
class="td11">V</td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-1-3"  
class="td11">D</td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-1-4"  
class="td11">TID</td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-1-5"  
class="td11">SSN</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-31-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-31-2-1"  
class="td11">       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-2-2"  
class="td11"><span 
class="cmmi-12">x</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-2-3"  
class="td11">1</td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-2-4"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-2-5"  
class="td11"> 185 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-31-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-31-3-1"  
class="td11">       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-3-2"  
class="td11"><span 
class="cmmi-12">x</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-3-3"  
class="td11">2</td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-3-4"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-3-5"  
class="td11"> 785 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-31-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-31-4-1"  
class="td11">       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-4-2"  
class="td11"><span 
class="cmmi-12">y</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-4-3"  
class="td11">1</td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-4-4"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-4-5"  
class="td11"> 185 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-31-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-31-5-1"  
class="td11">       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-5-2"  
class="td11"><span 
class="cmmi-12">y</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-5-3"  
class="td11">2</td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-5-4"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-31-5-5"  
class="td11"> 186 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-31-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-31-6-1"  
class="td11">       </td></tr></table>                                                      </div> </td>
</tr><tr 
class="vspace" style="font-size:42.67912pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-30-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-30-2-1"  
class="td11"> <!--tex4ht:inline--><div class="tabular"> <table id="TBL-32" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-32-1g"><col 
id="TBL-32-1"></colgroup><colgroup id="TBL-32-2g"><col 
id="TBL-32-2"><col 
id="TBL-32-3"></colgroup><colgroup id="TBL-32-4g"><col 
id="TBL-32-4"></colgroup><colgroup id="TBL-32-5g"><col 
id="TBL-32-5"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-32-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-32-1-1"  
class="td11"><span 
class="cmmi-12">U</span><sub><span 
class="cmmi-8">R</span><span 
class="cmr-8">[</span><span 
class="cmmi-8">M</span><span 
class="cmr-8">]</span></sub></td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-1-2"  
class="td11">V</td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-1-3"  
class="td11">D</td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-1-4"  
class="td11">TID</td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-1-5"  
class="td11">M</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-32-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-32-2-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-2-2"  
class="td11"><span 
class="cmmi-12">v</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-2-3"  
class="td11">1</td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-2-4"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-2-5"  
class="td11"> 1 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-32-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-32-3-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-3-2"  
class="td11"><span 
class="cmmi-12">v</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-3-3"  
class="td11">2</td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-3-4"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-3-5"  
class="td11"> 2 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-32-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-32-4-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-4-2"  
class="td11"><span 
class="cmmi-12">w</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-4-3"  
class="td11">1</td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-4-4"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-4-5"  
class="td11"> 1 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-32-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-32-5-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-5-2"  
class="td11"><span 
class="cmmi-12">w</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-5-3"  
class="td11">2</td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-5-4"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-5-5"  
class="td11"> 2 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-32-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-32-6-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-6-2"  
class="td11"><span 
class="cmmi-12">w</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-6-3"  
class="td11">3</td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-6-4"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-6-5"  
class="td11"> 3 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-32-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-32-7-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-7-2"  
class="td11"><span 
class="cmmi-12">w</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-7-3"  
class="td11">4</td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-7-4"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-7-5"  
class="td11"> 4 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-32-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-32-8-1"  
class="td11">     </td></tr></table>                                                        </div> </td>
</tr></table>
                                                                          

                                                                          
</div> &#x00A0;     <!--tex4ht:inline--><div class="tabular"> <table id="TBL-33" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-33-1g"><col 
id="TBL-33-1"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-33-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-33-1-1"  
class="td11"> <!--tex4ht:inline--><div class="tabular"> <table id="TBL-34" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-34-1g"><col 
id="TBL-34-1"></colgroup><colgroup id="TBL-34-2g"><col 
id="TBL-34-2"></colgroup><colgroup id="TBL-34-3g"><col 
id="TBL-34-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-34-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-34-1-1"  
class="td11"><span 
class="cmmi-12">U</span><sub><span 
class="cmmi-8">R</span><span 
class="cmr-8">[</span><span 
class="cmmi-8">N</span><span 
class="cmr-8">]</span></sub></td><td  style="white-space:nowrap; text-align:center;" id="TBL-34-1-2"  
class="td11">TID</td><td  style="white-space:nowrap; text-align:center;" id="TBL-34-1-3"  
class="td11">  N   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-34-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-34-2-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-34-2-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-34-2-3"  
class="td11">Smith</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-34-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-34-3-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-34-3-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-34-3-3"  
class="td11">Brown</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-34-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-34-4-1"  
class="td11">     </td></tr></table>                                                        </div> </td>
</tr><tr 
class="vspace" style="font-size:28.45274pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-33-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-33-2-1"  
class="td11"> <!--tex4ht:inline--><div class="tabular"> <table id="TBL-35" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-35-1g"><col 
id="TBL-35-1"></colgroup><colgroup id="TBL-35-2g"><col 
id="TBL-35-2"><col 
id="TBL-35-3"></colgroup><colgroup id="TBL-35-4g"><col 
id="TBL-35-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-35-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-35-1-1"  
class="td11"><span 
class="cmmi-12">W</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-1-2"  
class="td11">V</td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-1-3"  
class="td11">D</td><td  style="white-space:nowrap; text-align:left;" id="TBL-35-1-4"  
class="td11">P  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-35-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-35-2-1"  
class="td11">   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-2-2"  
class="td11"><span 
class="cmmi-12">x</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-2-3"  
class="td11">1</td><td  style="white-space:nowrap; text-align:left;" id="TBL-35-2-4"  
class="td11">.4  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-35-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-35-3-1"  
class="td11">   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-3-2"  
class="td11"><span 
class="cmmi-12">x</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-3-3"  
class="td11">2</td><td  style="white-space:nowrap; text-align:left;" id="TBL-35-3-4"  
class="td11">.6  </td>
</tr><tr 
class="vspace" style="font-size:4.13335pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-35-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-35-4-1"  
class="td11">   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-4-2"  
class="td11"><span 
class="cmmi-12">y</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-4-3"  
class="td11">1</td><td  style="white-space:nowrap; text-align:left;" id="TBL-35-4-4"  
class="td11">.7  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-35-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-35-5-1"  
class="td11">   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-5-2"  
class="td11"><span 
class="cmmi-12">y</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-5-3"  
class="td11">2</td><td  style="white-space:nowrap; text-align:left;" id="TBL-35-5-4"  
class="td11">.3  </td>
</tr><tr 
class="vspace" style="font-size:4.13335pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-35-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-35-6-1"  
class="td11">   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-6-2"  
class="td11"><span 
class="cmmi-12">v</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-6-3"  
class="td11">1</td><td  style="white-space:nowrap; text-align:left;" id="TBL-35-6-4"  
class="td11">.8  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-35-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-35-7-1"  
class="td11">   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-7-2"  
class="td11"><span 
class="cmmi-12">v</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-7-3"  
class="td11">2</td><td  style="white-space:nowrap; text-align:left;" id="TBL-35-7-4"  
class="td11">.2  </td>
</tr><tr 
class="vspace" style="font-size:4.13335pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-35-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-35-8-1"  
class="td11">   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-8-2"  
class="td11"><span 
class="cmmi-12">w</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-8-3"  
class="td11">1</td><td  style="white-space:nowrap; text-align:left;" id="TBL-35-8-4"  
class="td11">.25</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-35-9-"><td  style="white-space:nowrap; text-align:left;" id="TBL-35-9-1"  
class="td11">   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-9-2"  
class="td11"><span 
class="cmmi-12">w</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-9-3"  
class="td11">2</td><td  style="white-space:nowrap; text-align:left;" id="TBL-35-9-4"  
class="td11">.25</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-35-10-"><td  style="white-space:nowrap; text-align:left;" id="TBL-35-10-1"  
class="td11">   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-10-2"  
class="td11"><span 
class="cmmi-12">w</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-10-3"  
class="td11">3</td><td  style="white-space:nowrap; text-align:left;" id="TBL-35-10-4"  
class="td11">.25</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-35-11-"><td  style="white-space:nowrap; text-align:left;" id="TBL-35-11-1"  
class="td11">   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-11-2"  
class="td11"><span 
class="cmmi-12">w</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-11-3"  
class="td11">4</td><td  style="white-space:nowrap; text-align:left;" id="TBL-35-11-4"  
class="td11">.25</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-35-12-"><td  style="white-space:nowrap; text-align:left;" id="TBL-35-12-1"  
class="td11">   </td></tr></table>                                                           </div> </td>
</tr></table></div></div>
</div>
<!--l. 923--><p class="indent" >   Formally, a U-relational database consists of a set of independent random
variables with finite domains (here, <span 
class="cmmi-12">x,y,v,w</span>), a set of U-relations, and a ternary
table <span 
class="cmmi-12">W </span>(the <span 
class="cmti-12">world-table</span>) for representing distributions. The <span 
class="cmmi-12">W </span>table stores, for
each variable, which values it can take and with what probability. The schema of
each U-relation consists of a <span 
class="cmti-12">set </span>of pairs (<span 
class="cmmi-12">V</span> <sub><span 
class="cmmi-8">i</span></sub><span 
class="cmmi-12">,D</span><sub><span 
class="cmmi-8">i</span></sub>) of <span 
class="cmti-12">condition columns</span>
representing variable assignments and a set of <span 
class="cmti-12">value columns </span>for representing the
data values of tuples.
<!--l. 930--><p class="indent" >   The semantics of U-relational databases is as follows. Each possible world is
identified by a valuation <span 
class="cmmi-12">&#x03B8; </span>that assigns one of the possible values to each variable.
The probability of the possible world is the product of weights of the values of the
variables. A tuple of a U-relation, stripped of its condition columns, is in a given
possible world if its variable assignments are consistent with <span 
class="cmmi-12">&#x03B8;</span>. Attribute-level
uncertainty is achieved through vertical decompositioning, so one of the value
columns is used for storing tuple ids and undoing the vertical decomposition on
demand.
   <div class="newtheorem">
                                                                          

                                                                          
<!--l. 940--><p class="noindent" ><span class="head">
<span 
class="cmbx-12">Example</span><span 
class="cmbx-12">&#x00A0;5.4.3</span> </span>Consider the U-relational database of Example&#x00A0;<a 
href="#x1-290012">5.4.2<!--tex4ht:ref: ex:urelation --></a> and
the possible world
   <center class="math-display" >
<img 
src="manual44x.png" alt="&#x03B8; = {x &#x21A6;&#x2192;  1,y &#x21A6;&#x2192;  2,v &#x21A6;&#x2192;  1,w &#x21A6;&#x2192;  1}.
" class="math-display" ></center>
<!--l. 945--><p class="nopar" > The probability weight of this world is <span 
class="cmmi-12">.</span>4 <span 
class="cmsy-10x-x-120">&#x22C5; </span><span 
class="cmmi-12">.</span>3 <span 
class="cmsy-10x-x-120">&#x22C5; </span><span 
class="cmmi-12">.</span>8 <span 
class="cmsy-10x-x-120">&#x22C5; </span><span 
class="cmmi-12">.</span>25 = <span 
class="cmmi-12">.</span>024. By removing all the
tuples whose condition columns are inconsistent with <span 
class="cmmi-12">&#x03B8; </span>and projecting away the
condition columns, we obtain the relations
<div class="center" 
>
<!--l. 949--><p class="noindent" >
<div class="tabular"> <table id="TBL-36" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-36-1g"><col 
id="TBL-36-1"></colgroup><colgroup id="TBL-36-2g"><col 
id="TBL-36-2"></colgroup><colgroup id="TBL-36-3g"><col 
id="TBL-36-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-36-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-36-1-1"  
class="td11"> <span 
class="cmmi-12">R</span>[<span 
class="cmmi-12">SSN</span>]  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-36-1-2"  
class="td11"> TID  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-36-1-3"  
class="td11"> SSN  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-36-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-36-2-1"  
class="td11">         </td><td  style="white-space:nowrap; text-align:left;" id="TBL-36-2-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-36-2-3"  
class="td11"> 185   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-36-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-36-3-1"  
class="td11">         </td><td  style="white-space:nowrap; text-align:left;" id="TBL-36-3-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-36-3-3"  
class="td11"> 186   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-36-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-36-4-1"  
class="td11">         </td>
</tr></table>
</div>   <!--tex4ht:inline--><div class="tabular"> <table id="TBL-37" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-37-1g"><col 
id="TBL-37-1"></colgroup><colgroup id="TBL-37-2g"><col 
id="TBL-37-2"></colgroup><colgroup id="TBL-37-3g"><col 
id="TBL-37-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-37-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-37-1-1"  
class="td11"> <span 
class="cmmi-12">R</span>[<span 
class="cmmi-12">M</span>]  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-37-1-2"  
class="td11"> TID  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-37-1-3"  
class="td11"> M  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-37-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-37-2-1"  
class="td11">       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-37-2-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-37-2-3"  
class="td11"> 1   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-37-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-37-3-1"  
class="td11">       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-37-3-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-37-3-3"  
class="td11"> 1   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-37-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-37-4-1"  
class="td11">       </td></tr></table>
</div>   <!--tex4ht:inline--><div class="tabular"> <table id="TBL-38" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-38-1g"><col 
id="TBL-38-1"></colgroup><colgroup id="TBL-38-2g"><col 
id="TBL-38-2"></colgroup><colgroup id="TBL-38-3g"><col 
id="TBL-38-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-38-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-38-1-1"  
class="td11"> <span 
class="cmmi-12">R</span>[<span 
class="cmmi-12">N</span>]  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-38-1-2"  
class="td11"> TID  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-38-1-3"  
class="td11"> N        </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-38-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-38-2-1"  
class="td11">       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-38-2-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-38-2-3"  
class="td11"> Smith  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-38-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-38-3-1"  
class="td11">       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-38-3-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-38-3-3"  
class="td11"> Brown  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-38-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-38-4-1"  
class="td11">       </td></tr></table>
</div></div>
<!--l. 978--><p class="noindent" >which are just a vertically decomposed version of <span 
class="cmmi-12">R </span>in the chosen possible world.
That is, <span 
class="cmmi-12">R </span>is <span 
class="cmmi-12">R</span>[<span 
class="cmmi-12">SSN</span>]<img 
src="manual45x.png" alt="&#x22B3;&#x22B2;"  class="bowtie" ><span 
class="cmmi-12">R</span>[<span 
class="cmmi-12">M</span>]<img 
src="manual46x.png" alt="&#x22B3;&#x22B2;"  class="bowtie" ><span 
class="cmmi-12">R</span>[<span 
class="cmmi-12">N</span>] in that possible world.                  <span 
class="lasy-10x-x-120">&#x25A1;</span>
   </div>
                                                                          

                                                                          
<!--l. 984--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-300005.4"></a><span 
class="cmbx-12">Properties of U-relations</span></span>
   U-relational databases are a <span 
class="cmti-12">complete </span>representation system for (finite)
probabilistic databases <span class="cite">[<a 
href="#XAJKO2008">3</a>]</span>. This means that any probabilistic database can be
represented in this formalism. In particular, it follows that U-relations are closed
under query evaluation using any generic query language, i.e., starting from a
represented database, the query result can again be represented as a U-relational
database. Completeness also implies that any (finite) correlation structure
among tuples can be represented, despite the fact that we currently assume
that the random variables that our correlations are constructed from
(using tuple conditions) are independent: The intuition that some form of
graphical model for finite distributions may be more powerful (i.e., able
to represent distributions that cannot be represented by U-relations) is
<span 
class="cmti-12">false</span>.
<!--l. 1000--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">5.5   </span> <a 
 id="x1-310005.5"></a>Conceptual Evaluation and Rewritings</h3>
<!--l. 1004--><p class="noindent" >This section gives a complete solution for efficiently evaluating a large fragment of
probabilistic world-set algebra using relational database technology. Then we
discuss the evaluation of the remaining operations of probabilistic WSA, namely
difference and tuple confidence. Finally, an overview of known worst-case
computational complexity results is given.
<!--l. 1007--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-320005.5"></a><span 
class="cmbx-12">Translating queries down to the representation relations</span></span>
   Let <span 
class="cmti-12">rep</span> be the <span 
class="cmti-12">representation function</span>, which maps a U-relational database to
the set of possible worlds it represents. Our goal is to give a reduction that maps
any positive relational algebra query <span 
class="cmmi-12">Q </span>over probabilistic databases represented as
U-relational databases <span 
class="cmti-12">T </span>to an equivalent positive relational algebra query <span class="overline"><span 
class="cmmi-12">Q</span></span> of
polynomial size such that
   <center class="math-display" >
<img 
src="manual47x.png" alt="    --            i    i
rep (Q(T )) = {Q(A  ) | A &#x2208; rep(T)}
" class="math-display" ></center>
<!--l. 1017--><p class="nopar" > where the <span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-41.png" alt="A" class="10-120x-x-41" /></span><sup><span 
class="cmmi-8">i</span></sup> are relational database instances (possible worlds) or, as a
commutative diagram,
<div class="center" 
>
<!--l. 1021--><p class="noindent" >
<!--l. 1022--><p class="noindent" >     <span 
class="cmmi-12">T</span>                                <span class="overline"><span 
class="cmmi-12">Q</span></span>(<span 
class="cmmi-12">T</span>)
<span 
class="cmsy-10x-x-120">{<img 
src="cmsy10-c-41.png" alt="A" class="10-120x-x-41" /></span><sup><span 
class="cmr-8">1</span></sup><span 
class="cmmi-12">,</span><span 
class="cmmi-12">&#x2026;</span><span 
class="cmmi-12">,</span><span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-41.png" alt="A" class="10-120x-x-41" /></span><sup><span 
class="cmmi-8">n</span></sup><span 
class="cmsy-10x-x-120">}</span>                  <span 
class="cmsy-10x-x-120">{</span><span 
class="cmmi-12">Q</span>(<span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-41.png" alt="A" class="10-120x-x-41" /></span><sup><span 
class="cmr-8">1</span></sup>)<span 
class="cmmi-12">,</span><span 
class="cmmi-12">&#x2026;</span><span 
class="cmmi-12">,Q</span>(<span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-41.png" alt="A" class="10-120x-x-41" /></span><sup><span 
class="cmmi-8">n</span></sup>)<span 
class="cmsy-10x-x-120">}</span><span 
class="cmti-12">rep</span>&#x02C6;<span 
class="cmmi-12">Q</span>&#x02C6;<span class="overline"><span 
class="cmmi-12">Q</span></span><span 
class="cmti-12">rep</span>
</div>
<!--l. 1035--><p class="indent" >   The following is such a reduction, which maps the operations of positive
relational algebra, poss, and repair-key to relational algebra over U-relational
representations: <div class="eqnarray">
   <center class="math-display" >
<img 
src="manual48x.png" alt=" [[R &#x00D7;  S]]  :=   &#x03C0;    ---   ---  ---          (
                (UR.VD&#x222A;US.VD )&#x2192; VD,sch(R),sch(S)
                 UR  &#x22B3;&#x22B2;UR.V-DconsistentwithUS.VD-US )
   [[&#x03C3; R ]]  :=   &#x03C3; (U  )
     &#x03D5;          &#x03D5;   R
   [[&#x03C0;&#x20D7;BR ]]  :=   &#x03C0;V-D,B&#x20D7;(R)

 [[R  &#x222A; S]]  :=   UR &#x222A; US
[[poss (R )]]  :=   &#x03C0;sch(R )(UR ).
                                                                          

                                                                          
" class="math-display" ></center>
</div>The consistency test for conditions can be expressed simply using Boolean
conditions (see Example&#x00A0;<a 
href="#x1-320032">5.5.2<!--tex4ht:ref: ex:proc_urel --></a>, and <span class="cite">[<a 
href="#XAJKO2008">3</a>]</span>). Note that the product operation, applied
to two U-relations of <span 
class="cmmi-12">k </span>and <span 
class="cmmi-12">l </span>(<span 
class="cmmi-12">V</span> <sub><span 
class="cmmi-8">i</span></sub><span 
class="cmmi-12">,D</span><sub><span 
class="cmmi-8">i</span></sub>) column pairs, respectively, returns a
U-relation with <span 
class="cmmi-12">k </span>+ <span 
class="cmmi-12">l </span>(<span 
class="cmmi-12">V</span> <sub><span 
class="cmmi-8">i</span></sub><span 
class="cmmi-12">,D</span><sub><span 
class="cmmi-8">i</span></sub>) column pairs.
<!--l. 1054--><p class="indent" >   For simplicity, let us assume that the elements of <span 
class="cmmi-12">&#x03C0;</span><sub><span 
class="cmsy-8">&#x27E8;</span><img 
src="manual49x.png" alt="&#x20D7;A"  class="vec" ><span 
class="cmsy-8">&#x27E9;</span></sub>(<span 
class="cmmi-12">U</span><sub><span 
class="cmmi-8">R</span></sub>) are not
yet used as variable names. Moreover, let us assume that the <span 
class="cmmi-12">B </span>value
column of <span 
class="cmmi-12">U</span><sub><span 
class="cmmi-8">R</span></sub>, which is to provide weights for the alternative values of the
columns <span 
class="cmmi-12">sch</span>(<span 
class="cmmi-12">R</span>) <span 
class="cmsy-10x-x-120">- </span>(<img 
src="manual50x.png" alt="A&#x20D7;"  class="vec" > <span 
class="cmsy-10x-x-120">&#x222A; </span><span 
class="cmmi-12">B</span>) for each tuple <img 
src="manual51x.png" alt="&#x20D7;a"  class="vec" > in <span 
class="cmmi-12">&#x03C0;</span><sub><span 
class="cmsy-8">&#x27E8;</span><img 
src="manual52x.png" alt="&#x20D7;A"  class="vec" ><span 
class="cmsy-8">&#x27E9;</span></sub>(<span 
class="cmmi-12">U</span><sub><span 
class="cmmi-8">R</span></sub>), are probabilities,
i.e., sum up to one for each <img 
src="manual53x.png" alt="&#x20D7;a"  class="vec" > and do not first have to be normalized as
described in the definition of the semantics of repair-key in Section&#x00A0;<a 
href="#x1-250005.3">5.3<!--tex4ht:ref: sect:pwsa --></a>. The
operation <span 
class="cmmi-12">S </span>:= repair-key<sub><img 
src="manual54x.png" alt="A&#x20D7;"  class="vec" ><span 
class="cmr-8">@</span><span 
class="cmmi-8">B</span></sub>(<span 
class="cmmi-12">R</span>) for complete relation <span 
class="cmmi-12">R </span>is translated
as
   <center class="math-display" >
<img 
src="manual55x.png" alt="US := &#x03C0;&#x27E8;&#x20D7;A&#x27E9;&#x2192;V,&#x27E8;(sch(R)-A&#x20D7;)-{B }&#x27E9;&#x2192;D,sch(R )UR
" class="math-display" ></center>
<!--l. 1060--><p class="nopar" > with
   <center class="math-display" >
<img 
src="manual56x.png" alt="W   :=  W &#x222A; &#x03C0;                            U  .
             &#x27E8;A&#x20D7;&#x27E9;&#x2192;V,&#x27E8;(sch(R)- &#x20D7;A)-{B}&#x27E9;&#x2192;D,B &#x2192;P   R
" class="math-display" ></center>
<!--l. 1066--><p class="nopar" > Here, <span 
class="cmsy-10x-x-120">&#x27E8;&#x22C5;&#x27E9; </span>turns tuples of values into atomic values that can be stored in single
fields.
<!--l. 1070--><p class="indent" >   That is, repair-key starting from a complete relation is just a projection/copying
of columns, even though we may create an exponential number of possible
worlds.
   <div class="newtheorem">
<!--l. 1079--><p class="noindent" ><span class="head">
<span 
class="cmbx-12">Example</span><span 
class="cmbx-12">&#x00A0;5.5.1</span> </span>Consider again the relation <span 
class="cmmi-12">R </span>of Example&#x00A0;<a 
href="#x1-250011">5.3.1<!--tex4ht:ref: ex:biased2 --></a>, which
represents information about tossing a biased coin twice, and the query
                                                                          

                                                                          
<span 
class="cmmi-12">S </span>:= repair-key<sub><span 
class="cmr-8">Toss</span><span 
class="cmr-8">@</span><span 
class="cmr-8">FProb</span></sub>(<span 
class="cmmi-12">R</span>). The result is
<div class="center" 
>
<!--l. 1085--><p class="noindent" >
<div class="tabular"> <table id="TBL-39" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-39-1g"><col 
id="TBL-39-1"></colgroup><colgroup id="TBL-39-2g"><col 
id="TBL-39-2"><col 
id="TBL-39-3"></colgroup><colgroup id="TBL-39-4g"><col 
id="TBL-39-4"><col 
id="TBL-39-5"><col 
id="TBL-39-6"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-39-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-39-1-1"  
class="td11"> <span 
class="cmmi-12">U</span><sub><span 
class="cmmi-8">S</span></sub>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-1-2"  
class="td11"> V  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-1-3"  
class="td11"> D  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-1-4"  
class="td11"> Toss  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-1-5"  
class="td11"> Face  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-1-6"  
class="td11"> FProb  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-39-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-39-2-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-2-2"  
class="td11"> 1  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-2-3"  
class="td11"> H  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-2-4"  
class="td11">  1    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-2-5"  
class="td11">  H   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-2-6"  
class="td11">   .4     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-39-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-39-3-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-3-2"  
class="td11"> 1  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-3-3"  
class="td11"> T  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-3-4"  
class="td11">  1    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-3-5"  
class="td11">  T   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-3-6"  
class="td11">   .6     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-39-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-39-4-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-4-2"  
class="td11"> 2  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-4-3"  
class="td11"> H  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-4-4"  
class="td11">  2    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-4-5"  
class="td11">  H   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-4-6"  
class="td11">   .4     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-39-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-39-5-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-5-2"  
class="td11"> 2  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-5-3"  
class="td11"> T  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-5-4"  
class="td11">  2    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-5-5"  
class="td11">  T   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-5-6"  
class="td11">   .6     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-39-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-39-6-1"  
class="td11">     </td>
</tr></table>
</div> &#x00A0;     <!--tex4ht:inline--><div class="tabular"> <table id="TBL-40" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-40-1g"><col 
id="TBL-40-1"></colgroup><colgroup id="TBL-40-2g"><col 
id="TBL-40-2"><col 
id="TBL-40-3"><col 
id="TBL-40-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-40-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-40-1-1"  
class="td11"> <span 
class="cmmi-12">W  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-1-2"  
class="td11"> V  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-1-3"  
class="td11"> D  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-1-4"  
class="td11"> P  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-40-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-40-2-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-2-2"  
class="td11"> 1  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-2-3"  
class="td11"> H  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-2-4"  
class="td11"> .4  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-40-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-40-3-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-3-2"  
class="td11"> 1  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-3-3"  
class="td11"> T  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-3-4"  
class="td11"> .6  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-40-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-40-4-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-4-2"  
class="td11"> 2  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-4-3"  
class="td11"> H  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-4-4"  
class="td11"> .4  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-40-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-40-5-1"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-5-2"  
class="td11"> 2  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-5-3"  
class="td11"> T  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-5-4"  
class="td11"> .6  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-40-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-40-6-1"  
class="td11">     </td></tr></table>
</div></div>
<!--l. 1106--><p class="noindent" >as a U-relational database.                                                                   <span 
class="lasy-10x-x-120">&#x25A1;</span>
   </div>
<!--l. 1111--><p class="indent" >   The projection technique only works if the relation that repair-key is applied
to is certain. However, this means no loss of generality (cf.&#x00A0;<span class="cite">[<a 
href="#XKoch2008-SO">12</a>]</span>, and see also
Example&#x00A0;<a 
href="#x1-250053">5.3.3<!--tex4ht:ref: ex:2 --></a>).
<!--l. 1114--><p class="indent" >   The next example demonstrates the application of the rewrite rules to compile
a query down to relational algebra on the U-relations.
   <div class="newtheorem">
<!--l. 1117--><p class="noindent" ><span class="head">
<span 
class="cmbx-12">Example</span><span 
class="cmbx-12">&#x00A0;5.5.2</span> </span><a 
 id="x1-320032"></a> We revisit our census example with U-relations <span 
class="cmmi-12">U</span><sub><span 
class="cmmi-8">R</span><span 
class="cmr-8">[</span><span 
class="cmmi-8">SSN</span><span 
class="cmr-8">]</span></sub>
and <span 
class="cmmi-12">U</span><sub><span 
class="cmmi-8">R</span><span 
class="cmr-8">[</span><span 
class="cmmi-8">N</span><span 
class="cmr-8">]</span></sub>. We ask for possible names of persons who have SSN 185,
   <center class="math-display" >
<img 
src="manual57x.png" alt="poss (&#x03C0;N (&#x03C3;SSN=185 (R))).
" class="math-display" ></center>
                                                                          

                                                                          
<!--l. 1123--><p class="nopar" > To undo the vertical partitioning, the query is evaluated as
   <center class="math-display" >
<img 
src="manual58x.png" alt="poss(&#x03C0;N (&#x03C3;SSN=185 (R [SSN  ] &#x22B3;&#x22B2; R[N ]))).
" class="math-display" ></center>
<!--l. 1128--><p class="nopar" > We rewrite the query using our rewrite rules into
   <center class="math-display" >
<img 
src="manual59x.png" alt="&#x03C0;N (&#x03C3;SSN=185 (UR [SSN ] &#x22B3;&#x22B2;&#x03C8;&#x2227;&#x03D5; UR[N])),
" class="math-display" ></center>
<!--l. 1133--><p class="nopar" > where <span 
class="cmmi-12">&#x03C8; </span>ensures that we only generate tuples that occur in some worlds,
   <center class="math-display" >
<img 
src="manual60x.png" alt="&#x03C8; := (UR [SSN ].V =  UR [N].V &#x21D2;  UR [SSN ].D =  UR [N].D ),
" class="math-display" ></center>
<!--l. 1139--><p class="nopar" > and <span 
class="cmmi-12">&#x03D5; </span>ensures that the vertical partitioning is correctly undone,
   <center class="math-display" >
<img 
src="manual61x.png" alt="&#x03D5; := (U      .T ID =  U    .TID ).
        R[SSN ]         R [N]
" class="math-display" ></center>
<!--l. 1143--><p class="nopar" ><!--l. 1147--><p class="indent" >                                                                         <span 
class="lasy-10x-x-120">&#x25A1;</span>
   </div>
<!--l. 1152--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-330005.5"></a><span 
class="cmbx-12">Properties of the relational-algebra reduction</span></span>
   The relational algebra rewriting down to positive relational algebra on
U-relations has a number of nice properties. First, since relational algebra has
PTIME (even AC<sub><span 
class="cmr-8">0</span></sub>) data complexity, the query language of positive relational
algebra, repair-key, and poss on probabilistic databases represented by U-relations
has the same. The rewriting is in fact a <span 
class="cmti-12">parsimonious translation</span>: The number of
algebra operations does not increase and each of the operations selection,
                                                                          

                                                                          
projection, join, and union remains of the same kind. Query plans are hardly more
complicated than the input queries. As a consequence, we were able to observe
that off-the-shelf relational database query optimizers do well in practice
<span class="cite">[<a 
href="#XAJKO2008">3</a>]</span>.
<!--l. 1161--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">5.6   </span> <a 
 id="x1-340005.6"></a>Asymptotic Efficiency</h3>
<!--l. 1164--><p class="noindent" >We have seen in the previous section that for all but two operations of
probabilistic world-set algebra, there is a very efficient solution that builds on
relational database technology. These remaining operations are confidence
computation and relational algebra difference.
<!--l. 1171--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-350005.6"></a><span 
class="cmbx-12">Approximate confidence computation</span></span>
   To compute the confidence in a tuple of data values occurring possibly in
several tuples of a U-relation, we have to compute the probability of the
disjunction of the local conditions of all these tuples. We have to eliminate
duplicate tuples because we are interested in the probability of the data tuples
rather than some abstract notion of tuple identity that is really an artifact of our
representation. That is, we have to compute the probability of a DNF, i.e.,
the sum of the weights of the worlds identified with valuations <span 
class="cmmi-12">&#x03B8; </span>of the
random variables such that the DNF becomes true under <span 
class="cmmi-12">&#x03B8;</span>. This problem is
#P-complete <span class="cite">[<a 
href="#XGGH1998">8</a>,&#x00A0;<a 
href="#Xdalvi07efficient">6</a>]</span>. The result is not the sum of the probabilities of the
individual conjunctive local conditions, because they may, intuitively,
&#8220;overlap&#8221;.
   <div class="newtheorem">
<!--l. 1179--><p class="noindent" ><span class="head">
<span 
class="cmbx-12">Example</span><span 
class="cmbx-12">&#x00A0;5.6.1</span> </span>Consider a U-relation with schema <span 
class="cmsy-10x-x-120">{</span><span 
class="cmmi-12">V,D</span><span 
class="cmsy-10x-x-120">} </span>(representing a
nullary relation) and two tuples <span 
class="cmsy-10x-x-120">&#x27E8;</span><span 
class="cmmi-12">x, </span>1<span 
class="cmsy-10x-x-120">&#x27E9;</span>, and <span 
class="cmsy-10x-x-120">&#x27E8;</span><span 
class="cmmi-12">y, </span>1<span 
class="cmsy-10x-x-120">&#x27E9;</span>, with the <span 
class="cmmi-12">W </span>relation from
Example&#x00A0;<a 
href="#x1-290012">5.4.2<!--tex4ht:ref: ex:urelation --></a>. Then the confidence in the nullary tuple <span 
class="cmsy-10x-x-120">&#x27E8;&#x27E9; </span>is Pr[<span 
class="cmmi-12">x</span><img 
src="manual62x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1 <span 
class="cmsy-10x-x-120">&#x2228;</span>
<span 
class="cmmi-12">y</span><img 
src="manual63x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1] = Pr[<span 
class="cmmi-12">x</span><img 
src="manual64x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1] + Pr[<span 
class="cmmi-12">y</span><img 
src="manual65x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1] <span 
class="cmsy-10x-x-120">-</span> Pr[<span 
class="cmmi-12">x</span><img 
src="manual66x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1 <span 
class="cmsy-10x-x-120">&#x2227; </span><span 
class="cmmi-12">y</span><img 
src="manual67x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1] = <span 
class="cmmi-12">.</span>82.                       <span 
class="lasy-10x-x-120">&#x25A1;</span>
                                                                          

                                                                          
   </div>
<!--l. 1189--><p class="indent" >   Confidence computation can be efficiently approximated by Monte Carlo
simulation <span class="cite">[<a 
href="#XGGH1998">8</a>,&#x00A0;<a 
href="#Xdalvi07efficient">6</a>,&#x00A0;<a 
href="#XKoch2008">13</a>]</span>. The technique is based on the Karp-Luby fully
polynomial-time randomized approximation scheme (FPRAS) for counting the
number of solutions to a DNF formula <span class="cite">[<a 
href="#XKL1983">10</a>,&#x00A0;<a 
href="#XKLM1989">11</a>,&#x00A0;<a 
href="#XDKLR2000">5</a>]</span>. There is an efficiently
computable unbiased estimator that in expectation returns the probability <span 
class="cmmi-12">p </span>of a
DNF of <span 
class="cmmi-12">n </span>clauses (i.e., the local condition tuples of a Boolean U-relation) such
that computing the average of a polynomial number of such Monte Carlo steps (=
calls to the Karp-Luby unbiased estimator) is an (<span 
class="cmmi-12">&#x03F5;,&#x03B4;</span>)-approximation for the
probability: If the average <img 
src="manual68x.png" alt="&#x02C6;p"  class="circ" > is taken over at least <span 
class="cmsy-10x-x-120">&#x2308;</span>3 <span 
class="cmsy-10x-x-120">&#x22C5;</span><span 
class="cmmi-12">n</span><span 
class="cmsy-10x-x-120">&#x22C5;</span> log(2<span 
class="cmmi-12">&#x2215;&#x03B4;</span>)<span 
class="cmmi-12">&#x2215;&#x03F5;</span><sup><span 
class="cmr-8">2</span></sup><span 
class="cmsy-10x-x-120">&#x2309; </span>Monte Carlo
steps, then Pr<span class="big"><img 
src="manual69x.png" alt="["  class="left" align="middle"></span><span 
class="cmsy-10x-x-120">|</span><span 
class="cmmi-12">p </span><span 
class="cmsy-10x-x-120">-</span><img 
src="manual70x.png" alt="&#x02C6;p"  class="circ" > <span 
class="cmsy-10x-x-120">|&#x2265; </span><span 
class="cmmi-12">&#x03F5; </span><span 
class="cmsy-10x-x-120">&#x22C5; </span><span 
class="cmmi-12">p</span><span class="big"><img 
src="manual71x.png" alt="]"  class="left" align="middle"></span> <span 
class="cmsy-10x-x-120">&#x2264; </span><span 
class="cmmi-12">&#x03B4;</span>. The paper <span class="cite">[<a 
href="#XDKLR2000">5</a>]</span> improves upon this by
determining smaller numbers (within a constant factor from optimal) of necessary
iterations to achieve an (<span 
class="cmmi-12">&#x03F5;,&#x03B4;</span>)-approximation.
<!--l. 1202--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-360005.6"></a><span 
class="cmbx-12">Avoiding the difference operation</span></span>
   Difference <span 
class="cmmi-12">R </span><span 
class="cmsy-10x-x-120">-</span><span 
class="cmmi-12">S </span>is conceptually simple on c-tables. Without loss of generality,
assume that <span 
class="cmmi-12">S </span>does not contain tuples <span 
class="cmsy-10x-x-120">&#x27E8;</span><img 
src="manual72x.png" alt="&#x20D7;a"  class="vec" ><span 
class="cmmi-12">,&#x03C8;</span><sub><span 
class="cmr-8">1</span></sub><span 
class="cmsy-10x-x-120">&#x27E9;</span><span 
class="cmmi-12">,</span><span 
class="cmmi-12">&#x2026;</span><span 
class="cmmi-12">,</span><span 
class="cmsy-10x-x-120">&#x27E8;</span><img 
src="manual73x.png" alt="&#x20D7;a"  class="vec" ><span 
class="cmmi-12">,&#x03C8;</span><sub><span 
class="cmmi-8">n</span></sub><span 
class="cmsy-10x-x-120">&#x27E9; </span>that are duplicates
if the local conditions are disregarded. (Otherwise, we replace them by
<span 
class="cmsy-10x-x-120">&#x27E8;</span><img 
src="manual74x.png" alt="&#x20D7;a"  class="vec" ><span 
class="cmmi-12">,&#x03C8;</span><sub><span 
class="cmr-8">1</span></sub> <span 
class="cmsy-10x-x-120">&#x2228;</span><img 
src="manual75x.png" alt="&#x22C5;&#x22C5;&#x22C5;"  class="@cdots" ><span 
class="cmsy-10x-x-120">&#x2228; </span><span 
class="cmmi-12">&#x03C8;</span><sub><span 
class="cmmi-8">n</span></sub><span 
class="cmsy-10x-x-120">&#x27E9;</span>.) For each tuple <span 
class="cmsy-10x-x-120">&#x27E8;</span><img 
src="manual76x.png" alt="&#x20D7;a"  class="vec" ><span 
class="cmmi-12">,&#x03D5;</span><span 
class="cmsy-10x-x-120">&#x27E9; </span>of <span 
class="cmmi-12">R</span>, if <span 
class="cmsy-10x-x-120">&#x27E8;</span><img 
src="manual77x.png" alt="&#x20D7;a"  class="vec" ><span 
class="cmmi-12">,&#x03C8;</span><span 
class="cmsy-10x-x-120">&#x27E9; </span>is in <span 
class="cmmi-12">S </span>then output
<span 
class="cmsy-10x-x-120">&#x27E8;</span><img 
src="manual78x.png" alt="&#x20D7;a"  class="vec" ><span 
class="cmmi-12">,&#x03D5; </span><span 
class="cmsy-10x-x-120">&#x2227;¬</span><span 
class="cmmi-12">&#x03C8;</span><span 
class="cmsy-10x-x-120">&#x27E9;</span>; otherwise, output <span 
class="cmsy-10x-x-120">&#x27E8;</span><img 
src="manual79x.png" alt="&#x20D7;a"  class="vec" ><span 
class="cmmi-12">,&#x03D5;</span><span 
class="cmsy-10x-x-120">&#x27E9;</span>. Testing whether a tuple is possible in the
result of a query involving difference is already NP-hard <span class="cite">[<a 
href="#XAKG1991">2</a>]</span>. For U-relations, we in
addition have to turn <span 
class="cmmi-12">&#x03D5; </span><span 
class="cmsy-10x-x-120">&#x2227;¬</span><span 
class="cmmi-12">&#x03C8; </span>into a DNF to represent the result as a
U-relation. This may lead to an exponentially large output and a very large
number of <img 
src="manual80x.png" alt="&#x20D7;V"  class="vec" ><img 
src="manual81x.png" alt="&#x20D7;D"  class="vec" > columns may be required to represent the conditions.
For these reasons, MayBMS currently does not implement the difference
operation.
<!--l. 1217--><p class="indent" >   In many practical applications, the difference operation can be avoided.
Difference is only hard on uncertain relations. On such relations, it can only lead
to displayable query results in queries that close the possible worlds semantics
using conf, computing a single certain relation. Probably the most important
application of the difference operation is for encoding universal constraints, for
example in data cleaning. But if the confidence operation is applied on top of a
universal query, there is a trick that will often allow to rewrite the query into an
                                                                          

                                                                          
existential one (which can be expressed in positive relational algebra plus conf,
without difference) <span class="cite">[<a 
href="#XKoch2008">13</a>]</span>.
   <div class="newtheorem">
<!--l. 1226--><p class="noindent" ><span class="head">
<span 
class="cmbx-12">Example</span><span 
class="cmbx-12">&#x00A0;5.6.2</span> </span><a 
 id="x1-360012"></a> The example uses the census scenario and the uncertain
relation <span 
class="cmmi-12">R</span>[<span 
class="cmmi-12">SSN</span>] with columns TID and SSS discussed earlier; below we will
call this relation just simply <span 
class="cmmi-12">R</span>. Consider the query of finding, for each TID
<span 
class="cmmi-12">t</span><sub><span 
class="cmmi-8">i</span></sub> and SSN <span 
class="cmmi-12">s</span>, the confidence in the statement that <span 
class="cmmi-12">s </span>is the correct SSN for
the individual associated with the tuple identified by <span 
class="cmmi-12">t</span><sub><span 
class="cmmi-8">i</span></sub>, assuming that social
security numbers uniquely identify individuals, that is, assuming that the
functional dependency <span 
class="cmmi-12">SSN </span><span 
class="cmsy-10x-x-120">&#x2192; </span><span 
class="cmmi-12">TID </span>(subsequently called <span 
class="cmmi-12">&#x03C8;</span>) holds. In other
words, the query asks, for each TID <span 
class="cmmi-12">t</span><sub><span 
class="cmmi-8">i</span></sub> and SSN <span 
class="cmmi-12">s</span>, to find the probability
Pr[<span 
class="cmmi-12">&#x03D5;</span><span 
class="cmsy-10x-x-120">&#x2223;</span><span 
class="cmmi-12">&#x03C8;</span>], where <span 
class="cmmi-12">&#x03D5;</span>(<span 
class="cmmi-12">t</span><sub><span 
class="cmmi-8">i</span></sub><span 
class="cmmi-12">,s</span>) = <span 
class="cmsy-10x-x-120">&#x2203;</span><span 
class="cmmi-12">t </span><span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span><span 
class="cmmi-12">R t.TID </span>= <span 
class="cmmi-12">t</span><sub><span 
class="cmmi-8">i</span></sub> <span 
class="cmsy-10x-x-120">&#x2227; </span><span 
class="cmmi-12">t.SSN </span>= <span 
class="cmmi-12">s. </span>Constraint <span 
class="cmmi-12">&#x03C8; </span>can
be thought of as a data cleaning constraint that ensures that the SSN fields
in no two distinct census forms (belonging to two different individuals) are
interpreted as the same number.
<!--l. 1244--><p class="indent" >   We compute the desired conditional probabilities, for each possible pair
of a TID and an SSN, as Pr[<span 
class="cmmi-12">&#x03D5;</span><span 
class="cmsy-10x-x-120">&#x2223;</span><span 
class="cmmi-12">&#x03C8;</span>] = Pr[<span 
class="cmmi-12">&#x03D5; </span><span 
class="cmsy-10x-x-120">&#x2227; </span><span 
class="cmmi-12">&#x03C8;</span>]<span 
class="cmmi-12">&#x2215;</span>Pr[<span 
class="cmmi-12">&#x03C8;</span>]<span 
class="cmmi-12">. </span>Here <span 
class="cmmi-12">&#x03D5; </span>is existential
(expressible in positive relational algebra) and <span 
class="cmmi-12">&#x03C8; </span>is an equality-generating
dependency (i.e., a special universal query) <span class="cite">[<a 
href="#XAHV95">1</a>]</span>. The trick is to turn relational
difference into the subtraction of probabilities, Pr[<span 
class="cmmi-12">&#x03D5;</span><span 
class="cmsy-10x-x-120">&#x2227;</span><span 
class="cmmi-12">&#x03C8;</span>] = Pr[<span 
class="cmmi-12">&#x03D5;</span>]<span 
class="cmsy-10x-x-120">-</span>Pr[<span 
class="cmmi-12">&#x03D5;</span><span 
class="cmsy-10x-x-120">&#x2227;¬</span><span 
class="cmmi-12">&#x03C8;</span>]
and  Pr[<span 
class="cmmi-12">&#x03C8;</span>]  =  1 <span 
class="cmsy-10x-x-120">-</span> Pr[<span 
class="cmsy-10x-x-120">¬</span><span 
class="cmmi-12">&#x03C8;</span>],  where  <span 
class="cmsy-10x-x-120">¬</span><span 
class="cmmi-12">&#x03C8;  </span>=  <span 
class="cmsy-10x-x-120">&#x2203;</span><span 
class="cmmi-12">t,t</span><span 
class="cmsy-10x-x-120">&#x2032; <img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span><span 
class="cmmi-12">R t.SSN  </span>=  <span 
class="cmmi-12">t</span><span 
class="cmsy-10x-x-120">&#x2032;</span><span 
class="cmmi-12">.SSN </span><span 
class="cmsy-10x-x-120">&#x2227;</span>
<span 
class="cmmi-12">t.TID</span><span 
class="cmmi-12">&#x2260;</span><span 
class="cmmi-12">t</span><span 
class="cmsy-10x-x-120">&#x2032;</span><span 
class="cmmi-12">.TID </span>is existential (with inequalities). Thus <span 
class="cmsy-10x-x-120">¬</span><span 
class="cmmi-12">&#x03C8; </span>and <span 
class="cmmi-12">&#x03D5; </span><span 
class="cmsy-10x-x-120">&#x2227;¬</span><span 
class="cmmi-12">&#x03C8; </span>are
expressible  in  positive  relational  algebra.  This  works  for  a  considerable
superset of the equality-generating dependencies <span class="cite">[<a 
href="#XKoch2008">13</a>]</span>, which in turn subsume
useful data cleaning constraints.
<!--l. 1259--><p class="indent" >   Let <span 
class="cmmi-12">R</span><sub><span 
class="cmsy-8">¬</span><span 
class="cmmi-8">&#x03C8;</span></sub> be the relational algebra expression for <span 
class="cmsy-10x-x-120">¬</span><span 
class="cmmi-12">&#x03C8;</span>,
   <center class="math-display" >
<img 
src="manual82x.png" alt="&#x03C0; &#x2205;(R  &#x22B3;&#x22B2;T ID=TID &#x2032;&#x2227;SSN &#x2044;=SSN &#x2032; &#x03C1;TID&#x2192;T ID&#x2032;;SSN &#x2192;SSN &#x2032;(R)),
" class="math-display" ></center>
<!--l. 1264--><p class="nopar" > and let <span 
class="cmmi-12">S </span>be <table 
class="multline-star"><tr><td><img 
src="manual83x.png" alt="                           (
&#x03C1;P&#x2192;P &#x03D5;(conf(R)) &#x22B3;&#x22B2; &#x03C1;P &#x2192;P&#x03D5;&#x2227;¬&#x03C8; conf(R &#x00D7;  R¬&#x03C8; ) &#x222A;
        &#x03C0;            (conf(R) - conf(R &#x00D7; R   ))) &#x00D7; &#x03C1;      (conf(R   )).
         TID,SSN,0&#x2192;P                       ¬&#x03C8;       P&#x2192;P ¬&#x03C8;        ¬&#x03C8;  " ></td></tr></table>The
overall example query can be expressed as
   <center class="math-display" >
<img 
src="manual84x.png" alt="T := &#x03C0;T ID,SSN,(P -P    )&#x2215;(1-P  )&#x2192;P (S).
                &#x03D5;  &#x03D5;&#x2227;¬&#x03C8;     ¬&#x03C8;
" class="math-display" ></center>
<!--l. 1284--><p class="nopar" > For the example table <span 
class="cmmi-12">R </span>given above, <span 
class="cmmi-12">S </span>and <span 
class="cmmi-12">T </span>are
<div class="center" 
>
<!--l. 1286--><p class="noindent" >
<div class="tabular"> <table id="TBL-41" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-41-1g"><col 
id="TBL-41-1"></colgroup><colgroup id="TBL-41-2g"><col 
id="TBL-41-2"><col 
id="TBL-41-3"><col 
id="TBL-41-4"><col 
id="TBL-41-5"><col 
id="TBL-41-6"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-41-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-41-1-1"  
class="td11"> <span 
class="cmmi-12">S </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-1-2"  
class="td11"> TID  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-1-3"  
class="td11"> SSN  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-1-4"  
class="td11"> <span 
class="cmmi-12">P</span><sub><span 
class="cmmi-8">&#x03D5;</span></sub>  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-1-5"  
class="td11"> <span 
class="cmmi-12">P</span><sub><span 
class="cmmi-8">&#x03D5;</span><span 
class="cmsy-8">&#x2227;¬</span><span 
class="cmmi-8">&#x03C8;</span></sub>  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-1-6"  
class="td11"> <span 
class="cmmi-12">P</span><sub><span 
class="cmsy-8">¬</span><span 
class="cmmi-8">&#x03C8;</span></sub>  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-41-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-41-2-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-2-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-2-3"  
class="td11"> 185   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-2-4"  
class="td11"> .4   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-2-5"  
class="td11"> .28      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-2-6"  
class="td11"> .28   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-41-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-41-3-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-3-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-3-3"  
class="td11"> 785   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-3-4"  
class="td11"> .6   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-3-5"  
class="td11"> 0        </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-3-6"  
class="td11"> .28   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-41-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-41-4-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-4-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-4-3"  
class="td11"> 185   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-4-4"  
class="td11"> .7   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-4-5"  
class="td11"> .28      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-4-6"  
class="td11"> .28   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-41-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-41-5-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-5-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-5-3"  
class="td11"> 186   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-5-4"  
class="td11"> .3   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-5-5"  
class="td11"> 0        </td><td  style="white-space:nowrap; text-align:left;" id="TBL-41-5-6"  
class="td11"> .28   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-41-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-41-6-1"  
class="td11">    </td>
</tr></table>
</div> &#x00A0;     <!--tex4ht:inline--><div class="tabular"> <table id="TBL-42" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-42-1g"><col 
id="TBL-42-1"></colgroup><colgroup id="TBL-42-2g"><col 
id="TBL-42-2"><col 
id="TBL-42-3"><col 
id="TBL-42-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-42-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-42-1-1"  
class="td11"> <span 
class="cmmi-12">T  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-1-2"  
class="td11"> TID  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-1-3"  
class="td11"> SSN  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-1-4"  
class="td11"> P     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-42-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-42-2-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-2-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-2-3"  
class="td11"> 185   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-2-4"  
class="td11"> 1/6   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-42-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-42-3-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-3-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">1</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-3-3"  
class="td11"> 785   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-3-4"  
class="td11"> 5/6   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-42-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-42-4-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-4-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-4-3"  
class="td11"> 185   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-4-4"  
class="td11"> 7/12  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-42-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-42-5-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-5-2"  
class="td11"> <span 
class="cmmi-12">t</span><sub><span 
class="cmr-8">2</span></sub>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-5-3"  
class="td11"> 186   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-42-5-4"  
class="td11"> 5/12  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-42-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-42-6-1"  
class="td11">    </td></tr></table>
</div></div>
</div>
<!--l. 1311--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-370005.6"></a><span 
class="cmbx-12">Complexity Overview</span></span>
                                                                          

                                                                          
   Figure&#x00A0;<a 
href="#x1-370012">5.2<!--tex4ht:ref: tab:complexity --></a> gives an overview over the known complexity results for the various
fragments of probabilistic WSA.
<!--l. 1317--><p class="indent" >   <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                          

                                                                          
<a 
 id="x1-370012"></a>
                                                                          

                                                                          
<div class="center" 
>
<!--l. 1318--><p class="noindent" >
<div class="tabular"> <table id="TBL-43" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-43-1g"><col 
id="TBL-43-1"></colgroup><colgroup id="TBL-43-2g"><col 
id="TBL-43-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-43-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-43-1-1"  
class="td11"> Language Fragment                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-43-1-2"  
class="td11"> Complexity    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-43-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-43-2-1"  
class="td11"> Pos.RA + repair-key + possible  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-43-2-2"  
class="td11"> <span 
class="cmbx-12">in AC0       </span></td>
</tr><tr 
class="vspace" style="font-size:1.55pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-43-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-43-3-1"  
class="td11"> RA + possible                        </td><td  style="white-space:nowrap; text-align:left;" id="TBL-43-3-2"  
class="td11"> <span 
class="cmbx-12">co-NP-hard </span></td>
</tr><tr 
class="vspace" style="font-size:1.55pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-43-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-43-4-1"  
class="td11"> Conjunctive queries + conf        </td><td  style="white-space:nowrap; text-align:left;" id="TBL-43-4-2"  
class="td11"> <span 
class="cmbx-12">#P-hard     </span></td>
</tr><tr 
class="vspace" style="font-size:1.55pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-43-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-43-5-1"  
class="td11"> Probabilistic WSA                   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-43-5-2"  
class="td11"> <span 
class="cmbx-12">in</span> <span 
class="cmbx-12">P</span><sup><span 
class="cmr-8">#</span><span 
class="cmmi-8">P</span> </sup>           </td>
</tr><tr 
class="vspace" style="font-size:2.58333pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-43-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-43-6-1"  
class="td11"> Pos.RA + repair-key + possible  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-43-6-2"  
class="td11">             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-43-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-43-7-1"  
class="td11"> + approx.conf + egds               </td><td  style="white-space:nowrap; text-align:left;" id="TBL-43-7-2"  
class="td11"> <span 
class="cmbx-12">in PTIME   </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-43-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-43-8-1"  
class="td11">                             </td>
</tr></table></div></div>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;5.2: </td><td  
class="content">Complexity results for (probabilistic) world-set algebra <span class="cite">[<a 
href="#XKochBook2008">14</a>]</span>. RA
denotes relational algebra.</td></tr></table><!--tex4ht:label?: x1-370012 -->
                                                                          

                                                                          
<!--l. 1345--><p class="indent" >   </td></tr></table></div><hr class="endfigure">
<!--l. 1348--><p class="indent" >   Difference <span class="cite">[<a 
href="#XAKG1991">2</a>]</span> and confidence computation <span class="cite">[<a 
href="#Xdalvi07efficient">6</a>]</span> independently make queries
NP-hard. Full probabilistic world-set algebra is essentially not harder than the
language of <span class="cite">[<a 
href="#Xdalvi07efficient">6</a>]</span>, even though it is substantially more expressive.
<!--l. 1351--><p class="indent" >   It is worth noting that repair-key by itself, despite the blowup of possible
worlds, does not make queries hard. For the language consisting of positive
relational algebra, repair-key, and poss, we have shown by construction that it has
PTIME complexity: We have given a positive relational algebra rewriting to
queries on the representations earlier in this section. Thus queries are even in the
highly parallelizable complexity class AC<sub><span 
class="cmr-8">0</span></sub>.
<!--l. 1353--><p class="indent" >   The final result in Figure&#x00A0;<a 
href="#x1-370012">5.2<!--tex4ht:ref: tab:complexity --></a> concerns the language consisting of the positive
relational algebra operations, repair-key, (<span 
class="cmmi-12">&#x03F5;,&#x03B4;</span>)-approximation of confidence
computation, and the generalized equality generating dependencies of <span class="cite">[<a 
href="#XKoch2008">13</a>]</span> for
which we can rewrite difference of uncertain relations to difference of confidence
values (see Example&#x00A0;<a 
href="#x1-360012">5.6.2<!--tex4ht:ref: ex:trick --></a>). The result is that queries of that language that close
the possible worlds semantics &#8211; i.e., that use conf to compute a certain relation &#8211;
are in PTIME overall.
                                                                          

                                                                          
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;6</span><br /><a 
 id="x1-380006"></a>The MayBMS Query and Update Language</h2>
   <h3 class="sectionHead"><span class="titlemark">6.1   </span> <a 
 id="x1-390006.1"></a>Language Overview</h3>
<!--l. 9--><p class="noindent" >This section describes the query and update language of MayBMS, which is based
on SQL. In fact, our language is a generalization of SQL on classical relational
databases. To simplify the presentation, a fragment of the full language supported
in MayBMS is presented here.
<!--l. 13--><p class="indent" >   The representation system used in MayBMS, U-relations, has as a special case
classical relational tables, that is, tables with no condition columns. We will call
these tables <span 
class="cmti-12">typed-certain (t-certain) tables </span>in this section. Tables that are not
t-certain are called uncertain. Note that this notion of certainty is purely
syntactic, and
   <center class="math-display" >
<img 
src="manual85x.png" alt="cert(R) = &#x03C0;sch(R )(&#x03C3;P =1(conf(R)))
" class="math-display" ></center>
<!--l. 18--><p class="nopar" > may well be equal to the projection of a U-relation <span 
class="cmmi-12">U</span><sub><span 
class="cmmi-8">R</span></sub> to its attribute
(non-condition) columns despite <span 
class="cmmi-12">R </span>not being t-certain according to this
definition.
<!--l. 21--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-400006.1"></a><span 
class="cmbx-12">Aggregates</span></span>
   In MayBMS, full SQL is supported on t-certain tables. Beyond t-certain
tables, some restrictions are in place to assure that query evaluation is feasible. In
particular, we do not support the standard SQL aggregates such as <span 
class="cmtt-12">sum </span>or <span 
class="cmtt-12">count</span>
on uncertain relations. This can be easily justified: In general, these aggregates
will produce exponentially many different numerical results in the various possible
worlds, and there is no way of representing these results efficiently. However,
MayBMS supports a different set of aggregate operations on uncertain relations.
These include the computations of <span 
class="cmti-12">expected </span>sums and counts (using aggregates
<span 
class="cmtt-12">esum </span>and <span 
class="cmtt-12">ecount</span>).
<!--l. 25--><p class="indent" >   Moreover, the confidence computation operation is an aggregate in the
MayBMS query language. This is a deviation from the language flavor of our
                                                                          

                                                                          
algebra, but there is a justification for this. The algebra presented earlier assumed
a set-based semantics for relations, where operations such as projections
automatically remove duplicates. In the MayBMS query language, just like in
SQL, duplicates have to be eliminated explicitly, and confidence is naturally an
aggregate that computes a single confidence value for each group of tuples that
agree on (a subset of) the non-condition columns. By using aggregation syntax for
<span 
class="cmtt-12">conf </span>and not supporting <span 
class="cmtt-12">select distinct </span>on uncertain relations, we avoid a
need for conditions beyond the special conjunctions that can be stored with each
tuple in U-relations.
<!--l. 32--><p class="indent" >   All supported aggregates on uncertain tables produce t-certain tables.
<!--l. 34--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-410006.1"></a><span 
class="cmbx-12">Duplicate tuples</span></span>
   SQL databases in general support multiset tables, i.e., tables in which there
may be duplicate tuples. There is no conceptual difficulty at all in supporting
multiset U-relations. In fact, since U-relations are just relations in which some
columns are interpreted to have a special meaning (conditions), just storing them
in a standard relational database management system which supports duplicates
in tables yields support for multiset U-relations.
<!--l. 37--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-420006.1"></a><span 
class="cmbx-12">Syntax</span></span>
   The MayBMS query language is compositional and built from uncertain and
t-certain queries. The uncertain queries are those that produce a possibly
uncertain relation (represented by a U-relation with more than zero <span 
class="cmmi-12">V</span>
and <span 
class="cmmi-12">D </span>columns). Uncertain queries can be constructed, inductively, from
t-certain queries, <span 
class="cmtt-12">select-from-where </span>queries over uncertain tables, the
multiset union of uncertain queries (using the SQL <span 
class="cmtt-12">union </span>construct), and
the <span 
class="cmtt-12">repair-key </span>and <span 
class="cmtt-12">pick-tuples </span>statements that can be specified as
follows
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;repair&#x00A0;key&#x00A0;&#x003C;attributes&#x003E;&#x00A0;in
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;(&#x003C;t-certain-query&#x003E;&#x00A0;|&#x00A0;&#x003C;t-certain-relation&#x003E;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;[weight&#x00A0;by&#x00A0;&#x003C;expression&#x003E;];
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;pick&#x00A0;tuples&#x00A0;from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x003C;t-certain-query&#x003E;&#x00A0;|&#x00A0;&#x003C;t-certain-relation&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;[independently]
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;[with&#x00A0;probability&#x00A0;&#x003C;expression&#x003E;];
</div>
<!--l. 49--><p class="nopar" > Note that <span 
class="cmtt-12">repair-key </span>is a query, rather than an update statement. Details on
these constructs can be found in Section&#x00A0;<a 
href="#x1-450006.2">6.2<!--tex4ht:ref: sec:langref --></a>, Language reference.
<!--l. 53--><p class="indent" >   The <span 
class="cmtt-12">select-from-where </span>queries may use any t-certain subqueries
in the conditions, plus uncertain subqueries in atomic conditions of the
form
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;&#x003C;tuple&#x003E;&#x00A0;in&#x00A0;&#x003C;uncertain-query&#x003E;
</div>
<!--l. 56--><p class="nopar" > that occur positively in the condition. (That is, if the condition is turned into
DNF, these literals are not negated.)
<!--l. 63--><p class="indent" >   The t-certain queries (i.e., queries that produce a t-certain table) are given
by
      <ul class="itemize1">
      <li class="itemize">all constructs of SQL on t-certain tables and t-certain subqueries, extended
      by a new aggregate
                                                                          

                                                                          
      <div class="verbatim">
      &#x00A0;&#x00A0;&#x00A0;argmax(&#x003C;argument-attribute&#x003E;,&#x00A0;&#x003C;value-attribute&#x003E;)
</div>
      <!--l. 69--><p class="nopar" > which outputs one of the <span 
class="cmtt-12">argument-attribute </span>values in the current
      group (determined by the group-by clause) whose tuples have a
      maximum <span 
class="cmtt-12">value-attribute </span>value within the group. Thus, this is
      the typical argmax construct from mathematics added as an SQL
      extension.
      </li>
      <li class="itemize"><span 
class="cmtt-12">select-from-where-group-by </span>on uncertain queries using the <span 
class="cmtt-12">possible</span>
      construct for computing possible tuples, or the aggregates <span 
class="cmtt-12">conf</span>, <span 
class="cmtt-12">esum</span>, and
      <span 
class="cmtt-12">ecount</span>, but none of the standard SQL aggregates. There is an exact and an
      approximate version of the <span 
class="cmtt-12">conf </span>aggregate. The latter takes two
      parameters <span 
class="cmmi-12">&#x03F5; </span>and <span 
class="cmmi-12">&#x03B4; </span>(see the earlier discussion of the Karp-Luby
      FPRAS).</li></ul>
<!--l. 78--><p class="indent" >   The aggregates <span 
class="cmtt-12">esum </span>and <span 
class="cmtt-12">ecount </span>compute expected sums and counts across
groups of tuples. While it may seem that these aggregates are at least as hard as
confidence computation (which is #P-hard), this is in fact not so. These
aggregates can be efficiently computed exploiting linearity of expectation. A
query
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;select&#x00A0;A,&#x00A0;esum(B)&#x00A0;from&#x00A0;R&#x00A0;group&#x00A0;by&#x00A0;A;
</div>
<!--l. 84--><p class="nopar" > is equivalent to a query
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;select&#x00A0;A,&#x00A0;sum(B&#x00A0;*&#x00A0;P)&#x00A0;from&#x00A0;R&#8217;&#x00A0;group&#x00A0;by&#x00A0;A;
</div>
<!--l. 88--><p class="nopar" > where <span 
class="cmtt-12">R&#8217; </span>is obtained from the U-relation of <span 
class="cmtt-12">R </span>by replacing each local condition
<span 
class="cmmi-12">V</span> <sub><span 
class="cmr-8">1</span></sub><span 
class="cmmi-12">,D</span><sub><span 
class="cmr-8">1</span></sub>, <span 
class="cmmi-12">&#x2026;</span> , <span 
class="cmmi-12">V</span> <sub><span 
class="cmmi-8">k</span></sub>, <span 
class="cmmi-12">D</span><sub><span 
class="cmmi-8">k</span></sub> by the probability Pr[<span 
class="cmmi-12">V</span> <sub><span 
class="cmr-8">1</span></sub> = <span 
class="cmmi-12">D</span><sub><span 
class="cmr-8">1</span></sub> <span 
class="cmsy-10x-x-120">&#x2227;</span><img 
src="manual86x.png" alt="&#x22C5;&#x22C5;&#x22C5;"  class="@cdots" ><span 
class="cmsy-10x-x-120">&#x2227; </span><span 
class="cmmi-12">V</span> <sub><span 
class="cmmi-8">k</span></sub> = <span 
class="cmmi-12">D</span><sub><span 
class="cmmi-8">k</span></sub>], not
eliminating duplicates. That is, expected sums can be computed efficiently tuple
by tuple, and only require to determine the probability of a conjunction, which is
easy, rather than a DNF of variable assignments as in the case of the <span 
class="cmtt-12">conf</span>
aggregate. The <span 
class="cmtt-12">ecount </span>aggregate is a special case of <span 
class="cmtt-12">esum </span>applied to a column of
ones.
   <div class="newtheorem">
<!--l. 97--><p class="noindent" ><span class="head">
<span 
class="cmbx-12">Example</span><span 
class="cmbx-12">&#x00A0;6.1.1</span> </span><a 
 id="x1-420011"></a> The query of Example&#x00A0;<a 
href="#x1-250032">5.3.2<!--tex4ht:ref: ex:twotosses --></a> can be expressed in the query
language of MayBMS as follows. Let <span 
class="cmtt-12">R </span>be <span 
class="cmtt-12">repair key in Coins weight by</span>
<span 
class="cmtt-12">Count </span>and let <span 
class="cmtt-12">S </span>be
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;R.Type,&#x00A0;Toss,&#x00A0;Face
&#x00A0;<br />from&#x00A0;(repair&#x00A0;key&#x00A0;Type,&#x00A0;Toss&#x00A0;in&#x00A0;(select&#x00A0;*&#x00A0;from&#x00A0;Faces,&#x00A0;Tosses)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;weight&#x00A0;by&#x00A0;FProb)&#x00A0;S0,&#x00A0;R
&#x00A0;<br />where&#x00A0;R.Type&#x00A0;=&#x00A0;S0.Type;
</div>
<!--l. 106--><p class="nopar" >
<!--l. 108--><p class="indent" >   It is not hard to verify that <span 
class="cmmi-12">&#x03C0;</span><sub><span 
class="cmr-8">Toss</span><span 
class="cmmi-8">,</span><span 
class="cmr-8">Face</span></sub>(<span 
class="cmmi-12">S</span>)<span 
class="cmmi-12">&#x2260;</span><span 
class="cmmi-12">Ev </span>exactly if there exist
tuples <img 
src="manual87x.png" alt="&#x20D7;s"  class="vec" > <span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span><span 
class="cmmi-12">S,</span><img 
src="manual88x.png" alt="&#x20D7;t"  class="vec" > <span 
class="cmsy-10x-x-120"><img 
src="cmsy10-c-32.png" alt="&#x2208;" class="10-120x-x-32" /> </span><span 
class="cmmi-12">Ev </span>such that <img 
src="manual89x.png" alt="&#x20D7;s"  class="vec" ><span 
class="cmmi-12">.</span>Toss = <img 
src="manual90x.png" alt="&#x20D7;t"  class="vec" > <span 
class="cmmi-12">.</span>Toss and <img 
src="manual91x.png" alt="&#x20D7;s"  class="vec" ><span 
class="cmmi-12">.</span>Face<span 
class="cmmi-12">&#x2260;</span><img 
src="manual92x.png" alt="&#x20D7;t"  class="vec" > <span 
class="cmmi-12">.</span>Face. Let <span 
class="cmtt-12">C</span>
be
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;S.Type&#x00A0;from&#x00A0;S,&#x00A0;Ev
&#x00A0;<br />where&#x00A0;S.Toss&#x00A0;=&#x00A0;Ev.Toss&#x00A0;and&#x00A0;S.Face&#x00A0;&#x003C;&#x003E;&#x00A0;Ev.Face;
</div>
<!--l. 116--><p class="nopar" >
<!--l. 118--><p class="indent" >   Then we can compute <span 
class="cmtt-12">Q </span>using the trick of Example&#x00A0;<a 
href="#x1-360012">5.6.2<!--tex4ht:ref: ex:trick --></a> as
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;Type,&#x00A0;(P1-P2)/(1-P3)&#x00A0;as&#x00A0;P
&#x00A0;<br />from&#x00A0;(select&#x00A0;Type,&#x00A0;conf()&#x00A0;as&#x00A0;P1&#x00A0;from&#x00A0;S&#x00A0;group&#x00A0;by&#x00A0;Type)&#x00A0;Q1,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;((select&#x00A0;Type,&#x00A0;conf()&#x00A0;as&#x00A0;P2&#x00A0;from&#x00A0;C&#x00A0;group&#x00A0;by&#x00A0;Type)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;union
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(select&#x00A0;Type,&#x00A0;0&#x00A0;as&#x00A0;P2&#x00A0;from&#x00A0;Coins)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;except
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(select&#x00A0;Type,&#x00A0;0&#x00A0;as&#x00A0;P2&#x00A0;from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(select&#x00A0;Type,&#x00A0;conf()&#x00A0;from&#x00A0;C&#x00A0;group&#x00A0;by&#x00A0;Type)&#x00A0;Dummy)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;))&#x00A0;Q2,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(select&#x00A0;conf()&#x00A0;as&#x00A0;P3&#x00A0;from&#x00A0;C)&#x00A0;Q3
&#x00A0;<br />where&#x00A0;Q1.Type&#x00A0;=&#x00A0;Q2.Type;
</div>
<!--l. 133--><p class="nopar" >
<!--l. 136--><p class="indent" >   The argmax aggregate can be used to compute maximum-a-posteriori
(MAP) and maximum-likelihood estimates. For example, the MAP coin
type
   <center class="math-display" >
<img 
src="manual93x.png" alt="argmaxType  Pr[evidence is twice heads &#x2227; coin type is Type ]
" class="math-display" ></center>
<!--l. 141--><p class="nopar" > can be computed as <span 
class="cmtt-12">select argmax(Type, P) from Q </span>because the normalizing
factor <span 
class="cmtt-12">(1-P3) </span>has no impact on argmax. Thus, the answer in this example is the
double-headed coin. (See table <span 
class="cmmi-12">Q </span>of Figure&#x00A0;<a 
href="#x1-250041">5.1<!--tex4ht:ref: fig:twotosses_tables --></a>: The fair coin has <span 
class="cmmi-12">P </span>= 1<span 
class="cmmi-12">&#x2215;</span>3, while
the double-headed coin has <span 
class="cmmi-12">P </span>= 2<span 
class="cmmi-12">&#x2215;</span>3.)
<!--l. 147--><p class="indent" >   The maximum likelihood estimate
   <center class="math-display" >
<img 
src="manual94x.png" alt="argmaxType Pr [evidence is twice heads | coin type is Type ]
" class="math-display" ></center>
                                                                          

                                                                          
<!--l. 150--><p class="nopar" > can be computed as
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;argmax(Q.Type,&#x00A0;Q.P/R&#8217;.P)
&#x00A0;<br />from&#x00A0;Q,&#x00A0;(select&#x00A0;Type,&#x00A0;conf()&#x00A0;as&#x00A0;P&#x00A0;from&#x00A0;R)&#x00A0;R&#8217;
&#x00A0;<br />where&#x00A0;Q.Type&#x00A0;=&#x00A0;R&#8217;.Type;
</div>
<!--l. 156--><p class="nopar" > Here, again, the result is 2headed, but this time with likelihood 1. (The fair coin
has likelihood 1/4).                                                                        <span 
class="lasy-10x-x-120">&#x25A1;</span>
   </div>
<!--l. 164--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-430006.1"></a><span 
class="cmbx-12">Supported Queries</span></span>
   MayBMS supports full SQL on t-certain tables. In addition it supports a large
subset of SQL on t-uncertain tables, with even more features supported when
fragments of the uncertain query involve t-certain subqueries. The following
restrictions apply:
      <ul class="itemize1">
      <li class="itemize">Exact aggregates and duplicate elimination using <span 
class="cmtt-12">distinct </span>in a select
      statement are supported as long as the from clause subqueries and the
      subqueries in the where condition are t-certain.
      </li>
      <li class="itemize">If a t-certain subquery Q in the where condition of a select statement
      contains references to t-uncertain tables, then the containing query is
      supported if Q is not correlated with it.
      </li>
      <li class="itemize">The set operations <span 
class="cmtt-12">except </span>and <span 
class="cmtt-12">union </span>with duplicate elimination are
      supported when both the left and the right argument are t-certain
      queries.
      </li>
      <li class="itemize"><span 
class="cmtt-12">repair-key </span>and <span 
class="cmtt-12">pick-tuples </span>are supported on t-certain queries.</li></ul>
                                                                          

                                                                          
<!--l. 178--><p class="indent" >   Restrictions on the update statements are discussed below.
<!--l. 180--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-440006.1"></a><span 
class="cmbx-12">Updates</span></span>
   MayBMS supports the usual schema modification and update statements of
SQL. In fact, our use of U-relations makes this quite easy. An insertion of the
form
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;insert&#x00A0;into&#x00A0;&#x003C;uncertain-table&#x003E;&#x00A0;(&#x003C;uncertain-query&#x003E;);
</div>
<!--l. 187--><p class="nopar" > is just the standard SQL insertion for tables we interpret as U-relations. Thus,
the table inserted into must have the right number (that is, a sufficient number) of
condition columns. Schema-modifying operations such as
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;create&#x00A0;table&#x00A0;&#x003C;uncertain-table&#x003E;&#x00A0;as&#x00A0;(&#x003C;uncertain-query&#x003E;);
</div>
<!--l. 192--><p class="nopar" > are similarly straightforward. A deletion
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;delete&#x00A0;from&#x00A0;&#x003C;uncertain-table&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;where&#x00A0;&#x003C;condition&#x003E;;
</div>
<!--l. 198--><p class="nopar" > admits conditions that refer to the attributes of the current tuple and may use
t-certain subqueries. One can also update an uncertain table with an update
statement
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;update&#x00A0;&#x003C;uncertain-table&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;set&#x00A0;&#x003C;attribute&#x003E;&#x00A0;=&#x00A0;&#x003C;expr&#x003E;&#x00A0;[,...]
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;where&#x00A0;&#x003C;condition&#x003E;;
</div>
<!--l. 205--><p class="nopar" > where the set list does not modify the condition columns and the where condition
satisfies the same conditions as that of the delete statement. MayBMS allows
users to insert a constant tuple by specifying values for the data columns in an
insert statement:
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;insert&#x00A0;into&#x00A0;&#x003C;uncertain-table&#x003E;&#x00A0;[&#x003C;attribute_list&#x003E;]&#x00A0;&#x003C;tuple&#x003E;;
</div>
<!--l. 209--><p class="nopar" >
<!--l. 212--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">6.2   </span> <a 
 id="x1-450006.2"></a>Language Reference</h3>
<!--l. 215--><p class="noindent" >We next discuss the extensions to SQL by MayBMS. For a description of the
standard SQL constructs please see the Postgres SQL language reference available
at
   <a 
href="http://www.postgresql.org/docs/8.3/interactive/sql-commands.html" class="url" ><span 
class="cmtt-12">http://www.postgresql.org/docs/8.3/interactive/sql-commands.html</span></a>
<!--l. 221--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.2.1   </span> <a 
 id="x1-460006.2.1"></a>repair-key</h4>
<!--l. 222--><p class="noindent" ><span 
class="cmbx-12">Syntax:</span>
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;repair&#x00A0;key&#x00A0;&#x003C;attributes&#x003E;&#x00A0;in
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;(&#x003C;t-certain-query&#x003E;&#x00A0;|&#x00A0;&#x003C;t-certain-relation&#x003E;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;[&#x00A0;weight&#x00A0;by&#x00A0;&#x003C;expression&#x003E;&#x00A0;]
</div>
<!--l. 227--><p class="nopar" >
<!--l. 229--><p class="noindent" ><span 
class="cmbx-12">Description: </span>The <span 
class="cmtt-12">repair-key </span>operation turns a <span 
class="cmti-12">t-certain-query </span>(or, as a special
case, a <span 
class="cmti-12">t-certain-relation</span>) into the set of worlds consisting of all possible
<span 
class="cmti-12">maximal repairs </span>of key <span 
class="cmmi-12">attributes</span>. A repair of key <img 
src="manual95x.png" alt="&#x20D7;A"  class="vec" > in relation <span 
class="cmmi-12">R </span>is a subset
of <span 
class="cmmi-12">R </span>for which <img 
src="manual96x.png" alt="A&#x20D7;"  class="vec" > is a key. We say that relation <span 
class="cmmi-12">R</span><span 
class="cmsy-10x-x-120">&#x2032; </span>is a <span 
class="cmti-12">maximal repair</span>
of a functional dependency for relation <span 
class="cmmi-12">R </span>if <span 
class="cmmi-12">R</span><span 
class="cmsy-10x-x-120">&#x2032; </span>is a maximal subset of
<span 
class="cmmi-12">R </span>which satisfies that functional dependency. The numerically-valued
<span 
class="cmmi-12">expression </span>is used for weighting the newly created alternative repairs. If
the <span 
class="cmtt-12">weight by </span>clause is omitted, a uniform probability distribution is
assumed among all tuples with the same key. Suppose there are <span 
class="cmmi-12">n </span>tuples
sharing the same key, each of them is associated with a probability of
1<span 
class="cmmi-12">&#x2215;n</span>. If the weight is specified by <span 
class="cmmi-12">expression</span>, the value of <span 
class="cmmi-12">expression</span>
will be the probability of the tuple before normalization. Suppose there
are <span 
class="cmmi-12">n </span>tuples sharing the same key, tuple <span 
class="cmmi-12">t</span><sub><span 
class="cmmi-8">i</span></sub> is associated with probability
<span 
class="cmmi-12">expression</span><sub><span 
class="cmmi-8">i</span></sub> / <span 
class="cmex-10x-x-120">&#x2211;</span>
  <sub><span 
class="cmmi-8">k</span><span 
class="cmr-8">=1</span></sub><sup><span 
class="cmmi-8">n</span></sup><span 
class="cmmi-12">expression</span><sub>
<span 
class="cmmi-8">k</span></sub>. In either case, the sum of the probabilities
among all tuples with the same key is 1. There will be an error message if
the value of <span 
class="cmmi-12">expression </span>in any tuple is negative. The tuples for which
probability is 0 are ignored and not included in any resulting possible
world.
<!--l. 248--><p class="indent" >   <span 
class="cmtt-12">repair-key </span>can be placed wherever a select statement is allowed in SQL. See
Section&#x00A0;<a 
href="#x1-250005.3">5.3<!--tex4ht:ref: sect:pwsa --></a> for more details on <span 
class="cmtt-12">repair-key</span>.
<!--l. 251--><p class="noindent" ><span 
class="cmbx-12">Example: </span>Suppose <span 
class="cmmi-12">Customer </span>is a certain relation with columns <span 
class="cmmi-12">ID </span>and <span 
class="cmmi-12">name</span>,
the following query performs a <span 
class="cmtt-12">repair-key </span>operation on column <span 
class="cmmi-12">ID </span>in
<span 
class="cmmi-12">Customer</span>:
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;repair&#x00A0;key&#x00A0;ID&#x00A0;in&#x00A0;Customer;
</div>
<!--l. 257--><p class="nopar" >
<!--l. 259--><p class="indent" >   Suppose <span 
class="cmmi-12">Accounts </span>is a certain relation with columns <span 
class="cmmi-12">ID </span>and <span 
class="cmmi-12">account</span>, the
following is an example of <span 
class="cmtt-12">repair-key </span>operation on column <span 
class="cmmi-12">ID </span>in the output of a
certain query:
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;repair&#x00A0;key&#x00A0;ID&#x00A0;in
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;(select&#x00A0;*&#x00A0;from&#x00A0;Customer&#x00A0;natural&#x00A0;join&#x00A0;Accounts);
</div>
<!--l. 264--><p class="nopar" >
<!--l. 268--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.2.2   </span> <a 
 id="x1-470006.2.2"></a>pick-tuples</h4>
<!--l. 269--><p class="noindent" ><span 
class="cmbx-12">Syntax:</span>
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;pick&#x00A0;tuples&#x00A0;from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;t-certain-query&#x003E;&#x00A0;|&#x00A0;&#x003C;t-certain-relation&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;[independently]
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;[with&#x00A0;probability&#x00A0;&#x003C;expression&#x003E;];
</div>
<!--l. 275--><p class="nopar" >
<!--l. 277--><p class="noindent" ><span 
class="cmbx-12">Description: </span>The <span 
class="cmtt-12">pick-tuples </span>operation generates the set of worlds
which can be obtained from a <span 
class="cmti-12">t-certain-query </span>or a <span 
class="cmti-12">t-certain-relation </span>by
selecting a subset of the tuples of that query or relation. In the current
version of MayBMS, the presence of <span 
class="cmtt-12">independently </span>does not affect query
evaluation. It is the default; in the future, MayBMS may be extended by other
options.
<!--l. 281--><p class="indent" >   By default, every tuple in a possible world is associated with probability 0.5. If
<span 
class="cmtt-12">with probability </span><span 
class="cmmi-12">expression </span>is specified, the numerical value of <span 
class="cmmi-12">expression </span>is
the probability of the tuple. Note that only values in (0,1] are valid. There will be
an error message if the value of <span 
class="cmmi-12">expression </span>is negative or larger than 1. Tuples for
which <span 
class="cmmi-12">expression </span>are 0 are ignored.
<!--l. 283--><p class="indent" >   <span 
class="cmtt-12">pick-tuples </span>can be placed wherever a select statement is allowed in
SQL.
<!--l. 285--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.2.3   </span> <a 
 id="x1-480006.2.3"></a>possible</h4>
<!--l. 286--><p class="noindent" ><span 
class="cmbx-12">Syntax:</span>
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;select&#x00A0;possible&#x00A0;&#x003C;attributes&#x003E;&#x00A0;from&#x00A0;&#x003C;query&#x003E;&#x00A0;|&#x00A0;&#x003C;relation&#x003E;;
</div>
<!--l. 289--><p class="nopar" >
<!--l. 291--><p class="noindent" ><span 
class="cmbx-12">Description: </span>The operation <span 
class="cmtt-12">possible </span>selects the set of tuples appearing in at
least one possible world. This construct is a shortcut for the query which selects
all distinct tuples with confidence greater than zero:
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;select&#x00A0;distinct&#x00A0;&#x003C;attributes&#x003E;&#x00A0;from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(select&#x00A0;&#x003C;attributes&#x003E;,&#x00A0;tconf()&#x00A0;as&#x00A0;conf&#x00A0;from&#x00A0;&#x003C;query&#x003E;&#x00A0;|&#x00A0;&#x003C;relation&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;where&#x00A0;conf&#x00A0;&#x003E;&#x00A0;0)&#x00A0;Q;
</div>
<!--l. 297--><p class="nopar" >
<!--l. 300--><p class="noindent" ><span 
class="cmbx-12">Example: </span>Suppose R and S are uncertain relations, the following query displays
distinct pairs (A,B) with positive probabilities.
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;possible&#x00A0;A,&#x00A0;B&#x00A0;from&#x00A0;R,&#x00A0;S;
</div>
<!--l. 304--><p class="nopar" >
<!--l. 307--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.2.4   </span> <a 
 id="x1-490006.2.4"></a>Confidence computation and approximate aggregates</h4>
<!--l. 309--><p class="noindent" ><span 
class="cmtt-12">argmax</span>, <span 
class="cmtt-12">conf</span>, <span 
class="cmtt-12">aconf</span>, <span 
class="cmtt-12">tconf</span>, <span 
class="cmtt-12">esum </span>and <span 
class="cmtt-12">ecount </span>are functions introduced by
MayBMS. Following is the summary of the functions. <br 
class="newline" />
   <div class="tabular"> <table id="TBL-44" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-44-1g"><col 
id="TBL-44-1"></colgroup><colgroup id="TBL-44-2g"><col 
id="TBL-44-2"></colgroup><colgroup id="TBL-44-3g"><col 
id="TBL-44-3"></colgroup><colgroup id="TBL-44-4g"><col 
id="TBL-44-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-44-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-44-1-1"  
class="td11"> <span 
class="cmr-10x-x-109">Name   </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-1-2"  
class="td11"> <span 
class="cmr-10x-x-109">Brief Description                                                 </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-1-3"  
class="td11"> <span 
class="cmr-10x-x-109">Type        </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-1-4"  
class="td11"> <span 
class="cmr-10x-x-109">#Args  </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-44-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-44-2-1"  
class="td11"> <span 
class="cmr-10x-x-109">argmax  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-2-2"  
class="td11"> <span 
class="cmr-10x-x-109">Return the argument with the maximum value.         </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-2-3"  
class="td11"> <span 
class="cmr-10x-x-109">Aggregate  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-2-4"  
class="td11"> <span 
class="cmr-10x-x-109">2         </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-44-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-44-3-1"  
class="td11"> <span 
class="cmr-10x-x-109">conf      </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-3-2"  
class="td11"> <span 
class="cmr-10x-x-109">Return the exact confidence of distinct tuples.           </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-3-3"  
class="td11"> <span 
class="cmr-10x-x-109">Aggregate  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-3-4"  
class="td11"> <span 
class="cmr-10x-x-109">0         </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-44-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-44-4-1"  
class="td11"> <span 
class="cmr-10x-x-109">aconf    </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-4-2"  
class="td11"> <span 
class="cmr-10x-x-109">Return the approximate confidence of distinct tuples.  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-4-3"  
class="td11"> <span 
class="cmr-10x-x-109">Aggregate  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-4-4"  
class="td11"> <span 
class="cmr-10x-x-109">2         </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-44-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-44-5-1"  
class="td11"> <span 
class="cmr-10x-x-109">tconf     </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-5-2"  
class="td11"> <span 
class="cmr-10x-x-109">Return the exact confidence of tuples.                      </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-5-3"  
class="td11"> <span 
class="cmr-10x-x-109">Scalar       </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-5-4"  
class="td11"> <span 
class="cmr-10x-x-109">0         </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-44-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-44-6-1"  
class="td11"> <span 
class="cmr-10x-x-109">esum     </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-6-2"  
class="td11"> <span 
class="cmr-10x-x-109">Return the expected sum over distinct tuples.            </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-6-3"  
class="td11"> <span 
class="cmr-10x-x-109">Aggregate  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-6-4"  
class="td11"> <span 
class="cmr-10x-x-109">1         </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-44-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-44-7-1"  
class="td11"> <span 
class="cmr-10x-x-109">ecount   </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-7-2"  
class="td11"> <span 
class="cmr-10x-x-109">Return the expected count over distinct tuples.          </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-7-3"  
class="td11"> <span 
class="cmr-10x-x-109">Aggregate  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-44-7-4"  
class="td11"> <span 
class="cmr-10x-x-109">0 or 1   </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-44-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-44-8-1"  
class="td11">        </td> </tr></table>
</div>
<!--l. 327--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">6.2.4.1   </span> <a 
 id="x1-500006.2.4.1"></a>argmax(argument-attribute, value-attribute)</h5>
<!--l. 329--><p class="noindent" >Outputs an <span 
class="cmtt-12">argument-attribute </span>value in the current group (determined by the
group-by clause) whose tuples have a maximum <span 
class="cmtt-12">value-attribute </span>value
within the group. If there are several tuples sharing the same maximum
<span 
class="cmtt-12">value-attribute </span>value with different <span 
class="cmtt-12">argument-attribute </span>values, an arbitrary
value among them is returned. For example,
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;location,&#x00A0;argmax(date,&#x00A0;temperature)
&#x00A0;<br />from&#x00A0;weather_reports
&#x00A0;<br />group&#x00A0;by&#x00A0;location;
</div>
<!--l. 334--><p class="nopar" > retrieves one of the dates with the highest temperature for each location.
<!--l. 337--><p class="indent" >   <span 
class="cmtt-12">argmax </span>can be used on all relations and queries.
<!--l. 339--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">6.2.4.2   </span> <a 
 id="x1-510006.2.4.2"></a>conf()</h5>
<!--l. 341--><p class="noindent" ><span 
class="cmbx-12">Syntax:</span>
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;&#x003C;attribute&#x00A0;|&#x00A0;conf()&#x003E;&#x00A0;[,&#x00A0;...]
&#x00A0;<br />from&#x00A0;&#x003C;query&#x003E;&#x00A0;|&#x00A0;&#x003C;relation&#x003E;
&#x00A0;<br />group&#x00A0;by&#x00A0;&#x003C;attributes&#x003E;;
</div>
<!--l. 346--><p class="nopar" >
<!--l. 348--><p class="noindent" ><span 
class="cmbx-12">Description: </span>Computes for each possible <span 
class="cmti-12">distinct </span>tuple of attribute values of the
target list that occurs in an uncertain relation in at least one possible world, the
sum of the probabilities of the worlds in which it occurs. <span 
class="cmtt-12">conf </span>can only be used on
a t-uncertain query or a t-uncertain relation and the output of the query is a
t-certain relation.
<!--l. 351--><p class="noindent" ><span 
class="cmbx-12">Example: </span>Suppose weather_forecast is an uncertain relation storing information
regarding weather prediction, the following query computes the probability of
each weather condition for each location:
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;location,&#x00A0;weather,&#x00A0;conf()
&#x00A0;<br />from&#x00A0;weather_forecast
&#x00A0;<br />group&#x00A0;by&#x00A0;location,&#x00A0;weather;
</div>
<!--l. 357--><p class="nopar" >
<!--l. 359--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">6.2.4.3   </span> <a 
 id="x1-520006.2.4.3"></a>tconf()</h5>
<!--l. 360--><p class="noindent" ><span 
class="cmbx-12">Syntax:</span>
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;&#x003C;attribute&#x00A0;|&#x00A0;tconf()&#x003E;&#x00A0;[,&#x00A0;...]
&#x00A0;<br />from&#x00A0;&#x003C;query&#x003E;&#x00A0;|&#x00A0;&#x003C;relation&#x003E;;
</div>
<!--l. 364--><p class="nopar" >
<!--l. 366--><p class="noindent" ><span 
class="cmbx-12">Description: </span>Computes for each possible tuple the sum of the probabilities of
the worlds where it appears. <span 
class="cmmi-12">tconf</span>() is different from <span 
class="cmmi-12">conf</span>() in that it
does not eliminate duplicates. <span 
class="cmtt-12">tconf </span>can only be used on a t-uncertain
query or a t-uncertain relation and the output of the query is a t-certain
relation.
<!--l. 369--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">6.2.4.4   </span> <a 
 id="x1-530006.2.4.4"></a>aconf(<span 
class="cmmi-12">&#x03F5;</span>, <span 
class="cmmi-12">&#x03B4;</span>)</h5>
<!--l. 371--><p class="noindent" ><span 
class="cmbx-12">Syntax:</span>
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;&#x003C;attribute&#x00A0;|&#x00A0;aconf(&#x003C;epsilon&#x003E;,&#x00A0;&#x003C;delta&#x003E;)&#x003E;&#x00A0;[,&#x00A0;...]
&#x00A0;<br />from&#x00A0;&#x003C;query&#x003E;&#x00A0;|&#x00A0;&#x003C;relation&#x003E;
&#x00A0;<br />group&#x00A0;by&#x00A0;&#x003C;attributes&#x003E;;
</div>
<!--l. 376--><p class="nopar" >
<!--l. 378--><p class="noindent" ><span 
class="cmbx-12">Description: </span>Computes for each possible <span 
class="cmti-12">distinct </span>tuples of the target list that
occurs in at least one possible world, the <span 
class="cmmi-12">approximate </span>sum of the probabilities of
the worlds in which it occurs. Let <span 
class="cmmi-12">p </span>be the exact sum (computed by <span 
class="cmtt-12">conf</span>) and <img 
src="manual97x.png" alt="&#x02C6;p"  class="circ" >
be the approximate sum (computed by <span 
class="cmtt-12">aconf</span>), the approximation has the
following property:
<!--l. 381--><p class="indent" >   Pr<span class="big"><img 
src="manual98x.png" alt="["  class="left" align="middle"></span><span 
class="cmsy-10x-x-120">|</span><span 
class="cmmi-12">p </span><span 
class="cmsy-10x-x-120">-</span><img 
src="manual99x.png" alt="&#x02C6;p"  class="circ" > <span 
class="cmsy-10x-x-120">|&#x2265; </span><span 
class="cmmi-12">&#x03F5; </span><span 
class="cmsy-10x-x-120">&#x22C5; </span><span 
class="cmmi-12">p</span><span class="big"><img 
src="manual100x.png" alt="]"  class="left" align="middle"></span> <span 
class="cmsy-10x-x-120">&#x2264; </span><span 
class="cmmi-12">&#x03B4;</span>.
<!--l. 383--><p class="indent" >   See the earlier discussion of the Karp-Luby FPRAS for more details. <span 
class="cmtt-12">aconf</span>
can only be used on a t-uncertain query or a t-uncertain relation and the output
of the query is a t-certain relation.
<!--l. 385--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">6.2.4.5   </span> <a 
 id="x1-540006.2.4.5"></a>esum and ecount</h5>
<!--l. 387--><p class="noindent" ><span 
class="cmbx-12">Syntax:</span>
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;&#x003C;attribute&#x00A0;|&#x00A0;esum(&#x003C;attribute&#x003E;)&#x00A0;|&#x00A0;ecount()&#x003E;&#x00A0;[,&#x00A0;...]
&#x00A0;<br />from&#x00A0;&#x003C;query&#x003E;&#x00A0;|&#x00A0;&#x003C;relation&#x003E;
&#x00A0;<br />group&#x00A0;by&#x00A0;&#x003C;attributes&#x003E;;
</div>
<!--l. 392--><p class="nopar" >
<!--l. 394--><p class="noindent" ><span 
class="cmbx-12">Description: </span><span 
class="cmtt-12">esum </span>and <span 
class="cmtt-12">ecount </span>compute expected sum and count, respectively.
<span 
class="cmtt-12">ecount </span>can take zero or one argument, and the number of arguments does not
affect the results. <span 
class="cmtt-12">esum </span>and <span 
class="cmtt-12">ecount </span>can only be used on a t-uncertain
query or a t-uncertain relation and the output of the query is a t-certain
relation.
<!--l. 397--><p class="noindent" ><span 
class="cmbx-12">Example: </span>The following query computes the expected total rainfall of seven days
for each location:
                                                                          

                                                                          
   <div class="verbatim">
select&#x00A0;location,&#x00A0;esum(rainfall)
&#x00A0;<br />from&#x00A0;rainfall_forecast
&#x00A0;<br />where&#x00A0;date&#x00A0;&#x003E;=&#x00A0;&#8217;2010-10-01&#8217;&#x00A0;and&#x00A0;date&#x00A0;&#x003C;=&#x00A0;&#8217;2010-10-07&#8217;
&#x00A0;<br />group&#x00A0;by&#x00A0;location;
</div>
<!--l. 404--><p class="nopar" >
                                                                          

                                                                          
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;7</span><br /><a 
 id="x1-550007"></a>MayBMS Internals</h2>
<!--l. 11--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-560007"></a><span 
class="cmbx-12">Representations, relational encoding, and query optimization</span></span>
   Our representation system, U-relations, is basically implemented as described
earlier, with one small exception. With each pair of columns <span 
class="cmmi-12">V</span> <sub><span 
class="cmmi-8">i</span></sub>, <span 
class="cmmi-12">D</span><sub><span 
class="cmmi-8">i</span></sub> in the
condition, we also store a column <span 
class="cmmi-12">P</span><sub><span 
class="cmmi-8">i</span></sub> for the probability weight of alternative <span 
class="cmmi-12">D</span><sub><span 
class="cmmi-8">i</span></sub>
for variable <span 
class="cmmi-12">V</span> <sub><span 
class="cmmi-8">i</span></sub>, straight from the <span 
class="cmmi-12">W </span>relation. While the operations of relational
algebra, as observed earlier, do not use probability values, confidence computation
does. This denormalization (the extension by <span 
class="cmmi-12">P</span><sub><span 
class="cmmi-8">i</span></sub> columns) removes the need to
look up any probabilities in the <span 
class="cmmi-12">W </span>table in our exact confidence computation
algorithms.
<!--l. 15--><p class="indent" >   Our experiments show that the relational encoding of positive relational
algebra which is possible for U-relations is so simple &#8211; it is a parsimonious
transformation, i.e., the number of relational algebra operations is not increased &#8211;
that the standard Postgres query optimizer actually does well at finding good
query plans (see <span class="cite">[<a 
href="#XAJKO2008">3</a>]</span>).
<!--l. 18--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-570007"></a><span 
class="cmbx-12">Approximate confidence computation</span></span>
   MayBMS implements both an approximation algorithm and several exact
algorithms for confidence computation. The approximation algorithm is a
combination of the Karp-Luby unbiased estimator for DNF counting <span class="cite">[<a 
href="#XKL1983">10</a>,&#x00A0;<a 
href="#XKLM1989">11</a>]</span> in a
modified version adapted for confidence computation in probabilistic databases
(cf.&#x00A0;e.g.&#x00A0;<span class="cite">[<a 
href="#XKoch2008">13</a>]</span>) and the Dagum-Karp-Luby-Ross optimal algorithm for Monte Carlo
estimation <span class="cite">[<a 
href="#XDKLR2000">5</a>]</span>. The latter is based on sequential analysis and determines the
number of invocations of the Karp-Luby estimator needed to achieve the required
bound by running the estimator a small number of times to estimate its mean and
variance. We actually use the probabilistic variant of a version of the Karp-Luby
estimator described in the book <span class="cite">[<a 
href="#XVazirani2001">17</a>]</span> which computes fractional estimates that
have smaller variance than the zero-one estimates of the classical Karp-Luby
estimator.
<!--l. 23--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-580007"></a><span 
class="cmbx-12">Exact confidence computation</span></span>
   Our exact algorithm for confidence computation is described in <span class="cite">[<a 
href="#XKO2008">15</a>]</span>. It is based
                                                                          

                                                                          
on an extended version of the Davis-Putnam procedure <span class="cite">[<a 
href="#XDP1960">7</a>]</span> that is the basis of the
best exact Satisfiability solvers in AI. Given a DNF (of which each clause is a
conjunctive local condition), the algorithm employs a combination of variable
elimination (as in Davis-Putnam) and decomposition of the DNF into
independent subsets of clauses (i.e., subsets that do not share variables), with
cost-estimation heuristics for choosing whether to use the former (and for which
variable) or the latter.
<!--l. 33--><p class="indent" >   <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                          

                                                                          
<a 
 id="x1-580011"></a>
                                                                          

                                                                          
<center class="par-math-display" >
<img 
src="manual101x.png" alt="---|----------------
-U-|V1--D1--V2--D2--
   | x   1   x   1
   |                                          |-----|
   | x   2   y   1                            |0.7&#x2297;578|
   | x   2   z   1                            ------
   | u   1   v   1
   |                             |---|                       |---|
   | u   2   u   2               0.308|                       |0.65|
 -----|-----------             {x,&#x2295;y,z}                     {u&#x2295;,-v}
  W   |V   D   P
 -----|-----------          |--|       -----            ----       |--|
      |x   1   .1           1.0 |       0.52 |            |0.5|       |1.0|
      |x   2   .4         x &#x21A6;&#x2192;&#x2205;.1-1      x-&#x2297;.&#x21A6;&#x2192;4-2           u-&#x2295;.&#x21A6;&#x2192;7-1     u-&#x2205;.&#x21A6;&#x2192;3-2
      |x   3   .5
      |
      |y   1   .2                 |--|       |--|       |--|
      |y   2   .8                 0&#x2295;{.2y}        0{.&#x2295;z4}|      v|1.&#x2205;.5&#x21A6;&#x2192;01
      |z   1   .4                 ----       ----       ----
      |
      |z   2   .6                 |--|       |--|
      |u   1   .7                 1.0.2 |       1..40|
      |u   2   .3               y &#x21A6;&#x2192;&#x2205;-1      z&#x21A6;&#x2192;&#x2205;-1
      |
      |v   1   .5
      |v   2   .5
" class="par-math-display" ></center>
<!--l. 96--><p class="nopar" >
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;7.1: </td><td  
class="content">Exact confidence computation.</td></tr></table><!--tex4ht:label?: x1-580011 -->
                                                                          

                                                                          
<!--l. 100--><p class="indent" >   </td></tr></table></div><hr class="endfigure">
   <div class="newtheorem">
<!--l. 104--><p class="noindent" ><span class="head">
<span 
class="cmbx-12">Example</span><span 
class="cmbx-12">&#x00A0;7.0.1</span> </span>Consider  the  U-relation  <span 
class="cmmi-12">U  </span>representing  a  nullary  table
and  the  <span 
class="cmmi-12">W  </span>table  of  Figure&#x00A0;<a 
href="#x1-580011">7.1<!--tex4ht:ref: fig:exact-conf --></a>.  The  local  conditions  of  <span 
class="cmmi-12">U  </span>are  &#x03A6;  =
<span 
class="cmsy-10x-x-120">{{</span><span 
class="cmmi-12">x</span><img 
src="manual102x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1<span 
class="cmsy-10x-x-120">}</span><span 
class="cmmi-12">,</span><span 
class="cmsy-10x-x-120">{</span><span 
class="cmmi-12">x</span><img 
src="manual103x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >2<span 
class="cmmi-12">,y</span><img 
src="manual104x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1<span 
class="cmsy-10x-x-120">}</span><span 
class="cmmi-12">,</span><span 
class="cmsy-10x-x-120">{</span><span 
class="cmmi-12">x</span><img 
src="manual105x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >2<span 
class="cmmi-12">,z</span><img 
src="manual106x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1<span 
class="cmsy-10x-x-120">}</span><span 
class="cmmi-12">,</span><span 
class="cmsy-10x-x-120">{</span><span 
class="cmmi-12">u</span><img 
src="manual107x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1<span 
class="cmmi-12">,v</span><img 
src="manual108x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1<span 
class="cmsy-10x-x-120">}</span><span 
class="cmmi-12">,</span><span 
class="cmsy-10x-x-120">{</span><span 
class="cmmi-12">u</span><img 
src="manual109x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >2<span 
class="cmsy-10x-x-120">}}</span>.
<!--l. 111--><p class="indent" >   The algorithm proceeds recursively. We first choose to exploit the fact that
the &#x03A6; can be split into two independent sets, the first using only the variables
<span 
class="cmsy-10x-x-120">{</span><span 
class="cmmi-12">x,y,z</span><span 
class="cmsy-10x-x-120">} </span>and the second only using <span 
class="cmsy-10x-x-120">{</span><span 
class="cmmi-12">u,v</span><span 
class="cmsy-10x-x-120">}</span>. We recurse into the first set and
eliminate the variable <span 
class="cmmi-12">x</span>. This requires us to consider two cases, the alternative
values 1 and 2 for <span 
class="cmmi-12">x </span>(alternative 3 does not have to be considered because in
each of the clauses to be considered, <span 
class="cmmi-12">x </span>is mapped to either 1 or 2. In the case
that <span 
class="cmmi-12">x </span>maps to 2, we eliminate <span 
class="cmmi-12">x </span>from the set of clauses that are compatible
with the variable assignment <span 
class="cmmi-12">x</span><img 
src="manual110x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >2, i.e., the set <span 
class="cmsy-10x-x-120">{{</span><span 
class="cmmi-12">y</span><img 
src="manual111x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1<span 
class="cmsy-10x-x-120">}</span><span 
class="cmmi-12">,</span><span 
class="cmsy-10x-x-120">{</span><span 
class="cmmi-12">z</span><img 
src="manual112x.png" alt="&#x21A6;&#x2192;"  class="mapsto" >1<span 
class="cmsy-10x-x-120">}}</span>, and can
decompose exploiting the independence of the two clauses. Once <span 
class="cmmi-12">y </span>and <span 
class="cmmi-12">z</span>
are eliminated, respectively, the conditions have been reduced to &#8220;true&#8221;. The
alternative paths of the computation tree, shown in Figure&#x00A0;<a 
href="#x1-580011">7.1<!--tex4ht:ref: fig:exact-conf --></a>, are processed
analogously.
<!--l. 116--><p class="indent" >   On returning from the recursion, we compute the probabilities of the
subtrees in the obvious way. For two independent sets <span 
class="cmmi-12">S</span><sub><span 
class="cmr-8">1</span></sub><span 
class="cmmi-12">,S</span><sub><span 
class="cmr-8">2</span></sub> of clauses with
probabilities <span 
class="cmmi-12">p</span><sub><span 
class="cmr-8">1</span></sub>  and <span 
class="cmmi-12">p</span><sub><span 
class="cmr-8">2</span></sub>, the probability of <span 
class="cmmi-12">S</span><sub><span 
class="cmr-8">1</span></sub> <span 
class="cmsy-10x-x-120">&#x222A; </span><span 
class="cmmi-12">S</span><sub><span 
class="cmr-8">2</span></sub>  is 1 <span 
class="cmsy-10x-x-120">- </span>(1 <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">p</span><sub><span 
class="cmr-8">1</span></sub>) <span 
class="cmsy-10x-x-120">&#x22C5; </span>(1 <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">p</span><sub><span 
class="cmr-8">2</span></sub>).
For variable elimination branches, the probability is the sum of the products
of  the  probabilities  of  the  subtrees  and  the  probabilities  of  the  variable
assignments used for elimination.
<!--l. 119--><p class="indent" >   It is not hard to verify that the probability of &#x03A6;, i.e., the confidence in
tuple <span 
class="cmsy-10x-x-120">&#x27E8;&#x27E9;</span>, is 0<span 
class="cmmi-12">.</span>7578.                                                                         <span 
class="lasy-10x-x-120">&#x25A1;</span>
   </div>
<!--l. 125--><p class="indent" >   Our exact algorithm solves a #P-hard problem and exhibits exponential
running time in the worst case. However, like some other algorithms for
combinatorial problems, this algorithm shows a clear easy-hard-easy pattern.
Outside a narrow range of variable-to-clause count ratios, it very pronouncedly
outperforms the (polynomial-time) approximation techniques <span class="cite">[<a 
href="#XKO2008">15</a>]</span>. It is
                                                                          

                                                                          
straightforward to extend this algorithm to condition a probabilistic database
(i.e., to compute &#8220;assert&#8221;) <span class="cite">[<a 
href="#XKO2008">15</a>]</span>.
<!--l. 129--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-590007"></a><span 
class="cmbx-12">Hierarchical queries</span></span>
   The tuple-independent databases are those probabilistic databases in which,
for each tuple, a probability can be given such that the tuple occurs in the
database with that probability and the tuples are uncorrelated. It is known
since the work of Dalvi and Suciu <span class="cite">[<a 
href="#Xdalvi07efficient">6</a>]</span> that there is a class of conjunctive
queries, the hierarchical queries <span 
class="cmmi-12">Q</span>, for which computing conf(<span 
class="cmmi-12">Q</span>) exactly
on tuple-independent probabilistic databases is feasible in polynomial
time.
<!--l. 140--><p class="indent" >   In fact, these queries can essentially be computed using SQL queries that
involve several nested aggregate-group-by queries. On the other hand, it was also
shown in <span class="cite">[<a 
href="#Xdalvi07efficient">6</a>]</span> that for any conjunctive query <span 
class="cmmi-12">Q </span>that is not hierarchical, computing
conf(<span 
class="cmmi-12">Q</span>) is #P-hard with respect to data complexity. Dalvi and Suciu introduce
the notion of <span 
class="cmti-12">safe plans </span>that are at once certificates that a query is hierarchical
and query plans with aggregation operators that can be used for evaluating the
queries.
<!--l. 149--><p class="indent" >   To deal with hierarchical queries, MayBMS runs SPROUT as part of its query
engine&#x00A0;<span class="cite">[<a 
href="#XOHK2008">16</a>]</span>. SPROUT extends the early work by Suciu in three ways.
First, the observation is used that in the case that a query has a safe
plan&#x00A0;<span class="cite">[<a 
href="#Xdalvi07efficient">6</a>]</span>, it is not necessary to use that safe plan for query evaluation.
Instead, one can choose any unrestricted query plan, not only restricted safe
plans, for the computation of the answer tuples; confidence computation
is performed as an aggregation which can be pushed down or pull up
past joins in relational query plans. Second, the aggregation function for
confidence computation is implemented as a special low-level operator
in the query engine. Finally, the fact is exploited that the #P-hardness
result for any single nonhierarchical query of <span class="cite">[<a 
href="#Xdalvi07efficient">6</a>]</span> only applies as long as
the problem is that of evaluating the query on an arbitrary probabilistic
database of suitable schema. If further information about permissible
databases is available in the form of functional dependencies that the
databases must satisfy, then a larger class of queries can be processed by our
approach&#x00A0;<span class="cite">[<a 
href="#XOHK2008">16</a>]</span>.
                                                                          

                                                                          
<!--l. 168--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-600007"></a><span 
class="cmbx-12">Updates, concurrency control and recovery</span></span>
   As a consequence of our choice of a purely relational representation system,
these issues cause surprisingly little difficulty. U-relations are just relational tables
and updates are just modifications of these tables that can be expressed using the
standard SQL update operations. While the structure of the rewritings could
allow for optimizations in the concurrency and recovery managers, those are
currently left to the underlying DBMS.
                                                                          

                                                                          
<!--l. 3--><p class="indent" >
                                                                          

                                                                          
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;8</span><br /><a 
 id="x1-610008"></a>The MayBMS Codebase</h2>
<!--l. 6--><p class="noindent" >MayBMS is currently implemented in PostgreSQL 8.3.3. Integration into an
existing full-fledged DBMS brings two major advantages. First, integration makes
it possible to reuse the internal functions and structures of the DBMS. Secondly,
it often increases the efficiency of query processing.
<!--l. 12--><p class="indent" >   Figures&#x00A0;<a 
href="#x1-610011">8.1<!--tex4ht:ref: fig:modified-files1 --></a> and <a 
href="#x1-610022">8.2<!--tex4ht:ref: fig:modified-files2 --></a> give a list of source files modified or added to the original
PostgreSQL 8.3.3. All modifications are explicitly marked in the source files
by
                                                                          

                                                                          
   <div class="verbatim">
/*&#x00A0;MAYBMS&#x00A0;BEGIN&#x00A0;*/
&#x00A0;<br />...&#x00A0;[some&#x00A0;code&#x00A0;goes&#x00A0;here]
&#x00A0;<br />/*&#x00A0;MAYBMS&#x00A0;END&#x00A0;*/
</div>
<!--l. 19--><p class="nopar" > All files in directory <span 
class="cmtt-12">maybms </span>are newly created and the others are existing files in
PostgreSQL8.3.3. Header files (*.h) refer to <span 
class="cmtt-12">src/include/directory/filename</span>.
Source files (*.c and *.y) refer to <span 
class="cmtt-12">src/backend/directory/filename</span>.
<!--l. 25--><p class="indent" >   <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                          

                                                                          
<a 
 id="x1-610011"></a>
                                                                          

                                                                          
<div class="center" 
>
<!--l. 26--><p class="noindent" >
<div class="tabular"> <table id="TBL-45" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-45-1g"><col 
id="TBL-45-1"></colgroup><colgroup id="TBL-45-2g"><col 
id="TBL-45-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-1-1"  
class="td11"> <span 
class="cmr-10x-x-109">File                          </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-1-2"  
class="td11"> <span 
class="cmr-10x-x-109">Description                                                           </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-2-1"  
class="td11"> <span 
class="cmr-10x-x-109">parser/gram.y              </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-2-2"  
class="td11"> <span 
class="cmr-10x-x-109">Adds new constructs such as repair-key and possible.    </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-3-1"  
class="td11"> <span 
class="cmr-10x-x-109">parser/keyword.c          </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-3-2"  
class="td11"> <span 
class="cmr-10x-x-109">Adds necessary keywords.                                        </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-4-1"  
class="td11"> <span 
class="cmr-10x-x-109">nodes/parsenodes.h       </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-4-2"  
class="td11"> <span 
class="cmr-10x-x-109">Adds the relation type to structure CreatStmt.            </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-5-1"  
class="td11"> <span 
class="cmr-10x-x-109">catalog/pg</span><span 
class="cmr-10x-x-109">_class.h        </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-5-2"  
class="td11"> <span 
class="cmr-10x-x-109">Adds an extra column specifying the type of a relation  </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-45-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-6-1"  
class="td11"> <span 
class="cmr-10x-x-109">catalog/pg</span><span 
class="cmr-10x-x-109">_attribute.h   </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-6-2"  
class="td11"> <span 
class="cmr-10x-x-109">in the catalog.                                                       </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-7-1"  
class="td11"> <span 
class="cmr-10x-x-109">nodes/copyfuncs.c        </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-7-2"  
class="td11"> <span 
class="cmr-10x-x-109">Copying the relation type.                                       </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-8-1"  
class="td11"> <span 
class="cmr-10x-x-109">catalog/heap.c             </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-8-2"  
class="td11"> <span 
class="cmr-10x-x-109">Execution of creating urelations.                               </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-9-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-9-1"  
class="td11"> <span 
class="cmr-10x-x-109">catalog/heap.h             </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-9-2"  
class="td11"> <span 
class="cmr-10x-x-109">An argument tabletype is added to function                </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-45-10-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-10-1"  
class="td11"> <span 
class="cmr-10x-x-109">catalog/toasting.c         </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-10-2"  
class="td11"> <span 
class="cmr-10x-x-109">heap</span><span 
class="cmr-10x-x-109">_create</span><span 
class="cmr-10x-x-109">_with</span><span 
class="cmr-10x-x-109">_catalog in heap.h.                          </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-45-11-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-11-1"  
class="td11"> <span 
class="cmr-10x-x-109">commands/tablecmds.c  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-11-2"  
class="td11"> <span 
class="cmr-10x-x-109">All files accessing this function are modified.               </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-45-12-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-12-1"  
class="td11"> <span 
class="cmr-10x-x-109">commands/cluster.c      </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-12-2"  
class="td11">                                                </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-45-13-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-13-1"  
class="td11"> <span 
class="cmr-10x-x-109">bootstrap/bootparse.y   </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-13-2"  
class="td11">                                                </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-45-14-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-14-1"  
class="td11"> <span 
class="cmr-10x-x-109">executor/execMain.c     </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-45-14-2"  
class="td11">                                                </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-15-"><td  style="white-space:nowrap; text-align:left;" id="TBL-45-15-1"  
class="td11">                      </td>
</tr></table></div></div>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;8.1: </td><td  
class="content">Files related to U-relation creation.</td></tr></table><!--tex4ht:label?: x1-610011 -->
                                                                          

                                                                          
<!--l. 51--><p class="indent" >   </td></tr></table></div><hr class="endfigure">
<!--l. 54--><p class="indent" >   <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                          

                                                                          
<a 
 id="x1-610022"></a>
                                                                          

                                                                          
<div class="center" 
>
<!--l. 55--><p class="noindent" >
<div class="tabular"> <table id="TBL-46" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-46-1g"><col 
id="TBL-46-1"></colgroup><colgroup id="TBL-46-2g"><col 
id="TBL-46-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-1-1"  
class="td11"> <span 
class="cmr-10x-x-109">File                               </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-1-2"  
class="td11"> <span 
class="cmr-10x-x-109">Description                                                                       </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-2-1"  
class="td11"> <span 
class="cmr-10x-x-109">catalog/pg</span><span 
class="cmr-10x-x-109">_proc.h             </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-2-2"  
class="td11"> <span 
class="cmr-10x-x-109">Registers conf, tconf, aconf, argmax, esum, ecount                    </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-46-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-3-1"  
class="td11">                         </td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-3-2"  
class="td11"> <span 
class="cmr-10x-x-109">and the related functions.                                                     </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-4-1"  
class="td11"> <span 
class="cmr-10x-x-109">catalog/pg</span><span 
class="cmr-10x-x-109">_aggregate.h       </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-4-2"  
class="td11"> <span 
class="cmr-10x-x-109">Specifies the relationships between conf, aconf and                    </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-46-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-5-1"  
class="td11">                         </td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-5-2"  
class="td11"> <span 
class="cmr-10x-x-109">the related state, final functions.                                            </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-6-1"  
class="td11"> <span 
class="cmr-10x-x-109">nodes/execnodes.h             </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-6-2"  
class="td11"> <span 
class="cmr-10x-x-109">Adds confidence computation states to structure AggState.         </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-46-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-7-1"  
class="td11"> <span 
class="cmr-10x-x-109">executor/nodeAgg.c           </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-7-2"  
class="td11">                                                        </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-8-1"  
class="td11"> <span 
class="cmr-10x-x-109">tcop/postgres.c                 </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-8-2"  
class="td11"> <span 
class="cmr-10x-x-109">Access point to query rewriting.                                            </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-9-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-9-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/conf</span><span 
class="cmr-10x-x-109">_comp.h        </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-9-2"  
class="td11"> <span 
class="cmr-10x-x-109">Prototypes for conf, tconf, aconf and their related functions.       </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-10-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-10-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/SPROUT.c          </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-10-2"  
class="td11"> <span 
class="cmr-10x-x-109">Confidence computation of conf for hierarchical                        </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-46-11-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-11-1"  
class="td11">                         </td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-11-2"  
class="td11"> <span 
class="cmr-10x-x-109">queries on tuple-independent U-relations using SPROUT.           </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-12-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-12-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/tupleconf.c           </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-12-2"  
class="td11"> <span 
class="cmr-10x-x-109">Confidence computation for tconf.                                          </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-13-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-13-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/ws-tree.c             </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-13-2"  
class="td11"> <span 
class="cmr-10x-x-109">Confidence computation of conf for arbitrary                           </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-46-14-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-14-1"  
class="td11">                         </td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-14-2"  
class="td11"> <span 
class="cmr-10x-x-109">U-relations using ws-tree-based algorithm.                               </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-15-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-15-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/bitset.h               </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-15-2"  
class="td11"> <span 
class="cmr-10x-x-109">Auxiliary files for ws-tree-based algorithm.                              </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-46-16-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-16-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/bitset.c               </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-16-2"  
class="td11">                                                        </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-17-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-17-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/aconf.c                </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-17-2"  
class="td11"> <span 
class="cmr-10x-x-109">Implementation of approximate confidence computation.            </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-18-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-18-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/signature.h          </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-18-2"  
class="td11"> <span 
class="cmr-10x-x-109">Derives signatures for hierarchical queries.                               </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-46-19-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-19-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/signature.c           </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-19-2"  
class="td11">                                                        </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-20-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-20-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/repair</span><span 
class="cmr-10x-x-109">_key.c         </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-20-2"  
class="td11"> <span 
class="cmr-10x-x-109">Implementation of repair-key construct by pure rewriting.          </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-21-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-21-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/pick</span><span 
class="cmr-10x-x-109">_tuples.c        </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-21-2"  
class="td11"> <span 
class="cmr-10x-x-109">Implementation of pick-tuples construct by pure rewriting.         </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-22-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-22-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/localcond.h          </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-22-2"  
class="td11"> <span 
class="cmr-10x-x-109">Storing the condition columns for confidence computation.         </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-46-23-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-23-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/localcond.c          </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-23-2"  
class="td11">                                                        </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-24-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-24-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/argmax.c             </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-24-2"  
class="td11"> <span 
class="cmr-10x-x-109">Implementation of aggregate function argmax.                         </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-25-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-25-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/rewrite.c             </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-25-2"  
class="td11"> <span 
class="cmr-10x-x-109">Rewriting of select and create commands involving uncertainty.   </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-46-26-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-26-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/rewrite</span><span 
class="cmr-10x-x-109">_utils.c      </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-26-2"  
class="td11">                                                        </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-27-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-27-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/rewrite</span><span 
class="cmr-10x-x-109">_updates.c  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-27-2"  
class="td11"> <span 
class="cmr-10x-x-109">Rewriting of update commands (insert, delete, update).             </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-28-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-28-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/supported.c          </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-28-2"  
class="td11"> <span 
class="cmr-10x-x-109">Checking whether a query is supported and should be rewritten.  </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-29-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-29-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/utils.h                 </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-29-2"  
class="td11"> <span 
class="cmr-10x-x-109">Utility functions.                                                                </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-46-30-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-30-1"  
class="td11"> <span 
class="cmr-10x-x-109">maybms/utils.c                 </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-46-30-2"  
class="td11">                                                        </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-31-"><td  style="white-space:nowrap; text-align:left;" id="TBL-46-31-1"  
class="td11">                         </td>
</tr></table></div>
</div>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;8.2: </td><td  
class="content">Files related to confidence computation and query rewriting. </td></tr></table><!--tex4ht:label?: x1-610022 -->
                                                                          

                                                                          
                                                                          

                                                                          
<!--l. 97--><p class="indent" >   </td></tr></table></div><hr class="endfigure">
                                                                          

                                                                          
<!--l. 3--><p class="indent" >
                                                                          

                                                                          
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;9</span><br /><a 
 id="x1-620009"></a>Experiments</h2>
<!--l. 7--><p class="noindent" >This section reports on experiments performed with the first MayBMS release
(beta) and a benchmark consisting of two parts, which are described in more
detail in the remainder of this chapter:
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-62002x1">Computing the probability of triangles in random graphs.
      </li>
      <li 
  class="enumerate" id="x1-62004x2">A modified subset of the TPC-H queries on uncertain TPC-H datasets.</li></ol>
<!--l. 20--><p class="indent" >   By this benchmark, we do not attempt to simulate a representative set of use
cases: the jury is still out on what such a set of use cases might be. Instead,
we focus on a benchmark that allows us to see how the performance of
MayBMS develops across releases on the two core technical problems solved
by MayBMS: polynomial-time query evaluation for the polynomial-time
fragment of our query language and the efficient approximation of query
results for queries that do not belong to the polynomial-time fragment.
(Finding triangles in random graphs is a near-canonical example of such
queries.)
<!--l. 29--><p class="indent" >   We will keep monitoring the development of the state of the art and will
continue to survey applications and collect use cases; we will extend or replace
this benchmark as consensus develops regarding the most important applications
of probabilistic databases.
<!--l. 37--><p class="indent" >   Experimental setup. All the experiments reported on in this chapter were
conducted on an Athlon-X2(4600+)64bit / 1.8GB / Linux2.6.20 / gcc4.1.2
machine.
   <h3 class="sectionHead"><span class="titlemark">9.1   </span> <a 
 id="x1-630009.1"></a>Random Graphs</h3>
<!--l. 43--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">9.1.1   </span> <a 
 id="x1-640009.1.1"></a>Experiments with Varying Levels of Precision</h4>
<!--l. 45--><p class="noindent" >In this experiment, we create undirected random graphs in which the presence of
each edge is independent of that of the other edges. The probability that an edge
                                                                          

                                                                          
is in the graph is 0.5 and this applies to each edge. Then we compute the
probability that there exists a triangle in the graphs using approximation. The
queries can be found in Appendix&#x00A0;<a 
href="#x1-68000A">A<!--tex4ht:ref: app:randgraph --></a>.
<!--l. 50--><p class="indent" >   We report wall-clock execution times of queries run in the PostgreSQL8.3.3
psql shell with a warm cache obtained by running a query once and then reporting
the average execution time over three subsequent, identical executions. Figure <a 
href="#x1-640011">9.1<!--tex4ht:ref: fig:randgraph --></a>
shows the execution time of approximation with different precision parameters for
random graphs composed of 5 to 33 nodes. An (<span 
class="cmmi-12">&#x03F5;,&#x03B4;</span>) approximation has the
following property: let <span 
class="cmmi-12">p </span>be the exact probability and <img 
src="manual113x.png" alt="&#x02C6;p"  class="circ" > be the approximate
probability, then Pr<span class="big"><img 
src="manual114x.png" alt="["  class="left" align="middle"></span><span 
class="cmsy-10x-x-120">|</span><span 
class="cmmi-12">p </span><span 
class="cmsy-10x-x-120">-</span><img 
src="manual115x.png" alt="&#x02C6;p"  class="circ" > <span 
class="cmsy-10x-x-120">|&#x2265; </span><span 
class="cmmi-12">&#x03F5; </span><span 
class="cmsy-10x-x-120">&#x22C5; </span><span 
class="cmmi-12">p</span><span class="big"><img 
src="manual116x.png" alt="]"  class="left" align="middle"></span> <span 
class="cmsy-10x-x-120">&#x2264; </span><span 
class="cmmi-12">&#x03B4;</span>.
<!--l. 57--><p class="indent" >   <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                          

                                                                          
<a 
 id="x1-640011"></a>
                                                                          

                                                                          
<div class="center" 
>
<!--l. 59--><p class="noindent" >
                                                                          

                                                                          
<div class="tabular"> <table id="TBL-47" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-47-1g"><col 
id="TBL-47-1"></colgroup><colgroup id="TBL-47-2g"><col 
id="TBL-47-2"></colgroup><colgroup id="TBL-47-3g"><col 
id="TBL-47-3"></colgroup><colgroup id="TBL-47-4g"><col 
id="TBL-47-4"></colgroup><colgroup id="TBL-47-5g"><col 
id="TBL-47-5"></colgroup><colgroup id="TBL-47-6g"><col 
id="TBL-47-6"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-1-1"  
class="td11"> <div class="multirow"><!-- rows=2 -->
#nodes</div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-1-2"  
class="td11"> <div class="multirow"><!-- rows=2 -->
#clauses</div>  </td><td colspan="4" style="white-space:nowrap; text-align:center;" id="TBL-47-1-3"  
class="td11">            <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Execution Time(Seconds)</div>
</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td></td><td></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-3-1"  
class="td11">         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-3-2"  
class="td11">         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-3-3"  
class="td11"> (.05,.05)  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-3-4"  
class="td11"> (.01,.01)  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-3-5"  
class="td11"> (.005,.005)  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-3-6"  
class="td11"> (.001,.001)  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-4-1"  
class="td11">    5      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-4-2"  
class="td11">    10      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-4-3"  
class="td11">   0.01    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-4-4"  
class="td11">   0.03    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-4-5"  
class="td11">    0.11      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-4-6"  
class="td11">    2.08      </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-5-1"  
class="td11">    6      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-5-2"  
class="td11">    20      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-5-3"  
class="td11">   0.01    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-5-4"  
class="td11">   0.08    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-5-5"  
class="td11">    0.26      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-5-6"  
class="td11">    5.27      </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-6-1"  
class="td11">    7      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-6-2"  
class="td11">    35      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-6-3"  
class="td11">   0.02    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-6-4"  
class="td11">   0.14    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-6-5"  
class="td11">    0.46      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-6-6"  
class="td11">    9.15      </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-7-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-7-1"  
class="td11">    8      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-7-2"  
class="td11">    56      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-7-3"  
class="td11">   0.03    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-7-4"  
class="td11">   0.22    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-7-5"  
class="td11">    0.7       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-7-6"  
class="td11">   12.49     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-8-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-8-1"  
class="td11">    9      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-8-2"  
class="td11">    84      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-8-3"  
class="td11">   0.04    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-8-4"  
class="td11">   0.28    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-8-5"  
class="td11">    0.85      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-8-6"  
class="td11">   14.95     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-9-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-9-1"  
class="td11">   10     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-9-2"  
class="td11">   120     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-9-3"  
class="td11">   0.08    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-9-4"  
class="td11">   0.44    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-9-5"  
class="td11">    1.13      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-9-6"  
class="td11">   16.19     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-10-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-10-1"  
class="td11">   11     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-10-2"  
class="td11">   165     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-10-3"  
class="td11">   0.15    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-10-4"  
class="td11">   0.60    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-10-5"  
class="td11">    1.60      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-10-6"  
class="td11">   17.98     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-11-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-11-1"  
class="td11">   12     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-11-2"  
class="td11">   220     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-11-3"  
class="td11">   0.29    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-11-4"  
class="td11">   1.24    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-11-5"  
class="td11">    2.48      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-11-6"  
class="td11">   24.31     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-12-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-12-1"  
class="td11">   13     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-12-2"  
class="td11">   286     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-12-3"  
class="td11">   0.55    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-12-4"  
class="td11">   2.38    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-12-5"  
class="td11">    4.74      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-12-6"  
class="td11">   35.29     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-13-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-13-1"  
class="td11">   14     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-13-2"  
class="td11">   364     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-13-3"  
class="td11">   0.98    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-13-4"  
class="td11">   4.26    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-13-5"  
class="td11">    8.38      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-13-6"  
class="td11">   51.51     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-14-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-14-1"  
class="td11">   15     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-14-2"  
class="td11">   455     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-14-3"  
class="td11">   1.56    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-14-4"  
class="td11">   6.74    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-14-5"  
class="td11">   13.29     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-14-6"  
class="td11">   73.00     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-15-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-15-1"  
class="td11">   16     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-15-2"  
class="td11">   560     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-15-3"  
class="td11">   2.37    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-15-4"  
class="td11">  10.26    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-15-5"  
class="td11">   19.21     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-15-6"  
class="td11">   102.97    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-16-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-16-1"  
class="td11">   17     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-16-2"  
class="td11">   680     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-16-3"  
class="td11">   3.46    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-16-4"  
class="td11">   14.6    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-16-5"  
class="td11">   28.76     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-16-6"  
class="td11">   144.02    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-17-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-17-1"  
class="td11">   18     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-17-2"  
class="td11">   816     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-17-3"  
class="td11">   4.92    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-17-4"  
class="td11">  20.49    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-17-5"  
class="td11">    41.1      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-17-6"  
class="td11">   206.18    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-18-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-18-1"  
class="td11">   19     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-18-2"  
class="td11">   969     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-18-3"  
class="td11">   7.03    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-18-4"  
class="td11">  28.52    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-18-5"  
class="td11">   56.43     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-18-6"  
class="td11">   291.21    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-19-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-19-1"  
class="td11">   20     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-19-2"  
class="td11">   1140    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-19-3"  
class="td11">   9.97    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-19-4"  
class="td11">  39.72    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-19-5"  
class="td11">   81.01     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-19-6"  
class="td11">   395.18    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-20-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-20-1"  
class="td11">   21     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-20-2"  
class="td11">   1330    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-20-3"  
class="td11">  14.74    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-20-4"  
class="td11">  57.13    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-20-5"  
class="td11">   123.79    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-20-6"  
class="td11">   597.86    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-21-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-21-1"  
class="td11">   22     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-21-2"  
class="td11">   1540    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-21-3"  
class="td11">  23.94    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-21-4"  
class="td11">  119.81   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-21-5"  
class="td11">   218.62    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-21-6"  
class="td11">   600+     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-22-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-22-1"  
class="td11">   23     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-22-2"  
class="td11">   1771    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-22-3"  
class="td11">  46.21    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-22-4"  
class="td11">  204.83   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-22-5"  
class="td11">   416.42    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-22-6"  
class="td11">   600+     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-23-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-23-1"  
class="td11">   24     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-23-2"  
class="td11">   2024    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-23-3"  
class="td11">  79.03    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-23-4"  
class="td11">  411.67   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-23-5"  
class="td11">   600+     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-23-6"  
class="td11">   600+     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-24-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-24-1"  
class="td11">   25     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-24-2"  
class="td11">   2300    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-24-3"  
class="td11">  115.64   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-24-4"  
class="td11">  515.65   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-24-5"  
class="td11">   600+     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-24-6"  
class="td11">   600+     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-25-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-25-1"  
class="td11">   26     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-25-2"  
class="td11">   2600    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-25-3"  
class="td11">  159.66   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-25-4"  
class="td11">  600+    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-25-5"  
class="td11">   600+     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-25-6"  
class="td11">   600+     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-26-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-26-1"  
class="td11">   27     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-26-2"  
class="td11">   2925    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-26-3"  
class="td11">  202.98   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-26-4"  
class="td11">  600+    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-26-5"  
class="td11">   600+     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-26-6"  
class="td11">   600+     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-27-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-27-1"  
class="td11">   28     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-27-2"  
class="td11">   3276    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-27-3"  
class="td11">  251.82   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-27-4"  
class="td11">  600+    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-27-5"  
class="td11">   600+     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-27-6"  
class="td11">   600+     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-28-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-28-1"  
class="td11">   29     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-28-2"  
class="td11">   3654    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-28-3"  
class="td11">  312.89   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-28-4"  
class="td11">  600+    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-28-5"  
class="td11">   600+     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-28-6"  
class="td11">   600+     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-29-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-29-1"  
class="td11">   30     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-29-2"  
class="td11">   4060    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-29-3"  
class="td11">  387.72   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-29-4"  
class="td11">  600+    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-29-5"  
class="td11">   600+     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-29-6"  
class="td11">   600+     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-30-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-30-1"  
class="td11">   31     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-30-2"  
class="td11">   4495    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-30-3"  
class="td11">  475.78   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-30-4"  
class="td11">  600+    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-30-5"  
class="td11">   600+     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-30-6"  
class="td11">   600+     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-31-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-31-1"  
class="td11">   32     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-31-2"  
class="td11">   4960    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-31-3"  
class="td11">  582.4    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-31-4"  
class="td11">  600+    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-31-5"  
class="td11">   600+     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-31-6"  
class="td11">   600+     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-32-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-32-1"  
class="td11">   33     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-32-2"  
class="td11">   5456    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-32-3"  
class="td11">  600+    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-32-4"  
class="td11">  600+    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-32-5"  
class="td11">   600+     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-47-32-6"  
class="td11">   600+     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-33-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-33-1"  
class="td11">         </td>
</tr></table></div></div>
                                                                          

                                                                          
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;9.1:  </td><td  
class="content">Comparison  between  execution  time  of  approximation  with
different precision</td></tr></table><!--tex4ht:label?: x1-640011 -->
                                                                          

                                                                          
<!--l. 100--><p class="indent" >   </td></tr></table></div><hr class="endfigure">
   <h4 class="subsectionHead"><span class="titlemark">9.1.2   </span> <a 
 id="x1-650009.1.2"></a>Experiments with Different Edge Probabilities</h4>
<!--l. 104--><p class="noindent" >In the previous experiments, each edge had probability 0.5. We use other values as
the edge probability(all edges still have the same probability) and run the
experiment again with (0.05,0.05) approximation. The SQL statements in
Appendix&#x00A0;<a 
href="#x1-68000A">A<!--tex4ht:ref: app:randgraph --></a> should be modified accordingly. Let <span 
class="cmmi-12">p </span>be the probability, change the
following statements
                                                                          

                                                                          
   <div class="verbatim">
insert&#x00A0;into&#x00A0;&#x00A0;inout&#x00A0;values&#x00A0;(1,&#x00A0;0.5);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;inout&#x00A0;values&#x00A0;(0,&#x00A0;0.5);
</div>
<!--l. 108--><p class="nopar" > to
                                                                          

                                                                          
   <div class="verbatim">
insert&#x00A0;into&#x00A0;&#x00A0;inout&#x00A0;values&#x00A0;(1,&#x00A0;p);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;inout&#x00A0;values&#x00A0;(0,&#x00A0;1&#x00A0;-&#x00A0;p);
</div>
<!--l. 113--><p class="nopar" > Figure <a 
href="#x1-650012">9.2<!--tex4ht:ref: fig:edge-prob --></a> shows the execution time for queries of random graphs composed of 25
to 101 nodes with different fixed edge probabilities.
<!--l. 116--><p class="indent" >   <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                          

                                                                          
<a 
 id="x1-650012"></a>
                                                                          

                                                                          
<div class="center" 
>
<!--l. 118--><p class="noindent" >
                                                                          

                                                                          
<div class="tabular"> <table id="TBL-48" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-48-1g"><col 
id="TBL-48-1"></colgroup><colgroup id="TBL-48-2g"><col 
id="TBL-48-2"></colgroup><colgroup id="TBL-48-3g"><col 
id="TBL-48-3"></colgroup><colgroup id="TBL-48-4g"><col 
id="TBL-48-4"></colgroup><colgroup id="TBL-48-5g"><col 
id="TBL-48-5"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-1-1"  
class="td11"> <div class="multirow"><!-- rows=2 -->
#nodes</div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-1-2"  
class="td11"> <div class="multirow"><!-- rows=2 -->
#clauses</div>  </td><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-48-1-3"  
class="td11">  <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Execution Time(Seconds)</div>
</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td></td><td></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-3-1"  
class="td11">         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-3-2"  
class="td11">         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-3-3"  
class="td11"> p=0.5  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-3-4"  
class="td11"> p=0.1  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-3-5"  
class="td11"> p=0.05  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-4-1"  
class="td11">   25     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-4-2"  
class="td11">   2300    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-4-3"  
class="td11"> 115.64  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-4-4"  
class="td11">  1.77   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-4-5"  
class="td11">  0.55    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-5-1"  
class="td11">   30     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-5-2"  
class="td11">   4060    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-5-3"  
class="td11"> 387.72  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-5-4"  
class="td11">  4.13   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-5-5"  
class="td11">  1.35    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-6-1"  
class="td11">   31     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-6-2"  
class="td11">   4495    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-6-3"  
class="td11"> 475.78  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-6-4"  
class="td11">  4.94   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-6-5"  
class="td11">  1.54    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-7-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-7-1"  
class="td11">   32     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-7-2"  
class="td11">   4960    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-7-3"  
class="td11"> 582.40  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-7-4"  
class="td11">  5.72   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-7-5"  
class="td11">  1.82    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-8-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-8-1"  
class="td11">   33     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-8-2"  
class="td11">   5456    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-8-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-8-4"  
class="td11">  6.87   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-8-5"  
class="td11">  2.12    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-9-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-9-1"  
class="td11">   35     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-9-2"  
class="td11">   6545    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-9-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-9-4"  
class="td11">  8.74   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-9-5"  
class="td11">  2.74    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-10-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-10-1"  
class="td11">   40     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-10-2"  
class="td11">   9880    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-10-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-10-4"  
class="td11"> 18.32  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-10-5"  
class="td11">  5.06    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-11-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-11-1"  
class="td11">   45     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-11-2"  
class="td11">  14190    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-11-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-11-4"  
class="td11"> 36.77  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-11-5"  
class="td11">  8.96    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-12-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-12-1"  
class="td11">   50     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-12-2"  
class="td11">  19600    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-12-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-12-4"  
class="td11"> 70.79  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-12-5"  
class="td11">  15.79   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-13-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-13-1"  
class="td11">   55     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-13-2"  
class="td11">  26235    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-13-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-13-4"  
class="td11"> 123.69  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-13-5"  
class="td11">  21.97   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-14-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-14-1"  
class="td11">   60     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-14-2"  
class="td11">  34220    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-14-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-14-4"  
class="td11"> 214.06  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-14-5"  
class="td11">  33.94   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-15-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-15-1"  
class="td11">   65     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-15-2"  
class="td11">  43680    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-15-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-15-4"  
class="td11"> 343.66  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-15-5"  
class="td11">  47.09   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-16-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-16-1"  
class="td11">   68     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-16-2"  
class="td11">  50116    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-16-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-16-4"  
class="td11"> 451.06  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-16-5"  
class="td11">  59.87   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-17-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-17-1"  
class="td11">   69     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-17-2"  
class="td11">  52934    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-17-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-17-4"  
class="td11"> 490.64  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-17-5"  
class="td11">  64.69   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-18-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-18-1"  
class="td11">   70     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-18-2"  
class="td11">  54740    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-18-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-18-4"  
class="td11"> 542.61  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-18-5"  
class="td11">  68.98   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-19-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-19-1"  
class="td11">   71     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-19-2"  
class="td11">  57155    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-19-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-19-4"  
class="td11"> 595.03  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-19-5"  
class="td11">  72.88   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-20-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-20-1"  
class="td11">   72     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-20-2"  
class="td11">  59640    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-20-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-20-4"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-20-5"  
class="td11">  82.30   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-21-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-21-1"  
class="td11">   75     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-21-2"  
class="td11">  67525    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-21-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-21-4"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-21-5"  
class="td11"> 106.49  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-22-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-22-1"  
class="td11">   80     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-22-2"  
class="td11">  82160    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-22-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-22-4"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-22-5"  
class="td11"> 154.92  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-23-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-23-1"  
class="td11">   85     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-23-2"  
class="td11">  98770    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-23-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-23-4"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-23-5"  
class="td11">  224.3   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-24-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-24-1"  
class="td11">   90     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-24-2"  
class="td11">  117480   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-24-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-24-4"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-24-5"  
class="td11"> 316.28  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-25-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-25-1"  
class="td11">   95     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-25-2"  
class="td11">  138415   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-25-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-25-4"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-25-5"  
class="td11"> 437.39  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-26-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-26-1"  
class="td11">   97     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-26-2"  
class="td11">  147440   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-26-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-26-4"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-26-5"  
class="td11"> 510.39  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-27-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-27-1"  
class="td11">   98     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-27-2"  
class="td11">  152096   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-27-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-27-4"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-27-5"  
class="td11"> 543.87  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-28-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-28-1"  
class="td11">   99     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-28-2"  
class="td11">  156849   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-28-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-28-4"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-28-5"  
class="td11"> 558.44  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-29-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-29-1"  
class="td11">   100     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-29-2"  
class="td11">  161700   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-29-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-29-4"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-29-5"  
class="td11"> 593.84  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-30-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-30-1"  
class="td11">   101     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-30-2"  
class="td11">  166650   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-30-3"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-30-4"  
class="td11"> 600+  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-30-5"  
class="td11">  600+   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-31-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-31-1"  
class="td11">         </td>
</tr></table></div></div>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;9.2: </td><td  
class="content">Comparison between execution time of queries of random graphs
                                                                          

                                                                          
with different fixed edge probabilities</td></tr></table><!--tex4ht:label?: x1-650012 -->
                                                                          

                                                                          
<!--l. 188--><p class="indent" >   </td></tr></table></div><hr class="endfigure">
   <h4 class="subsectionHead"><span class="titlemark">9.1.3   </span> <a 
 id="x1-660009.1.3"></a>Experiments with General Random Graphs</h4>
<!--l. 192--><p class="noindent" >The previous experiments were conducted on undirected graphs in which
every pair of nodes had a possibly present edge. However, this may not be
the case in general. In many scenarios, each pair of nodes may have a
certainly present, certainly absent or possibly present edge. In our following
experiments, we construct such general probabilistic random graphs
from data representing directed links between webpage within nd.edu
domain<span class="footnote-mark"><a 
href="manual3.html#fn1x10"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-66001f1"></a> .
If a link between two pages is absent from the data, then it is also absent
from our graphs. If a link is present in the data, then it is a certainly or
possibly present edge in our graphs. We run again the queries computing
the probabilities of existence of triangles in such graphs with (0.05,0.05)
approximation. The probabilities that possibly present edges are in the graphs are
randomly distributed in (0,0.1). The queries of the graph constructions and
confidence computation can be found in Appendix&#x00A0;<a 
href="#x1-69000B">B<!--tex4ht:ref: app:general-randgraph --></a>. Figure <a 
href="#x1-660023">9.3<!--tex4ht:ref: fig:general-randgraph --></a> shows the
execution time for queries of such random graphs composed of 1000 to 30000
nodes.
<!--l. 194--><p class="indent" >   <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                          

                                                                          
<a 
 id="x1-660023"></a>
                                                                          

                                                                          
<div class="center" 
>
<!--l. 196--><p class="noindent" >
                                                                          

                                                                          
<div class="tabular"> <table id="TBL-49" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-49-1g"><col 
id="TBL-49-1"></colgroup><colgroup id="TBL-49-2g"><col 
id="TBL-49-2"></colgroup><colgroup id="TBL-49-3g"><col 
id="TBL-49-3"></colgroup><colgroup id="TBL-49-4g"><col 
id="TBL-49-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-1-1"  
class="td11"> #nodes  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-1-2"  
class="td11"> #possible edges  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-1-3"  
class="td11"> #clauses  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-1-4"  
class="td11"> Execution Time(Seconds)  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-2-1"  
class="td11">   1000    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-2-2"  
class="td11">      3271         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-2-3"  
class="td11">   6367    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-2-4"  
class="td11">          4.04                </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-3-1"  
class="td11">   2000    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-3-2"  
class="td11">      6446         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-3-3"  
class="td11">  12598    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-3-4"  
class="td11">         11.84               </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-4-1"  
class="td11">   3000    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-4-2"  
class="td11">      9056         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-4-3"  
class="td11">  19836    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-4-4"  
class="td11">         21.88               </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-5-1"  
class="td11">   4000    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-5-2"  
class="td11">     11366        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-5-3"  
class="td11">  22455    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-5-4"  
class="td11">         28.57               </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-6-1"  
class="td11">   5000    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-6-2"  
class="td11">     13497        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-6-3"  
class="td11">  24574    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-6-4"  
class="td11">         31.38               </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-7-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-7-1"  
class="td11">   6000    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-7-2"  
class="td11">     16095        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-7-3"  
class="td11">  25731    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-7-4"  
class="td11">         35.36               </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-8-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-8-1"  
class="td11">   7000    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-8-2"  
class="td11">     17958        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-8-3"  
class="td11">  26070    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-8-4"  
class="td11">         35.82               </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-9-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-9-1"  
class="td11">   8000    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-9-2"  
class="td11">     23113        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-9-3"  
class="td11">  39481    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-9-4"  
class="td11">         80.14               </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-10-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-10-1"  
class="td11">   9000    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-10-2"  
class="td11">     26114        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-10-3"  
class="td11">  43369    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-10-4"  
class="td11">         115.45              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-11-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-11-1"  
class="td11">  10000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-11-2"  
class="td11">     32975        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-11-3"  
class="td11">  51586    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-11-4"  
class="td11">         140.00              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-12-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-12-1"  
class="td11">  11000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-12-2"  
class="td11">     35507        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-12-3"  
class="td11">  55562    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-12-4"  
class="td11">         157.34              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-13-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-13-1"  
class="td11">  12000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-13-2"  
class="td11">     37623        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-13-3"  
class="td11">  57260    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-13-4"  
class="td11">         170.05              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-14-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-14-1"  
class="td11">  13000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-14-2"  
class="td11">     40246        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-14-3"  
class="td11">  61060    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-14-4"  
class="td11">         197.67              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-15-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-15-1"  
class="td11">  14000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-15-2"  
class="td11">     44045        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-15-3"  
class="td11">  66530    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-15-4"  
class="td11">         225.88              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-16-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-16-1"  
class="td11">  15000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-16-2"  
class="td11">     45434        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-16-3"  
class="td11">  66966    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-16-4"  
class="td11">         230.51              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-17-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-17-1"  
class="td11">  16000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-17-2"  
class="td11">     47814        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-17-3"  
class="td11">  69787    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-17-4"  
class="td11">         260.70              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-18-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-18-1"  
class="td11">  17000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-18-2"  
class="td11">     50456        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-18-3"  
class="td11">  72710    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-18-4"  
class="td11">         278.48              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-19-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-19-1"  
class="td11">  18000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-19-2"  
class="td11">     52145        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-19-3"  
class="td11">  73043    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-19-4"  
class="td11">         280.76              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-20-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-20-1"  
class="td11">  19000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-20-2"  
class="td11">     53849        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-20-3"  
class="td11">  73437    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-20-4"  
class="td11">         288.01              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-21-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-21-1"  
class="td11">  20000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-21-2"  
class="td11">     55584        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-21-3"  
class="td11">  73953    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-21-4"  
class="td11">         289.30              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-22-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-22-1"  
class="td11">  21000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-22-2"  
class="td11">     57654        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-22-3"  
class="td11">  74688    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-22-4"  
class="td11">         290.37              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-23-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-23-1"  
class="td11">  22000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-23-2"  
class="td11">     59274        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-23-3"  
class="td11">  74991    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-23-4"  
class="td11">         295.66              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-24-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-24-1"  
class="td11">  23000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-24-2"  
class="td11">     61308        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-24-3"  
class="td11">  75954    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-24-4"  
class="td11">         296.13              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-25-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-25-1"  
class="td11">  24000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-25-2"  
class="td11">     63000        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-25-3"  
class="td11">  76288    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-25-4"  
class="td11">         313.13              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-26-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-26-1"  
class="td11">  25000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-26-2"  
class="td11">     65538        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-26-3"  
class="td11">  79404    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-26-4"  
class="td11">         354.95              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-27-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-27-1"  
class="td11">  26000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-27-2"  
class="td11">     69741        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-27-3"  
class="td11">  89888    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-27-4"  
class="td11">         439.01              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-28-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-28-1"  
class="td11">  27000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-28-2"  
class="td11">     72741        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-28-3"  
class="td11">  93016    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-28-4"  
class="td11">         479.78              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-29-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-29-1"  
class="td11">  28000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-29-2"  
class="td11">     76148        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-29-3"  
class="td11">  98065    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-29-4"  
class="td11">         553.75              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-30-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-30-1"  
class="td11">  29000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-30-2"  
class="td11">     79414        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-30-3"  
class="td11">  104328   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-30-4"  
class="td11">         573.24              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-31-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-31-1"  
class="td11">  30000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-31-2"  
class="td11">     82714        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-31-3"  
class="td11">  107633   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-31-4"  
class="td11">         601.33              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-32-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-32-1"  
class="td11">         </td>
</tr></table></div></div>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;9.3:  </td><td  
class="content">Execution  time  of  confidence  computation  for  existence  of
triangles in general random graphs</td></tr></table><!--tex4ht:label?: x1-660023 -->
                                                                          

                                                                          
                                                                          

                                                                          
<!--l. 237--><p class="indent" >   </td></tr></table></div><hr class="endfigure">
   <h3 class="sectionHead"><span class="titlemark">9.2   </span> <a 
 id="x1-670009.2"></a>Probabilistic TPC-H</h3>
<!--l. 241--><p class="noindent" >SPROUT<span class="footnote-mark"><a 
href="manual4.html#fn2x10"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-67001f2"></a> 
is a part of the query engine of MayBMS and provides state-of-the-art techniques
for efficient exact confidence computation. In this section, we show how TPC-H
queries can benefit from these techniques. For each TPC-H query, we consider its
largest subquery without aggregations and inequality joins but with conf() for
specifying exact probability computation for distinct tuples in query answers. We
consider two flavours of each of these queries: A version with original selection
attributes (again, without aggregations), and a version where we drop keys
from the selection attributes. Queries are included in the experiments if
SPROUT&#8217;s techniques can be applied to them. Our data set consists of
tuple-independent probabilistic databases obtained from deterministic
databases produced by TPC-H 2.7.0 by associating each tuple with a Boolean
random variable and by choosing at random a probability distribution over
these variables. We perform experiments with TPC-H scale factor 1 (1GB
database size) and evaluate the TPC-H-like queries mentioned above. The
queries can be found in Appendix&#x00A0;<a 
href="#x1-70000C">C<!--tex4ht:ref: app:tpch --></a>. In addition, we compare our results
with the reported time from <span class="cite">[<a 
href="#XOHK2008">16</a>]</span> in which SPROUT was only partially
integrated into PostgreSQL and storing temporary relations to the disk was
sometimes necessary. The average time shown below is obtained from ten
subsequent, identical executions with a warm cache by running the query
once.
<!--l. 264--><p class="indent" >   <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                          

                                                                          
<a 
 id="x1-670024"></a>
                                                                          

                                                                          
<div class="center" 
>
<!--l. 266--><p class="noindent" >
<div class="tabular"> <table id="TBL-50" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-50-1g"><col 
id="TBL-50-1"></colgroup><colgroup id="TBL-50-2g"><col 
id="TBL-50-2"></colgroup><colgroup id="TBL-50-3g"><col 
id="TBL-50-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-1-1"  
class="td11"> Query  </td><td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-50-1-2"  
class="td11">           <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Average Time(Seconds)</div>
</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-3-1"  
class="td11">        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-3-2"  
class="td11"> Current running time  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-3-3"  
class="td11"> Time reported in <span class="cite">[<a 
href="#XOHK2008">16</a>]</span>  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-4-1"  
class="td11">   1     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-4-2"  
class="td11">        8.21             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-4-3"  
class="td11">       120.13           </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-5-1"  
class="td11">   4     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-5-2"  
class="td11">        40.57            </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-5-3"  
class="td11">        39.52            </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-6-1"  
class="td11">   12     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-6-2"  
class="td11">        17.1             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-6-3"  
class="td11">        21.94            </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-7-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-7-1"  
class="td11">   15     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-7-2"  
class="td11">         5.5              </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-7-3"  
class="td11">         3.2              </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-8-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-8-1"  
class="td11">   B1    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-8-2"  
class="td11">        5.37             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-8-3"  
class="td11">        14.92            </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-9-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-9-1"  
class="td11">   B4    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-9-2"  
class="td11">        31.88            </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-9-3"  
class="td11">        33.02            </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-10-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-10-1"  
class="td11">   B6    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-10-2"  
class="td11">        3.82             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-10-3"  
class="td11">        6.37             </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-11-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-11-1"  
class="td11">  B12    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-11-2"  
class="td11">        15.91            </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-11-3"  
class="td11">        18.56            </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-12-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-12-1"  
class="td11">  B14    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-12-2"  
class="td11">        4.17             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-12-3"  
class="td11">        4.86             </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-13-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-13-1"  
class="td11">  B15    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-13-2"  
class="td11">        4.81             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-13-3"  
class="td11">        5.24             </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-14-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-14-1"  
class="td11">  B16    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-14-2"  
class="td11">        0.87             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-14-3"  
class="td11">        3.16             </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-15-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-15-1"  
class="td11">  B17    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-15-2"  
class="td11">        3.25             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-50-15-3"  
class="td11">        2.43             </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-16-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-16-1"  
class="td11">        </td>
</tr></table></div></div>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;9.4:  </td><td  
class="content">Current  running  times  vs.&#x00A0;running  times  reported  in  <span class="cite">[<a 
href="#XOHK2008">16</a>]</span>.
Boolean queries are prefixed by B. </td></tr></table><!--tex4ht:label?: x1-670024 -->
                                                                          

                                                                          
<!--l. 289--><p class="indent" >   </td></tr></table></div><hr class="endfigure">
<!--l. 230--><p class="indent" >
                                                                          

                                                                          
                                                                          

                                                                          
<!--l. 1--><p class="indent" >
                                                                          

                                                                          
<a 
 id="x1-67003r67"></a>
   <h2 class="appendixHead"><span class="titlemark">Appendix&#x00A0;A</span><br /><a 
 id="x1-68000A"></a>Queries in Random Graph Experiments</h2>
                                                                          

                                                                          
   <div class="verbatim">
create&#x00A0;table&#x00A0;node&#x00A0;(n&#x00A0;integer);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;node&#x00A0;values&#x00A0;(1);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;node&#x00A0;values&#x00A0;(2);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;node&#x00A0;values&#x00A0;(3);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;node&#x00A0;values&#x00A0;(4);
&#x00A0;<br />......
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;node&#x00A0;values&#x00A0;(n-1);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;node&#x00A0;values&#x00A0;(n);&#x00A0;/*&#x00A0;n&#x00A0;is&#x00A0;the&#x00A0;number&#x00A0;of&#x00A0;nodes&#x00A0;in&#x00A0;the&#x00A0;graph&#x00A0;*/
&#x00A0;<br />
&#x00A0;<br />/*&#x00A0;Here&#x00A0;we&#x00A0;specify&#x00A0;the&#x00A0;probability&#x00A0;that&#x00A0;an&#x00A0;edge&#x00A0;is&#x00A0;in&#x00A0;the&#x00A0;graph.&#x00A0;*/
&#x00A0;<br />create&#x00A0;table&#x00A0;inout&#x00A0;(bit&#x00A0;integer,&#x00A0;p&#x00A0;float);
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;inout&#x00A0;values&#x00A0;(1,&#x00A0;0.5);&#x00A0;/*&#x00A0;probability&#x00A0;that&#x00A0;edge&#x00A0;is&#x00A0;in&#x00A0;the&#x00A0;graph&#x00A0;*/
&#x00A0;<br />insert&#x00A0;into&#x00A0;&#x00A0;inout&#x00A0;values&#x00A0;(0,&#x00A0;0.5);&#x00A0;/*&#x00A0;probability&#x00A0;that&#x00A0;edge&#x00A0;is&#x00A0;missing&#x00A0;*/
&#x00A0;<br />
&#x00A0;<br />create&#x00A0;table&#x00A0;total_order&#x00A0;as
&#x00A0;<br />(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;select&#x00A0;n1.n&#x00A0;as&#x00A0;u,&#x00A0;n2.n&#x00A0;as&#x00A0;v
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;from&#x00A0;node&#x00A0;n1,&#x00A0;node&#x00A0;n2
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;where&#x00A0;n1.n&#x00A0;&#x003C;&#x00A0;n2.n
&#x00A0;<br />);
&#x00A0;<br />
&#x00A0;<br />/*&#x00A0;This&#x00A0;table&#x00A0;represents&#x00A0;all&#x00A0;subsets&#x00A0;of&#x00A0;the&#x00A0;total&#x00A0;order&#x00A0;over
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;node&#x00A0;as&#x00A0;possible&#x00A0;worlds.&#x00A0;We&#x00A0;use&#x00A0;the&#x00A0;same&#x00A0;probability&#x00A0;--&#x00A0;from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;inout&#x00A0;--&#x00A0;for&#x00A0;each&#x00A0;edge,&#x00A0;but&#x00A0;in&#x00A0;principle&#x00A0;we&#x00A0;could&#x00A0;just&#x00A0;as
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;well&#x00A0;have&#x00A0;a&#x00A0;different&#x00A0;(independent)&#x00A0;probability&#x00A0;for&#x00A0;each&#x00A0;edge.
&#x00A0;<br />*/
&#x00A0;<br />create&#x00A0;table&#x00A0;to_subset&#x00A0;as
&#x00A0;<br />(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;repair&#x00A0;key&#x00A0;u,v
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;in&#x00A0;(select&#x00A0;*&#x00A0;from&#x00A0;total_order,&#x00A0;inout)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;weight&#x00A0;by&#x00A0;p
                                                                          

                                                                          
&#x00A0;<br />);
&#x00A0;<br />
&#x00A0;<br />create&#x00A0;table&#x00A0;edge0&#x00A0;as&#x00A0;(select&#x00A0;u,v&#x00A0;from&#x00A0;to_subset&#x00A0;where&#x00A0;bit=1);
&#x00A0;<br />
&#x00A0;<br />select&#x00A0;conf()&#x00A0;as&#x00A0;triangle_prob
&#x00A0;<br />from&#x00A0;&#x00A0;&#x00A0;edge0&#x00A0;e1,&#x00A0;edge0&#x00A0;e2,&#x00A0;edge0&#x00A0;e3
&#x00A0;<br />where&#x00A0;&#x00A0;e1.v&#x00A0;=&#x00A0;e2.u&#x00A0;and&#x00A0;e2.v&#x00A0;=&#x00A0;e3.v&#x00A0;and&#x00A0;e1.u&#x00A0;=&#x00A0;e3.u
&#x00A0;<br />and&#x00A0;&#x00A0;&#x00A0;&#x00A0;e1.u&#x00A0;&#x003C;&#x00A0;e2.u&#x00A0;and&#x00A0;e2.u&#x00A0;&#x003C;&#x00A0;e3.v;
&#x00A0;<br />
&#x00A0;<br />select&#x00A0;aconf(0.05,0.05)&#x00A0;as&#x00A0;triangle_prob
&#x00A0;<br />from&#x00A0;&#x00A0;&#x00A0;edge0&#x00A0;e1,&#x00A0;edge0&#x00A0;e2,&#x00A0;edge0&#x00A0;e3
&#x00A0;<br />where&#x00A0;&#x00A0;e1.v&#x00A0;=&#x00A0;e2.u&#x00A0;and&#x00A0;e2.v&#x00A0;=&#x00A0;e3.v&#x00A0;and&#x00A0;e1.u&#x00A0;=&#x00A0;e3.u
&#x00A0;<br />and&#x00A0;&#x00A0;&#x00A0;&#x00A0;e1.u&#x00A0;&#x003C;&#x00A0;e2.u&#x00A0;and&#x00A0;e2.u&#x00A0;&#x003C;&#x00A0;e3.v;
&#x00A0;<br />
</div>
<!--l. 50--><p class="nopar" >
                                                                          

                                                                          
                                                                          

                                                                          
<a 
 id="x1-68001r67"></a>
   <h2 class="appendixHead"><span class="titlemark">Appendix&#x00A0;B</span><br /><a 
 id="x1-69000B"></a>Queries in General Random Graph Experiments</h2>
                                                                          

                                                                          
   <div class="verbatim">
&#x00A0;<br />drop&#x00A0;table&#x00A0;data0;
&#x00A0;<br />drop&#x00A0;table&#x00A0;data;
&#x00A0;<br />
&#x00A0;<br />create&#x00A0;table&#x00A0;data0(u&#x00A0;int,&#x00A0;v&#x00A0;int);
&#x00A0;<br />create&#x00A0;table&#x00A0;data(u&#x00A0;int,&#x00A0;v&#x00A0;int);
&#x00A0;<br />
&#x00A0;<br />/*&#x00A0;Copy&#x00A0;the&#x00A0;data&#x00A0;to&#x00A0;a&#x00A0;relation.&#x00A0;*/
&#x00A0;<br />copy&#x00A0;data0
&#x00A0;<br />from&#x00A0;&#8217;path_of_the_data_file/www.dat&#8217;&#x00A0;with&#x00A0;delimiter&#x00A0;as&#x00A0;&#8217;&#x00A0;&#8217;;
&#x00A0;<br />
&#x00A0;<br />/*&#x00A0;Since&#x00A0;the&#x00A0;data&#x00A0;represents&#x00A0;a&#x00A0;directed&#x00A0;graph,&#x00A0;we&#x00A0;need&#x00A0;to
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;insert&#x00A0;all&#x00A0;tuples&#x00A0;again&#x00A0;with&#x00A0;u&#x00A0;and&#x00A0;v&#x00A0;swapped.
&#x00A0;<br />*/
&#x00A0;<br />insert&#x00A0;into&#x00A0;data0
&#x00A0;<br />select&#x00A0;v,&#x00A0;u&#x00A0;from&#x00A0;data0;
&#x00A0;<br />
&#x00A0;<br />/*&#x00A0;This&#x00A0;fetches&#x00A0;the&#x00A0;distinct&#x00A0;pairs&#x00A0;of&#x00A0;(u,v),&#x00A0;which&#x00A0;represents
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;all&#x00A0;edges&#x00A0;of&#x00A0;an&#x00A0;undirected&#x00A0;graph.
&#x00A0;<br />*/
&#x00A0;<br />insert&#x00A0;into&#x00A0;data
&#x00A0;<br />select&#x00A0;distinct&#x00A0;u,&#x00A0;v&#x00A0;from&#x00A0;data0;
&#x00A0;<br />
&#x00A0;<br />drop&#x00A0;table&#x00A0;edges;
&#x00A0;<br />drop&#x00A0;table&#x00A0;edge0;
&#x00A0;<br />
&#x00A0;<br />create&#x00A0;table&#x00A0;edges&#x00A0;(u&#x00A0;integer,&#x00A0;v&#x00A0;integer,&#x00A0;p&#x00A0;float4);
&#x00A0;<br />
&#x00A0;<br />/*&#x00A0;This&#x00A0;fetches&#x00A0;all&#x00A0;the&#x00A0;edges&#x00A0;related&#x00A0;to&#x00A0;the&#x00A0;nodes&#x00A0;we&#x00A0;intend&#x00A0;to
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;keep&#x00A0;in&#x00A0;the&#x00A0;graph.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#8217;1000&#8217;&#x00A0;in&#x00A0;&#8217;u&#x00A0;&#x003C;&#x00A0;1000&#x00A0;&#x00A0;and&#x00A0;v&#x00A0;&#x003C;&#x00A0;1000&#8217;&#x00A0;is&#x00A0;the&#x00A0;number&#x00A0;of&#x00A0;nodes
                                                                          

                                                                          
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;which&#x00A0;will&#x00A0;appear&#x00A0;in&#x00A0;the&#x00A0;graph.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#8217;0.01&#8217;&#x00A0;in&#x00A0;&#8217;random()&#x00A0;&#x003C;&#x00A0;0.01&#8217;&#x00A0;is&#x00A0;the&#x00A0;proportion&#x00A0;of&#x00A0;certainly
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;present&#x00A0;edges&#x00A0;in&#x00A0;all&#x00A0;edges.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#8217;0.1&#8217;&#x00A0;is&#x00A0;the&#x00A0;upper&#x00A0;bound&#x00A0;of&#x00A0;the&#x00A0;probability&#x00A0;that&#x00A0;a&#x00A0;possibly
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;present&#x00A0;edge&#x00A0;is&#x00A0;in&#x00A0;the&#x00A0;graph.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;You&#x00A0;may&#x00A0;change&#x00A0;the&#x00A0;above-mentioned&#x00A0;three&#x00A0;parameters&#x00A0;in&#x00A0;the
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;experiments.
&#x00A0;<br />&#x00A0;*/
&#x00A0;<br />insert&#x00A0;into&#x00A0;edges
&#x00A0;<br />select&#x00A0;u,&#x00A0;v,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0; CASE&#x00A0;WHEN&#x00A0;random()&#x00A0;&#x003C;&#x00A0;0.01&#x00A0;THEN&#x00A0;1.0
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ELSE&#x00A0;random()&#x00A0;*&#x00A0;0.1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;END
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;from&#x00A0;data
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;where&#x00A0;u&#x00A0;&#x003C;&#x00A0;1000&#x00A0;&#x00A0;and&#x00A0;v&#x00A0;&#x003C;&#x00A0;1000&#x00A0;and&#x00A0;u&#x00A0;&#x003C;&#x00A0;v;
&#x00A0;<br />
&#x00A0;<br />/*&#x00A0;The&#x00A0;number&#x00A0;of&#x00A0;edges&#x00A0;in&#x00A0;the&#x00A0;graph&#x00A0;*/
&#x00A0;<br />select&#x00A0;count(*)&#x00A0;as&#x00A0;edge_count&#x00A0;from&#x00A0;edges;
&#x00A0;<br />
&#x00A0;<br />/*&#x00A0;The&#x00A0;number&#x00A0;of&#x00A0;clauses&#x00A0;in&#x00A0;the&#x00A0;confidence&#x00A0;computation&#x00A0;*/
&#x00A0;<br />select&#x00A0;count(*)&#x00A0;as&#x00A0;clause_count&#x00A0;from
&#x00A0;<br />edges&#x00A0;e1,&#x00A0;edges&#x00A0;e2,&#x00A0;edges&#x00A0;e3
&#x00A0;<br />where&#x00A0;&#x00A0;e1.v&#x00A0;=&#x00A0;e2.u&#x00A0;and&#x00A0;e2.v&#x00A0;=&#x00A0;e3.v&#x00A0;and&#x00A0;e1.u&#x00A0;=&#x00A0;e3.u
&#x00A0;<br />and&#x00A0;e1.u&#x00A0;&#x003C;&#x00A0;e2.u&#x00A0;and&#x00A0;e2.u&#x00A0;&#x003C;&#x00A0;e3.v;
&#x00A0;<br />
&#x00A0;<br />/*&#x00A0;Creation&#x00A0;of&#x00A0;an&#x00A0;uncertain&#x00A0;relations&#x00A0;representing&#x00A0;the&#x00A0;graph&#x00A0;*/
&#x00A0;<br />create&#x00A0;table&#x00A0;edge0&#x00A0;as
&#x00A0;<br />(pick&#x00A0;tuples&#x00A0;from&#x00A0;edges&#x00A0;independently&#x00A0;with&#x00A0;probability&#x00A0;p);
&#x00A0;<br />
&#x00A0;<br />/*&#x00A0;Confidence&#x00A0;computation&#x00A0;of&#x00A0;existence&#x00A0;of&#x00A0;at&#x00A0;least
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;a&#x00A0;triangle&#x00A0;in&#x00A0;the&#x00A0;graph
&#x00A0;<br />*/
&#x00A0;<br />select&#x00A0;aconf(.05,.05)&#x00A0;as&#x00A0;triangle_prob
&#x00A0;<br />from&#x00A0;edge0&#x00A0;e1,&#x00A0;edge0&#x00A0;e2,&#x00A0;edge0&#x00A0;e3
                                                                          

                                                                          
&#x00A0;<br />where&#x00A0;&#x00A0;e1.v&#x00A0;=&#x00A0;e2.u&#x00A0;and&#x00A0;e2.v&#x00A0;=&#x00A0;e3.v&#x00A0;and&#x00A0;e1.u&#x00A0;=&#x00A0;e3.u
&#x00A0;<br />and&#x00A0;e1.u&#x00A0;&#x003C;&#x00A0;e2.u&#x00A0;and&#x00A0;e2.u&#x00A0;&#x003C;&#x00A0;e3.v;
&#x00A0;<br />
</div>
<!--l. 73--><p class="nopar" >
                                                                          

                                                                          
                                                                          

                                                                          
<!--l. 1--><p class="indent" >
                                                                          

                                                                          
<a 
 id="x1-69001r67"></a>
   <h2 class="appendixHead"><span class="titlemark">Appendix&#x00A0;C</span><br /><a 
 id="x1-70000C"></a>Probabilistic TPC-H Queries</h2>
<!--l. 4--><p class="noindent" ><span 
class="cmbx-12x-x-120">Query 1:</span>
                                                                          

                                                                          
   <div class="verbatim">
select
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;l_returnflag,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;l_linestatus,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conf()
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lineitem
&#x00A0;<br />where
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;l_shipdate&#x00A0;&#x003C;=&#x00A0;date&#x00A0;&#8217;1998-09-01&#8217;
&#x00A0;<br />group&#x00A0;by
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;l_returnflag,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;l_linestatus;
</div>
<!--l. 18--><p class="nopar" >
<!--l. 20--><p class="noindent" ><span 
class="cmbx-12x-x-120">Query 4:</span>
                                                                          

                                                                          
   <div class="verbatim">
select
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;o_orderpriority,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conf()
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;orders,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lineitem
&#x00A0;<br />where
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;o_orderdate&#x00A0;&#x003E;=&#x00A0;date&#x00A0;&#8217;1993-07-01&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;o_orderdate&#x00A0;&#x003C;&#x00A0;date&#x00A0;&#8217;1993-10-01&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_orderkey&#x00A0;=&#x00A0;o_orderkey
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_commitdate&#x00A0;&#x003C;&#x00A0;l_receiptdate
&#x00A0;<br />group&#x00A0;by
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;o_orderpriority;
</div>
<!--l. 37--><p class="nopar" >
<!--l. 39--><p class="noindent" ><span 
class="cmbx-12x-x-120">Query 12:</span>
                                                                          

                                                                          
   <div class="verbatim">
select
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;l_shipmode,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conf()
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;orders,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lineitem
&#x00A0;<br />where
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;orders.o_orderkey&#x00A0;=&#x00A0;lineitem.l_orderkey
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;(l_shipmode&#x00A0;=&#x00A0;&#8217;MAIL&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;or&#x00A0;l_shipmode&#x00A0;=&#x00A0;&#8217;SHIP&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_commitdate&#x00A0;&#x003C;&#x00A0;l_receiptdate
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_shipdate&#x00A0;&#x003C;&#x00A0;l_commitdate
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_receiptdate&#x00A0;&#x003E;=&#x00A0;&#8217;1992-01-01&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_receiptdate&#x00A0;&#x003C;&#x00A0;&#8217;1999-01-01&#8217;
&#x00A0;<br />group&#x00A0;by
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;l_shipmode;
&#x00A0;<br />
</div>
<!--l. 60--><p class="nopar" >
<!--l. 62--><p class="noindent" ><span 
class="cmbx-12x-x-120">Query 15:</span>
                                                                          

                                                                          
   <div class="verbatim">
select
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;s_suppkey,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;s_name,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;s_address,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;s_phone,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conf()
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;supplier,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lineitem
&#x00A0;<br />where
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;s_suppkey&#x00A0;=&#x00A0;l_suppkey
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_shipdate&#x00A0;&#x003E;=&#x00A0;date&#x00A0;&#8217;1991-10-10&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_shipdate&#x00A0;&#x003C;&#x00A0;date&#x00A0;&#8217;1992-01-10&#8217;
&#x00A0;<br />group&#x00A0;by
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;s_suppkey,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;s_name,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;s_address,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;s_phone;
&#x00A0;<br />
</div>
<!--l. 85--><p class="nopar" >
<!--l. 87--><p class="noindent" ><span 
class="cmbx-12x-x-120">Boolean Version of Query 1:</span>
                                                                          

                                                                          
   <div class="verbatim">
select
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conf()
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lineitem
&#x00A0;<br />where
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;l_shipdate&#x00A0;&#x003C;=&#x00A0;date&#x00A0;&#8217;1998-09-01&#8217;;
</div>
<!--l. 97--><p class="nopar" >
<!--l. 99--><p class="noindent" ><span 
class="cmbx-12x-x-120">Boolean Version of Query 4:</span>
                                                                          

                                                                          
   <div class="verbatim">
select
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conf()
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;orders,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lineitem
&#x00A0;<br />where
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;o_orderdate&#x00A0;&#x003E;=&#x00A0;date&#x00A0;&#8217;1993-07-01&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;o_orderdate&#x00A0;&#x003C;&#x00A0;date&#x00A0;&#8217;1993-10-01&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_orderkey&#x00A0;=&#x00A0;o_orderkey
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_commitdate&#x00A0;&#x003C;&#x00A0;l_receiptdate
&#x00A0;<br />group&#x00A0;by
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;o_orderpriority;
</div>
<!--l. 115--><p class="nopar" >
<!--l. 117--><p class="noindent" ><span 
class="cmbx-12x-x-120">Boolean Version of Query 6:</span>
                                                                          

                                                                          
   <div class="verbatim">
select
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conf()
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lineitem
&#x00A0;<br />where
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;l_shipdate&#x00A0;&#x003E;=&#x00A0;&#8217;1994-01-01&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_shipdate&#x00A0;&#x003C;&#x00A0;&#8217;1995-01-01&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_discount&#x00A0;&#x003E;=&#x00A0;0.05
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_discount&#x00A0;&#x003C;=&#x00A0;0.07
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_quantity&#x00A0;&#x003C;&#x00A0;24;
</div>
<!--l. 131--><p class="nopar" >
<!--l. 133--><p class="noindent" ><span 
class="cmbx-12x-x-120">Boolean Version of Query 12:</span>
                                                                          

                                                                          
   <div class="verbatim">
select
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conf()
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;orders,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lineitem
&#x00A0;<br />where
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;orders.o_orderkey&#x00A0;=&#x00A0;lineitem.l_orderkey
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;(l_shipmode&#x00A0;=&#x00A0;&#8217;MAIL&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;or&#x00A0;l_shipmode&#x00A0;=&#x00A0;&#8217;SHIP&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_commitdate&#x00A0;&#x003C;&#x00A0;l_receiptdate
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_shipdate&#x00A0;&#x003C;&#x00A0;l_commitdate
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_receiptdate&#x00A0;&#x003E;=&#x00A0;&#8217;1992-01-01&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_receiptdate&#x00A0;&#x003C;&#x00A0;&#8217;1999-01-01&#8217;
&#x00A0;<br />group&#x00A0;by
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;l_shipmode;
</div>
<!--l. 152--><p class="nopar" >
<!--l. 154--><p class="noindent" ><span 
class="cmbx-12x-x-120">Boolean Version of Query 14:</span>
                                                                          

                                                                          
   <div class="verbatim">
select
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conf()
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lineitem,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;part
&#x00A0;<br />where
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;l_partkey&#x00A0;=&#x00A0;p_partkey
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_shipdate&#x00A0;&#x003E;=&#x00A0;date&#x00A0;&#8217;1995-09-01&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_shipdate&#x00A0;&#x003C;&#x00A0;date&#x00A0;&#8217;1995-10-01&#8217;;
</div>
<!--l. 167--><p class="nopar" >
<!--l. 169--><p class="noindent" ><span 
class="cmbx-12x-x-120">Boolean Version of Query 15:</span>
                                                                          

                                                                          
   <div class="verbatim">
select
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conf()
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;supplier,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lineitem
&#x00A0;<br />where
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;s_suppkey&#x00A0;=&#x00A0;l_suppkey
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_shipdate&#x00A0;&#x003E;=&#x00A0;date&#x00A0;&#8217;1991-10-10&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;l_shipdate&#x00A0;&#x003C;&#x00A0;date&#x00A0;&#8217;1992-01-10&#8217;;
</div>
<!--l. 182--><p class="nopar" >
<!--l. 184--><p class="noindent" ><span 
class="cmbx-12x-x-120">Boolean Version of Query 16:</span>
                                                                          

                                                                          
   <div class="verbatim">
select
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conf()
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;partsupp,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;part
&#x00A0;<br />where
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;p_partkey&#x00A0;=&#x00A0;ps_partkey
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;p_brand&#x00A0;&#x003C;&#x003E;&#x00A0;&#8217;Brand#45&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;p_type&#x00A0;like&#x00A0;&#8217;MEDIUM&#x00A0;POLISHED%&#8217;;
</div>
<!--l. 197--><p class="nopar" >
<!--l. 199--><p class="noindent" ><span 
class="cmbx-12x-x-120">Boolean Version of Query 17:</span>
                                                                          

                                                                          
   <div class="verbatim">
select
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conf()
&#x00A0;<br />from
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lineitem,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;part
&#x00A0;<br />where
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;p_partkey&#x00A0;=&#x00A0;l_partkey
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;p_brand&#x00A0;=&#x00A0;&#8217;Brand#23&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;and&#x00A0;p_container&#x00A0;=&#x00A0;&#8217;MED&#x00A0;BOX&#8217;;
</div>
<!--l. 212--><p class="nopar" >
<!--l. 214--><p class="indent" >
                                                                          

                                                                          
                                                                          

                                                                          
   <h2 class="likechapterHead"><a 
 id="x1-71000C"></a>Bibliography</h2>
     <div class="thebibliography">
     <p class="bibitem" ><span class="biblabel">
  [1]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XAHV95"></a>S.&#x00A0;Abiteboul, R.&#x00A0;Hull, and V.&#x00A0;Vianu.  <span 
class="cmti-12">Foundations of Databases</span>.
     Addison-Wesley, 1995.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [2]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XAKG1991"></a>S.&#x00A0;Abiteboul,
     P.&#x00A0;Kanellakis, and G.&#x00A0;Grahne.  &#8220;On the Representation and Querying
     of Sets of Possible Worlds&#8221;. <span 
class="cmti-12">Theor.</span><span 
class="cmti-12">&#x00A0;Comput.</span><span 
class="cmti-12">&#x00A0;Sci.</span>, <span 
class="cmbx-12">78</span>(1):158&#8211;187, 1991.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [3]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XAJKO2008"></a>L.&#x00A0;Antova, T.&#x00A0;Jansen, C.&#x00A0;Koch, and D.&#x00A0;Olteanu. &#8220;Fast and Simple
     Relational Processing of Uncertain Data&#8221;. In <span 
class="cmti-12">Proc.</span><span 
class="cmti-12">&#x00A0;ICDE</span>, 2008.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [4]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XAKO07ISQL"></a>L.&#x00A0;Antova,  C.&#x00A0;Koch,  and  D.&#x00A0;Olteanu.      &#8220;From  Complete  to
     Incomplete Information and Back&#8221;. In <span 
class="cmti-12">Proc.</span><span 
class="cmti-12">&#x00A0;SIGMOD</span>, 2007.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [5]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XDKLR2000"></a>P.&#x00A0;Dagum,   R.&#x00A0;M.   Karp,   M.&#x00A0;Luby,   and   S.&#x00A0;M.   Ross.      &#8220;An
     Optimal Algorithm for Monte Carlo Estimation&#8221;.  <span 
class="cmti-12">SIAM J.</span><span 
class="cmti-12">&#x00A0;Comput.</span>,
     <span 
class="cmbx-12">29</span>(5):1484&#8211;1496, 2000.
                                                                          

                                                                          
     </p>
     <p class="bibitem" ><span class="biblabel">
  [6]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xdalvi07efficient"></a>N.&#x00A0;Dalvi and D.&#x00A0;Suciu. &#8220;Efficient query evaluation on probabilistic
     databases&#8221;. <span 
class="cmti-12">VLDB Journal</span>, <span 
class="cmbx-12">16</span>(4):523&#8211;544, 2007.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [7]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XDP1960"></a>M.&#x00A0;Davis   and   H.&#x00A0;Putnam.      &#8220;A   Computing   Procedure   for
     Quantification Theory&#8221;. <span 
class="cmti-12">Journal of ACM</span>, <span 
class="cmbx-12">7</span>(3):201&#8211;215, 1960.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [8]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XGGH1998"></a>E.&#x00A0;Grädel, Y.&#x00A0;Gurevich, and C.&#x00A0;Hirsch. &#8220;The Complexity of Query
     Reliability&#8221;. In <span 
class="cmti-12">Proc.</span><span 
class="cmti-12">&#x00A0;PODS</span>, pages 227&#8211;234, 1998.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [9]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XIL1984"></a>T.&#x00A0;Imielinski and W.&#x00A0;Lipski. &#8220;Incomplete information in relational
     databases&#8221;. <span 
class="cmti-12">Journal of ACM</span>, <span 
class="cmbx-12">31</span>(4):761&#8211;791, 1984.
     </p>
     <p class="bibitem" ><span class="biblabel">
 [10]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XKL1983"></a>R.&#x00A0;M.   Karp   and   M.&#x00A0;Luby.       &#8220;Monte-Carlo   Algorithms   for
     Enumeration and Reliability Problems&#8221;.  In <span 
class="cmti-12">Proc.</span><span 
class="cmti-12">&#x00A0;FOCS</span>, pages 56&#8211;64,
     1983.
     </p>
     <p class="bibitem" ><span class="biblabel">
 [11]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XKLM1989"></a>R.&#x00A0;M.   Karp,   M.&#x00A0;Luby,   and   N.&#x00A0;Madras.         &#8220;Monte-Carlo
     Approximation Algorithms for Enumeration Problems&#8221;. <span 
class="cmti-12">J.</span><span 
class="cmti-12">&#x00A0;Algorithms</span>,
     <span 
class="cmbx-12">10</span>(3):429&#8211;448, 1989.
     </p>
                                                                          

                                                                          
     <p class="bibitem" ><span class="biblabel">
 [12]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XKoch2008-SO"></a>C.&#x00A0;Koch. &#8220;A Compositional Query Algebra for Second-Order Logic
     and Uncertain Databases&#8221;. Technical Report arXiv:0807.4620, 2008.
     </p>
     <p class="bibitem" ><span class="biblabel">
 [13]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XKoch2008"></a>C.&#x00A0;Koch.   &#8220;Approximating Predicates and Expressive Queries on
     Probabilistic Databases&#8221;. In <span 
class="cmti-12">Proc.</span><span 
class="cmti-12">&#x00A0;PODS</span>, 2008.
     </p>
     <p class="bibitem" ><span class="biblabel">
 [14]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XKochBook2008"></a>C.&#x00A0;Koch. &#8220;MayBMS: A System for Managing Large Uncertain and
     Probabilistic Databases&#8221;. In C.&#x00A0;Aggarwal, editor, <span 
class="cmti-12">Managing and Mining</span>
     <span 
class="cmti-12">Uncertain Data</span>, chapter&#x00A0;6. Springer-Verlag, 2008.
     </p>
     <p class="bibitem" ><span class="biblabel">
 [15]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XKO2008"></a>C.&#x00A0;Koch and D.&#x00A0;Olteanu.  &#8220;Conditioning Probabilistic Databases&#8221;.
     In <span 
class="cmti-12">Proc.</span><span 
class="cmti-12">&#x00A0;VLDB</span>, 2008.
     </p>
     <p class="bibitem" ><span class="biblabel">
 [16]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XOHK2008"></a>D.&#x00A0;Olteanu, J.&#x00A0;Huang, and C.&#x00A0;Koch.  &#8220;SPROUT: Lazy vs. Eager
     Query  Plans  for  Tuple-Independent  Probabilistic  Databases.&#8221;.    In
     <span 
class="cmti-12">Proc.</span><span 
class="cmti-12">&#x00A0;ICDE</span>, 2009.
     </p>
     <p class="bibitem" ><span class="biblabel">
 [17]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XVazirani2001"></a>V.&#x00A0;V. Vazirani. <span 
class="cmti-12">Approximation Algorithms</span>. Springer, 2001.
</p>
     </div>
    
</body></html> 

                                                                          


